import{d as hr,r as ur,o as dr,a as pr,c as fr,b as Mt,e as mr,w as gr,p as yr,f as br,g as vr,h as Mr,i as Er,A as wr}from"./Antd.1d9873c6.js";import{O as he,B as re,F as J,M as L,S as be,U as at,V as B,W as Ye,C as Xs,L as me,R as _e,a as W,b as Vs,c as O,Q as ne,d as Qe,E as Ys,e as Et,f as lt,g as je,h as te,i as K,j as ct,k as ue,l as ps,T as wt,P as Ze,D as Sr,m as fs,n as qe,N as _s,A as xr,o as se,p as ms,q as Qs,G as Zs,r as Ft,s as ve,t as gs,u as ge,v as Ie,w as Cr,x as qs,y as Ar,z as Tr,H as Rr,I as Js,J as Lr,K as ht,X as ys,Y as ut,Z as dt,_ as St,$ as $s,a0 as ei,a1 as Wt,a2 as Me,a3 as Or,a4 as bs,a5 as Dr,a6 as ti,a7 as Pr,a8 as si,a9 as jr,aa as Ir,ab as Nr,ac as Br,ad as Hr,ae as ii,af as ri,ag as zr,ah as kr,ai as Gr,aj as Ur,ak as ni,al as Fr,am as oi,an as Wr,ao as ai,ap as xt,aq as pt,ar as li,as as Kr,at as Xr,au as Vr,av as Yr,aw as vs,ax as _r,ay as Qr,az as Zr,aA as qr,aB as Jr,aC as $r,aD as ci,aE as hi,aF as en}from"./three.510ba818.js";const tn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}};tn();var Ct=function(){var s=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(m){m.preventDefault(),i(++s%e.children.length)},!1);function t(m){return e.appendChild(m.dom),m}function i(m){for(var y=0;y<e.children.length;y++)e.children[y].style.display=y===m?"block":"none";s=m}var r=(performance||Date).now(),o=r,n=0,a=t(new Ct.Panel("FPS","#0ff","#002")),h=t(new Ct.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new Ct.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){n++;var m=(performance||Date).now();if(h.update(m-r,200),m>=o+1e3&&(a.update(n*1e3/(m-o),100),o=m,n=0,c)){var y=performance.memory;c.update(y.usedJSHeapSize/1048576,y.jsHeapSizeLimit/1048576)}return m},update:function(){r=this.end()},domElement:e,setMode:i}};Ct.Panel=function(s,e,t){var i=1/0,r=0,o=Math.round,n=o(window.devicePixelRatio||1),a=80*n,h=48*n,c=3*n,m=2*n,y=3*n,S=15*n,x=74*n,E=30*n,w=document.createElement("canvas");w.width=a,w.height=h,w.style.cssText="width:80px;height:48px";var C=w.getContext("2d");return C.font="bold "+9*n+"px Helvetica,Arial,sans-serif",C.textBaseline="top",C.fillStyle=t,C.fillRect(0,0,a,h),C.fillStyle=e,C.fillText(s,c,m),C.fillRect(y,S,x,E),C.fillStyle=t,C.globalAlpha=.9,C.fillRect(y,S,x,E),{dom:w,update:function(u,b){i=Math.min(i,u),r=Math.max(r,u),C.fillStyle=t,C.globalAlpha=1,C.fillRect(0,0,a,S),C.fillStyle=e,C.fillText(o(u)+" "+s+" ("+o(i)+"-"+o(r)+")",c,m),C.drawImage(w,y+n,S,x-n,E,y,S,x-n,E),C.fillRect(y+x-n,S,n,E),C.fillStyle=t,C.globalAlpha=.9,C.fillRect(y+x-n,S,n,o((1-u/b)*E))}}};var sn=Ct,Kt={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;

		}`};class ft{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}const rn=new he(-1,1,1,-1,0,1),Ms=new re;Ms.setAttribute("position",new J([-1,3,0,-1,-1,0,3,-1,0],3));Ms.setAttribute("uv",new J([0,2,0,0,2,0],2));class Es{constructor(e){this._mesh=new L(Ms,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,rn)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class ui extends ft{constructor(e,t){super();this.textureID=t!==void 0?t:"tDiffuse",e instanceof be?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=at.clone(e.uniforms),this.material=new be({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Es(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}class di extends ft{constructor(e,t){super();this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const r=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let n,a;this.inverse?(n=0,a=1):(n=1,a=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,n,4294967295),o.buffers.stencil.setClear(a),o.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),o.buffers.stencil.setLocked(!0)}}class nn extends ft{constructor(){super();this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class ws{constructor(e,t){if(this.renderer=e,t===void 0){const i={minFilter:me,magFilter:me,format:_e},r=e.getSize(new B);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,t=new Ye(this._width*this._pixelRatio,this._height*this._pixelRatio,i),t.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],Kt===void 0&&console.error("THREE.EffectComposer relies on CopyShader"),ui===void 0&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new ui(Kt),this.clock=new Xs}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let r=0,o=this.passes.length;r<o;r++){const n=this.passes[r];if(n.enabled!==!1){if(n.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),n.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),n.needsSwap){if(i){const a=this.renderer.getContext(),h=this.renderer.state.buffers.stencil;h.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),h.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}di!==void 0&&(n instanceof di?i=!0:n instanceof nn&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new B);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(i,r),this.renderTarget2.setSize(i,r);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(i,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}new he(-1,1,1,-1,0,1);const pi=new re;pi.setAttribute("position",new J([-1,3,0,-1,-1,0,3,-1,0],3));pi.setAttribute("uv",new J([0,2,0,0,2,0],2));class Ss extends ft{constructor(e,t,i,r,o){super();this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=o!==void 0?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new W}render(e,t,i){const r=e.autoClear;e.autoClear=!1;let o,n;this.overrideMaterial!==void 0&&(n=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,o),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=n),e.autoClear=r}}const Je=new Vs,oe=new O,Fe=new O,F=new ne,fi={X:new O(1,0,0),Y:new O(0,1,0),Z:new O(0,0,1)},mi={type:"change"},gi={type:"mouseDown"},yi={type:"mouseUp",mode:null},on={type:"objectChange"};class bi extends Qe{constructor(e,t){super();t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new wi;this._gizmo=i,this.add(i);const r=new Si;this._plane=r,this.add(r);const o=this;function n(b,p){let f=p;Object.defineProperty(o,b,{get:function(){return f!==void 0?f:p},set:function(g){f!==g&&(f=g,r[b]=g,i[b]=g,o.dispatchEvent({type:b+"-changed",value:g}),o.dispatchEvent(mi))}}),o[b]=p,r[b]=p,i[b]=p}n("camera",e),n("object",void 0),n("enabled",!0),n("axis",null),n("mode","translate"),n("translationSnap",null),n("rotationSnap",null),n("scaleSnap",null),n("space","world"),n("size",1),n("dragging",!1),n("showX",!0),n("showY",!0),n("showZ",!0);const a=new O,h=new O,c=new ne,m=new ne,y=new O,S=new ne,x=new O,E=new O,w=new O,C=0,u=new O;n("worldPosition",a),n("worldPositionStart",h),n("worldQuaternion",c),n("worldQuaternionStart",m),n("cameraPosition",y),n("cameraQuaternion",S),n("pointStart",x),n("pointEnd",E),n("rotationAxis",w),n("rotationAngle",C),n("eye",u),this._offset=new O,this._startNorm=new O,this._endNorm=new O,this._cameraScale=new O,this._parentPosition=new O,this._parentQuaternion=new ne,this._parentQuaternionInv=new ne,this._parentScale=new O,this._worldScaleStart=new O,this._worldQuaternionInv=new ne,this._worldScale=new O,this._positionStart=new O,this._quaternionStart=new ne,this._scaleStart=new O,this._getPointer=an.bind(this),this._onPointerDown=cn.bind(this),this._onPointerHover=ln.bind(this),this._onPointerMove=hn.bind(this),this._onPointerUp=un.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;Je.setFromCamera(e,this.camera);const t=xs(this._gizmo.picker[this.mode],Je);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){Je.setFromCamera(e,this.camera);const t=xs(this._plane,Je,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,gi.mode=this.mode,this.dispatchEvent(gi)}}pointerMove(e){const t=this.axis,i=this.mode,r=this.object;let o=this.space;if(i==="scale"?o="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(o="world"),r===void 0||t===null||this.dragging===!1||e.button!==-1)return;Je.setFromCamera(e,this.camera);const n=xs(this._plane,Je,!0);if(!!n){if(this.pointEnd.copy(n.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(r.position.applyQuaternion(F.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),o==="world"&&(r.parent&&r.position.add(oe.setFromMatrixPosition(r.parent.matrixWorld)),t.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(oe.setFromMatrixPosition(r.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),Fe.set(a,a,a)}else oe.copy(this.pointStart),Fe.copy(this.pointEnd),oe.applyQuaternion(this._worldQuaternionInv),Fe.applyQuaternion(this._worldQuaternionInv),Fe.divide(oe),t.search("X")===-1&&(Fe.x=1),t.search("Y")===-1&&(Fe.y=1),t.search("Z")===-1&&(Fe.z=1);r.scale.copy(this._scaleStart).multiply(Fe),this.scaleSnap&&(t.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(oe.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(oe.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(fi[t]),oe.copy(fi[t]),o==="local"&&oe.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(oe.cross(this.eye).normalize())*a),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&t!=="E"&&t!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(F.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(F.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(mi),this.dispatchEvent(on)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(yi.mode=this.mode,this.dispatchEvent(yi)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getRaycaster(){return Je}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}bi.prototype.isTransformControls=!0;function an(s){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:s.button};{const e=this.domElement.getBoundingClientRect();return{x:(s.clientX-e.left)/e.width*2-1,y:-(s.clientY-e.top)/e.height*2+1,button:s.button}}}function ln(s){if(!!this.enabled)switch(s.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(s));break}}function cn(s){!this.enabled||(this.domElement.setPointerCapture(s.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(s)),this.pointerDown(this._getPointer(s)))}function hn(s){!this.enabled||this.pointerMove(this._getPointer(s))}function un(s){!this.enabled||(this.domElement.releasePointerCapture(s.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(s)))}function xs(s,e,t){const i=e.intersectObject(s,!0);for(let r=0;r<i.length;r++)if(i[r].object.visible||t)return i[r];return!1}const Xt=new Ys,H=new O(0,1,0),vi=new O(0,0,0),Mi=new Et,Vt=new ne,Yt=new ne,Ee=new O,Ei=new Et,At=new O(1,0,0),$e=new O(0,1,0),Tt=new O(0,0,1),_t=new O,Rt=new O,Lt=new O;class wi extends Qe{constructor(){super();this.type="TransformControlsGizmo";const e=new lt({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new je({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const r=t.clone();r.opacity=.5;const o=e.clone();o.color.setHex(16711680);const n=e.clone();n.color.setHex(65280);const a=e.clone();a.color.setHex(255);const h=e.clone();h.color.setHex(16711680),h.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const m=e.clone();m.color.setHex(255),m.opacity=.5;const y=e.clone();y.opacity=.25;const S=e.clone();S.color.setHex(16776960),S.opacity=.25,e.clone().color.setHex(16776960);const E=e.clone();E.color.setHex(7895160);const w=new te(0,.04,.1,12);w.translate(0,.05,0);const C=new K(.08,.08,.08);C.translate(0,.04,0);const u=new re;u.setAttribute("position",new J([0,0,0,1,0,0],3));const b=new te(.0075,.0075,.5,3);b.translate(0,.25,0);function p(Y,q){const _=new wt(Y,.0075,3,64,q*Math.PI*2);return _.rotateY(Math.PI/2),_.rotateX(Math.PI/2),_}function f(){const Y=new re;return Y.setAttribute("position",new J([0,0,0,1,1,1],3)),Y}const g={X:[[new L(w,o),[.5,0,0],[0,0,-Math.PI/2]],[new L(w,o),[-.5,0,0],[0,0,Math.PI/2]],[new L(b,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new L(w,n),[0,.5,0]],[new L(w,n),[0,-.5,0],[Math.PI,0,0]],[new L(b,n)]],Z:[[new L(w,a),[0,0,.5],[Math.PI/2,0,0]],[new L(w,a),[0,0,-.5],[-Math.PI/2,0,0]],[new L(b,a),null,[Math.PI/2,0,0]]],XYZ:[[new L(new ct(.1,0),y.clone()),[0,0,0]]],XY:[[new L(new K(.15,.15,.01),m.clone()),[.15,.15,0]]],YZ:[[new L(new K(.15,.15,.01),h.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new L(new K(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},M={X:[[new L(new te(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new L(new te(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new L(new te(.2,0,.6,4),i),[0,.3,0]],[new L(new te(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new L(new te(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new L(new te(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new L(new ct(.2,0),i)]],XY:[[new L(new K(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new L(new K(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new L(new K(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},R={START:[[new L(new ct(.01,2),r),null,null,null,"helper"]],END:[[new L(new ct(.01,2),r),null,null,null,"helper"]],DELTA:[[new ue(f(),r),null,null,null,"helper"]],X:[[new ue(u,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ue(u,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ue(u,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},T={XYZE:[[new L(p(.5,1),E),null,[0,Math.PI/2,0]]],X:[[new L(p(.5,.5),o)]],Y:[[new L(p(.5,.5),n),null,[0,0,-Math.PI/2]]],Z:[[new L(p(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new L(p(.75,1),S),null,[0,Math.PI/2,0]]]},D={AXIS:[[new ue(u,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},j={XYZE:[[new L(new ps(.25,10,8),i)]],X:[[new L(new wt(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new L(new wt(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new L(new wt(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new L(new wt(.75,.1,2,24),i)]]},k={X:[[new L(C,o),[.5,0,0],[0,0,-Math.PI/2]],[new L(b,o),[0,0,0],[0,0,-Math.PI/2]],[new L(C,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new L(C,n),[0,.5,0]],[new L(b,n)],[new L(C,n),[0,-.5,0],[0,0,Math.PI]]],Z:[[new L(C,a),[0,0,.5],[Math.PI/2,0,0]],[new L(b,a),[0,0,0],[Math.PI/2,0,0]],[new L(C,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new L(new K(.15,.15,.01),m),[.15,.15,0]]],YZ:[[new L(new K(.15,.15,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new L(new K(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new L(new K(.1,.1,.1),y.clone())]]},X={X:[[new L(new te(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new L(new te(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new L(new te(.2,0,.6,4),i),[0,.3,0]],[new L(new te(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new L(new te(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new L(new te(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new L(new K(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new L(new K(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new L(new K(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new L(new K(.2,.2,.2),i),[0,0,0]]]},Oe={X:[[new ue(u,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ue(u,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ue(u,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function V(Y){const q=new Qe;for(const _ in Y)for(let fe=Y[_].length;fe--;){const Z=Y[_][fe][0].clone(),rt=Y[_][fe][1],nt=Y[_][fe][2],ot=Y[_][fe][3],Ut=Y[_][fe][4];Z.name=_,Z.tag=Ut,rt&&Z.position.set(rt[0],rt[1],rt[2]),nt&&Z.rotation.set(nt[0],nt[1],nt[2]),ot&&Z.scale.set(ot[0],ot[1],ot[2]),Z.updateMatrix();const vt=Z.geometry.clone();vt.applyMatrix4(Z.matrix),Z.geometry=vt,Z.renderOrder=1/0,Z.position.set(0,0,0),Z.rotation.set(0,0,0),Z.scale.set(1,1,1),q.add(Z)}return q}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=V(g)),this.add(this.gizmo.rotate=V(T)),this.add(this.gizmo.scale=V(k)),this.add(this.picker.translate=V(M)),this.add(this.picker.rotate=V(j)),this.add(this.picker.scale=V(X)),this.add(this.helper.translate=V(R)),this.add(this.helper.rotate=V(D)),this.add(this.helper.scale=V(Oe)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const i=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Yt;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let o=0;o<r.length;o++){const n=r[o];n.visible=!0,n.rotation.set(0,0,0),n.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),n.scale.set(1,1,1).multiplyScalar(a*this.size/4),n.tag==="helper"){n.visible=!1,n.name==="AXIS"?(n.position.copy(this.worldPositionStart),n.visible=!!this.axis,this.axis==="X"&&(F.setFromEuler(Xt.set(0,0,0)),n.quaternion.copy(i).multiply(F),Math.abs(H.copy(At).applyQuaternion(i).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="Y"&&(F.setFromEuler(Xt.set(0,0,Math.PI/2)),n.quaternion.copy(i).multiply(F),Math.abs(H.copy($e).applyQuaternion(i).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="Z"&&(F.setFromEuler(Xt.set(0,Math.PI/2,0)),n.quaternion.copy(i).multiply(F),Math.abs(H.copy(Tt).applyQuaternion(i).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="XYZE"&&(F.setFromEuler(Xt.set(0,Math.PI/2,0)),H.copy(this.rotationAxis),n.quaternion.setFromRotationMatrix(Mi.lookAt(vi,H,$e)),n.quaternion.multiply(F),n.visible=this.dragging),this.axis==="E"&&(n.visible=!1)):n.name==="START"?(n.position.copy(this.worldPositionStart),n.visible=this.dragging):n.name==="END"?(n.position.copy(this.worldPosition),n.visible=this.dragging):n.name==="DELTA"?(n.position.copy(this.worldPositionStart),n.quaternion.copy(this.worldQuaternionStart),oe.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),oe.applyQuaternion(this.worldQuaternionStart.clone().invert()),n.scale.copy(oe),n.visible=this.dragging):(n.quaternion.copy(i),this.dragging?n.position.copy(this.worldPositionStart):n.position.copy(this.worldPosition),this.axis&&(n.visible=this.axis.search(n.name)!==-1));continue}if(n.quaternion.copy(i),this.mode==="translate"||this.mode==="scale"){const h=.99,c=.2;n.name==="X"&&Math.abs(H.copy(At).applyQuaternion(i).dot(this.eye))>h&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="Y"&&Math.abs(H.copy($e).applyQuaternion(i).dot(this.eye))>h&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="Z"&&Math.abs(H.copy(Tt).applyQuaternion(i).dot(this.eye))>h&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="XY"&&Math.abs(H.copy(Tt).applyQuaternion(i).dot(this.eye))<c&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="YZ"&&Math.abs(H.copy(At).applyQuaternion(i).dot(this.eye))<c&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="XZ"&&Math.abs(H.copy($e).applyQuaternion(i).dot(this.eye))<c&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1)}else this.mode==="rotate"&&(Vt.copy(i),H.copy(this.eye).applyQuaternion(F.copy(i).invert()),n.name.search("E")!==-1&&n.quaternion.setFromRotationMatrix(Mi.lookAt(this.eye,vi,$e)),n.name==="X"&&(F.setFromAxisAngle(At,Math.atan2(-H.y,H.z)),F.multiplyQuaternions(Vt,F),n.quaternion.copy(F)),n.name==="Y"&&(F.setFromAxisAngle($e,Math.atan2(H.x,H.z)),F.multiplyQuaternions(Vt,F),n.quaternion.copy(F)),n.name==="Z"&&(F.setFromAxisAngle(Tt,Math.atan2(H.y,H.x)),F.multiplyQuaternions(Vt,F),n.quaternion.copy(F)));n.visible=n.visible&&(n.name.indexOf("X")===-1||this.showX),n.visible=n.visible&&(n.name.indexOf("Y")===-1||this.showY),n.visible=n.visible&&(n.name.indexOf("Z")===-1||this.showZ),n.visible=n.visible&&(n.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),n.material._color=n.material._color||n.material.color.clone(),n.material._opacity=n.material._opacity||n.material.opacity,n.material.color.copy(n.material._color),n.material.opacity=n.material._opacity,this.enabled&&this.axis&&(n.name===this.axis||this.axis.split("").some(function(h){return n.name===h}))&&(n.material.color.setHex(16776960),n.material.opacity=1)}super.updateMatrixWorld(e)}}wi.prototype.isTransformControlsGizmo=!0;class Si extends L{constructor(){super(new Ze(1e5,1e5,2,2),new lt({visible:!1,wireframe:!0,side:Sr,transparent:!0,opacity:.1,toneMapped:!1}));this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),_t.copy(At).applyQuaternion(t==="local"?this.worldQuaternion:Yt),Rt.copy($e).applyQuaternion(t==="local"?this.worldQuaternion:Yt),Lt.copy(Tt).applyQuaternion(t==="local"?this.worldQuaternion:Yt),H.copy(Rt),this.mode){case"translate":case"scale":switch(this.axis){case"X":H.copy(this.eye).cross(_t),Ee.copy(_t).cross(H);break;case"Y":H.copy(this.eye).cross(Rt),Ee.copy(Rt).cross(H);break;case"Z":H.copy(this.eye).cross(Lt),Ee.copy(Lt).cross(H);break;case"XY":Ee.copy(Lt);break;case"YZ":Ee.copy(_t);break;case"XZ":H.copy(Lt),Ee.copy(Rt);break;case"XYZ":case"E":Ee.set(0,0,0);break}break;case"rotate":default:Ee.set(0,0,0)}Ee.length()===0?this.quaternion.copy(this.cameraQuaternion):(Ei.lookAt(oe.set(0,0,0),Ee,H),this.quaternion.setFromRotationMatrix(Ei)),super.updateMatrixWorld(e)}}Si.prototype.isTransformControlsPlane=!0;const xi=new O,dn=new ne,Ci=new O;class Qt extends Qe{constructor(e=document.createElement("div")){super();this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this}}Qt.prototype.isCSS3DObject=!0;class Ai extends Qt{constructor(e){super(e);this.rotation2D=0}copy(e,t){return super.copy(e,t),this.rotation2D=e.rotation2D,this}}Ai.prototype.isCSS3DSprite=!0;const we=new Et,pn=new Et;class fn{constructor(e={}){const t=this;let i,r,o,n;const a={camera:{fov:0,style:""},objects:new WeakMap},h=e.element!==void 0?e.element:document.createElement("div");h.style.overflow="hidden",this.domElement=h;const c=document.createElement("div");c.style.transformStyle="preserve-3d",c.style.pointerEvents="none",h.appendChild(c),this.getSize=function(){return{width:i,height:r}},this.render=function(E,w){const C=w.projectionMatrix.elements[5]*n;a.camera.fov!==C&&(h.style.perspective=w.isPerspectiveCamera?C+"px":"",a.camera.fov=C),E.autoUpdate===!0&&E.updateMatrixWorld(),w.parent===null&&w.updateMatrixWorld();let u,b;w.isOrthographicCamera&&(u=-(w.right+w.left)/2,b=(w.top+w.bottom)/2);const f=(w.isOrthographicCamera?"scale("+C+")translate("+m(u)+"px,"+m(b)+"px)"+y(w.matrixWorldInverse):"translateZ("+C+"px)"+y(w.matrixWorldInverse))+"translate("+o+"px,"+n+"px)";a.camera.style!==f&&(c.style.transform=f,a.camera.style=f),x(E,E,w)},this.setSize=function(E,w){i=E,r=w,o=i/2,n=r/2,h.style.width=E+"px",h.style.height=w+"px",c.style.width=E+"px",c.style.height=w+"px"};function m(E){return Math.abs(E)<1e-10?0:E}function y(E){const w=E.elements;return"matrix3d("+m(w[0])+","+m(-w[1])+","+m(w[2])+","+m(w[3])+","+m(w[4])+","+m(-w[5])+","+m(w[6])+","+m(w[7])+","+m(w[8])+","+m(-w[9])+","+m(w[10])+","+m(w[11])+","+m(w[12])+","+m(-w[13])+","+m(w[14])+","+m(w[15])+")"}function S(E){const w=E.elements,C="matrix3d("+m(w[0])+","+m(w[1])+","+m(w[2])+","+m(w[3])+","+m(-w[4])+","+m(-w[5])+","+m(-w[6])+","+m(-w[7])+","+m(w[8])+","+m(w[9])+","+m(w[10])+","+m(w[11])+","+m(w[12])+","+m(w[13])+","+m(w[14])+","+m(w[15])+")";return"translate(-50%,-50%)"+C}function x(E,w,C,u){if(E.isCSS3DObject){E.onBeforeRender(t,w,C);let b;E.isCSS3DSprite?(we.copy(C.matrixWorldInverse),we.transpose(),E.rotation2D!==0&&we.multiply(pn.makeRotationZ(E.rotation2D)),E.matrixWorld.decompose(xi,dn,Ci),we.setPosition(xi),we.scale(Ci),we.elements[3]=0,we.elements[7]=0,we.elements[11]=0,we.elements[15]=1,b=S(we)):b=S(E.matrixWorld);const p=E.element,f=a.objects.get(E);if(f===void 0||f.style!==b){p.style.transform=b;const g={style:b};a.objects.set(E,g)}p.style.display=E.visible?"":"none",p.parentNode!==c&&c.appendChild(p),E.onAfterRender(t,w,C)}for(let b=0,p=E.children.length;b<p;b++)x(E.children[b],w,C)}}}const Ot={defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new B(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		void SMAAEdgeDetectionVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAAEdgeDetectionVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];

		vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {
			vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );

			// Calculate color deltas:
			vec4 delta;
			vec3 C = texture2D( colorTex, texcoord ).rgb;

			vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;
			vec3 t = abs( C - Cleft );
			delta.x = max( max( t.r, t.g ), t.b );

			vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;
			t = abs( C - Ctop );
			delta.y = max( max( t.r, t.g ), t.b );

			// We do the usual threshold:
			vec2 edges = step( threshold, delta.xy );

			// Then discard if there is no edge:
			if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )
				discard;

			// Calculate right and bottom deltas:
			vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;
			t = abs( C - Cright );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;
			t = abs( C - Cbottom );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the maximum delta in the direct neighborhood:
			float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );

			// Calculate left-left and top-top deltas:
			vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;
			t = abs( C - Cleftleft );
			delta.z = max( max( t.r, t.g ), t.b );

			vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;
			t = abs( C - Ctoptop );
			delta.w = max( max( t.r, t.g ), t.b );

			// Calculate the final maximum delta:
			maxDelta = max( max( maxDelta, delta.z ), delta.w );

			// Local contrast adaptation in action:
			edges.xy *= step( 0.5 * maxDelta, delta.xy );

			return vec4( edges, 0.0, 0.0 );
		}

		void main() {

			gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );

		}`},Zt={defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new B(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 3 ];
		varying vec2 vPixcoord;

		void SMAABlendingWeightCalculationVS( vec2 texcoord ) {
			vPixcoord = texcoord / resolution;

			// We will use these offsets for the searches later on (see @PSEUDO_GATHER4):
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 ); // WebGL port note: Changed sign in Y and W components
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 ); // WebGL port note: Changed sign in Y and W components

			// And these for the searches, they indicate the ends of the loops:
			vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );

		}

		void main() {

			vUv = uv;

			SMAABlendingWeightCalculationVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )

		uniform sampler2D tDiffuse;
		uniform sampler2D tArea;
		uniform sampler2D tSearch;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[3];
		varying vec2 vPixcoord;

		#if __VERSION__ == 100
		vec2 round( vec2 x ) {
			return sign( x ) * floor( abs( x ) + 0.5 );
		}
		#endif

		float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {
			// Not required if searchTex accesses are set to point:
			// float2 SEARCH_TEX_PIXEL_SIZE = 1.0 / float2(66.0, 33.0);
			// e = float2(bias, 0.0) + 0.5 * SEARCH_TEX_PIXEL_SIZE +
			//     e * float2(scale, 1.0) * float2(64.0, 32.0) * SEARCH_TEX_PIXEL_SIZE;
			e.r = bias + e.r * scale;
			return 255.0 * texture2D( searchTex, e, 0.0 ).r;
		}

		float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			/**
				* @PSEUDO_GATHER4
				* This texcoord has been offset by (-0.25, -0.125) in the vertex shader to
				* sample between edge, thus fetching four edges in a row.
				* Sampling with different offsets in each direction allows to disambiguate
				* which edges are active from the four fetched ones.
				*/
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			// We correct the previous (-0.25, -0.125) offset we applied:
			texcoord.x += 0.25 * resolution.x;

			// The searches are bias by 1, so adjust the coords accordingly:
			texcoord.x += resolution.x;

			// Disambiguate the length added by the last step:
			texcoord.x += 2.0 * resolution.x; // Undo last step
			texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);

			return texcoord.x;
		}

		float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 0.0, 1.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 2.0, 0.0 ) * resolution;
				if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;
			}

			texcoord.x -= 0.25 * resolution.x;
			texcoord.x -= resolution.x;
			texcoord.x -= 2.0 * resolution.x;
			texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );

			return texcoord.x;
		}

		float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord += vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y -= 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y; // WebGL port note: Changed sign
			texcoord.y -= 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {
			vec2 e = vec2( 1.0, 0.0 );

			for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) { // WebGL port note: Changed while to for
				e = texture2D( edgesTex, texcoord, 0.0 ).rg;
				texcoord -= vec2( 0.0, 2.0 ) * resolution; // WebGL port note: Changed sign
				if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;
			}

			texcoord.y += 0.25 * resolution.y; // WebGL port note: Changed sign
			texcoord.y += resolution.y; // WebGL port note: Changed sign
			texcoord.y += 2.0 * resolution.y; // WebGL port note: Changed sign
			texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 ); // WebGL port note: Changed sign

			return texcoord.y;
		}

		vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {
			// Rounding prevents precision errors of bilinear filtering:
			vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;

			// We do a scale and bias for mapping to texel space:
			texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );

			// Move to proper place, according to the subpixel offset:
			texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;

			return texture2D( areaTex, texcoord, 0.0 ).rg;
		}

		vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {
			vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );

			vec2 e = texture2D( edgesTex, texcoord ).rg;

			if ( e.g > 0.0 ) { // Edge at north
				vec2 d;

				// Find the distance to the left:
				vec2 coords;
				coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );
				coords.y = offset[ 1 ].y; // offset[1].y = texcoord.y - 0.25 * resolution.y (@CROSSING_OFFSET)
				d.x = coords.x;

				// Now fetch the left crossing edges, two at a time using bilinear
				// filtering. Sampling at -0.25 (see @CROSSING_OFFSET) enables to
				// discern what value each edge has:
				float e1 = texture2D( edgesTex, coords, 0.0 ).r;

				// Find the distance to the right:
				coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );
				d.y = coords.x;

				// We want the distances to be in pixel units (doing this here allow to
				// better interleave arithmetic and memory accesses):
				d = d / resolution.x - pixcoord.x;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the right crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;

				// Ok, we know how this pattern looks like, now it is time for getting
				// the actual area:
				weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );
			}

			if ( e.r > 0.0 ) { // Edge at west
				vec2 d;

				// Find the distance to the top:
				vec2 coords;

				coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );
				coords.x = offset[ 0 ].x; // offset[1].x = texcoord.x - 0.25 * resolution.x;
				d.x = coords.y;

				// Fetch the top crossing edges:
				float e1 = texture2D( edgesTex, coords, 0.0 ).g;

				// Find the distance to the bottom:
				coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );
				d.y = coords.y;

				// We want the distances to be in pixel units:
				d = d / resolution.y - pixcoord.y;

				// SMAAArea below needs a sqrt, as the areas texture is compressed
				// quadratically:
				vec2 sqrt_d = sqrt( abs( d ) );

				// Fetch the bottom crossing edges:
				coords.y -= 1.0 * resolution.y; // WebGL port note: Added
				float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;

				// Get the area for this direction:
				weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );
			}

			return weights;
		}

		void main() {

			gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );

		}`},Cs={uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new B(1/1024,1/512)}},vertexShader:`

		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		void SMAANeighborhoodBlendingVS( vec2 texcoord ) {
			vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 ); // WebGL port note: Changed sign in W component
			vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 ); // WebGL port note: Changed sign in W component
		}

		void main() {

			vUv = uv;

			SMAANeighborhoodBlendingVS( vUv );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform sampler2D tColor;
		uniform vec2 resolution;

		varying vec2 vUv;
		varying vec4 vOffset[ 2 ];

		vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {
			// Fetch the blending weights for current pixel:
			vec4 a;
			a.xz = texture2D( blendTex, texcoord ).xz;
			a.y = texture2D( blendTex, offset[ 1 ].zw ).g;
			a.w = texture2D( blendTex, offset[ 1 ].xy ).a;

			// Is there any blending weight with a value greater than 0.0?
			if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {
				return texture2D( colorTex, texcoord, 0.0 );
			} else {
				// Up to 4 lines can be crossing a pixel (one through each edge). We
				// favor blending by choosing the line with the maximum weight for each
				// direction:
				vec2 offset;
				offset.x = a.a > a.b ? a.a : -a.b; // left vs. right
				offset.y = a.g > a.r ? -a.g : a.r; // top vs. bottom // WebGL port note: Changed signs

				// Then we go in the direction that has the maximum weight:
				if ( abs( offset.x ) > abs( offset.y )) { // horizontal vs. vertical
					offset.y = 0.0;
				} else {
					offset.x = 0.0;
				}

				// Fetch the opposite color and lerp by hand:
				vec4 C = texture2D( colorTex, texcoord, 0.0 );
				texcoord += sign( offset ) * resolution;
				vec4 Cop = texture2D( colorTex, texcoord, 0.0 );
				float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );

				// WebGL port note: Added gamma correction
				C.xyz = pow(C.xyz, vec3(2.2));
				Cop.xyz = pow(Cop.xyz, vec3(2.2));
				vec4 mixed = mix(C, Cop, s);
				mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));

				return mixed;
			}
		}

		void main() {

			gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );

		}`};class mn extends ft{constructor(e,t){super();this.edgesRT=new Ye(e,t,{depthBuffer:!1,generateMipmaps:!1,minFilter:me,format:fs}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new Ye(e,t,{depthBuffer:!1,generateMipmaps:!1,minFilter:me,format:_e}),this.weightsRT.texture.name="SMAAPass.weights";const i=this,r=new Image;r.src=this.getAreaTexture(),r.onload=function(){i.areaTexture.needsUpdate=!0},this.areaTexture=new qe,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=r,this.areaTexture.format=fs,this.areaTexture.minFilter=me,this.areaTexture.generateMipmaps=!1,this.areaTexture.flipY=!1;const o=new Image;o.src=this.getSearchTexture(),o.onload=function(){i.searchTexture.needsUpdate=!0},this.searchTexture=new qe,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=o,this.searchTexture.magFilter=_s,this.searchTexture.minFilter=_s,this.searchTexture.generateMipmaps=!1,this.searchTexture.flipY=!1,Ot===void 0&&console.error("THREE.SMAAPass relies on SMAAShader"),this.uniformsEdges=at.clone(Ot.uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new be({defines:Object.assign({},Ot.defines),uniforms:this.uniformsEdges,vertexShader:Ot.vertexShader,fragmentShader:Ot.fragmentShader}),this.uniformsWeights=at.clone(Zt.uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new be({defines:Object.assign({},Zt.defines),uniforms:this.uniformsWeights,vertexShader:Zt.vertexShader,fragmentShader:Zt.fragmentShader}),this.uniformsBlend=at.clone(Cs.uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new be({uniforms:this.uniformsBlend,vertexShader:Cs.vertexShader,fragmentShader:Cs.fragmentShader}),this.needsSwap=!1,this.fsQuad=new Es(null)}render(e,t,i){this.uniformsEdges.tDiffuse.value=i.texture,this.fsQuad.material=this.materialEdges,e.setRenderTarget(this.edgesRT),this.clear&&e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialWeights,e.setRenderTarget(this.weightsRT),this.clear&&e.clear(),this.fsQuad.render(e),this.uniformsBlend.tColor.value=i.texture,this.fsQuad.material=this.materialBlend,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)}getAreaTexture(){return"data:image/png;base64,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"}getSearchTexture(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}}const Ti={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new W(0)},defaultOpacity:{value:0}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform vec3 defaultColor;
		uniform float defaultOpacity;
		uniform float luminosityThreshold;
		uniform float smoothWidth;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );

			vec3 luma = vec3( 0.299, 0.587, 0.114 );

			float v = dot( texel.xyz, luma );

			vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );

			float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );

			gl_FragColor = mix( outputColor, texel, alpha );

		}`};class mt extends ft{constructor(e,t,i,r){super();this.strength=t!==void 0?t:1,this.radius=i,this.threshold=r,this.resolution=e!==void 0?new B(e.x,e.y):new B(256,256),this.clearColor=new W(0,0,0);const o={minFilter:me,magFilter:me,format:_e};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let n=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Ye(n,a,o),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let S=0;S<this.nMips;S++){const x=new Ye(n,a,o);x.texture.name="UnrealBloomPass.h"+S,x.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(x);const E=new Ye(n,a,o);E.texture.name="UnrealBloomPass.v"+S,E.texture.generateMipmaps=!1,this.renderTargetsVertical.push(E),n=Math.round(n/2),a=Math.round(a/2)}Ti===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const h=Ti;this.highPassUniforms=at.clone(h.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new be({uniforms:this.highPassUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const c=[3,5,7,9,11];n=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);for(let S=0;S<this.nMips;S++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[S])),this.separableBlurMaterials[S].uniforms.texSize.value=new B(n,a),n=Math.round(n/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;const m=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=m,this.bloomTintColors=[new O(1,1,1),new O(1,1,1),new O(1,1,1),new O(1,1,1),new O(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,Kt===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");const y=Kt;this.copyUniforms=at.clone(y.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new be({uniforms:this.copyUniforms,vertexShader:y.vertexShader,fragmentShader:y.fragmentShader,blending:xr,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new W,this.oldClearAlpha=1,this.basic=new lt,this.fsQuad=new Es(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()}setSize(e,t){let i=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(i,r);for(let o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(i,r),this.renderTargetsVertical[o].setSize(i,r),this.separableBlurMaterials[o].uniforms.texSize.value=new B(i,r),i=Math.round(i/2),r=Math.round(r/2)}render(e,t,i,r,o){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const n=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),o&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=i.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=i.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let a=this.renderTargetBright;for(let h=0;h<this.nMips;h++)this.fsQuad.material=this.separableBlurMaterials[h],this.separableBlurMaterials[h].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[h].uniforms.direction.value=mt.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[h]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[h].uniforms.colorTexture.value=this.renderTargetsHorizontal[h].texture,this.separableBlurMaterials[h].uniforms.direction.value=mt.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[h]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[h];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,o&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(i),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=n}getSeperableBlurMaterial(e){return new be({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new B(.5,.5)},direction:{value:new B(.5,.5)}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}
				void main() {
					vec2 invSize = 1.0 / texSize;
					float fSigma = float(SIGMA);
					float weightSum = gaussianPdf(0.0, fSigma);
					vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;
					for( int i = 1; i < KERNEL_RADIUS; i ++ ) {
						float x = float(i);
						float w = gaussianPdf(x, fSigma);
						vec2 uvOffset = direction * invSize * x;
						vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;
						vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;
						diffuseSum += (sample1 + sample2) * w;
						weightSum += 2.0 * w;
					}
					gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
				}`})}getCompositeMaterial(e){return new be({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;
				uniform sampler2D blurTexture1;
				uniform sampler2D blurTexture2;
				uniform sampler2D blurTexture3;
				uniform sampler2D blurTexture4;
				uniform sampler2D blurTexture5;
				uniform sampler2D dirtTexture;
				uniform float bloomStrength;
				uniform float bloomRadius;
				uniform float bloomFactors[NUM_MIPS];
				uniform vec3 bloomTintColors[NUM_MIPS];

				float lerpBloomFactor(const in float factor) {
					float mirrorFactor = 1.2 - factor;
					return mix(factor, mirrorFactor, bloomRadius);
				}

				void main() {
					gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +
						lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +
						lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +
						lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +
						lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );
				}`})}}mt.BlurDirectionX=new B(1,0);mt.BlurDirectionY=new B(0,1);var gn=Object.defineProperty,Ri=Object.getOwnPropertySymbols,yn=Object.prototype.hasOwnProperty,bn=Object.prototype.propertyIsEnumerable,As=(s,e,t)=>e in s?gn(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,vn=(s,e)=>{for(var t in e||(e={}))yn.call(e,t)&&As(s,t,e[t]);if(Ri)for(var t of Ri(e))bn.call(e,t)&&As(s,t,e[t]);return s},l=(s,e,t)=>(As(s,typeof e!="symbol"?e+"":e,t),t);class Se{constructor(){l(this,"listeners",new Map)}addEventListener(e,t){const i=this.listeners;i.has(e)||i.set(e,new Set),i.get(e).add(t)}hasEventListener(e,t){const i=this.listeners;return i.has(e)?i.get(e).has(t):!1}removeEventListener(e,t){const i=this.listeners;!i.has(e)||!i.get(e).has(t)||i.get(e).delete(t)}dispatchEvent(e){var t;const i=e.type,r=this.listeners;if(r.has(i))try{(t=r.get(i))==null||t.forEach(o=>{o.call(this,e)})}catch(o){console.error(o)}}clear(){this.listeners=new Map}useful(){return Boolean([...this.listeners.keys()].length)}}class Mn extends Se{constructor(e=0){super();l(this,"clock",new Xs),l(this,"animationFrame",-1),l(this,"fps",0),l(this,"timer",null),l(this,"playFun",()=>{}),l(this,"render",()=>{this.dispatchEvent({type:"render",delta:this.clock.getDelta(),total:this.clock.getElapsedTime()})}),l(this,"play",()=>{if(this.hasRendering()){console.warn("render manager is rendering.");return}this.dispatchEvent({type:"play"}),this.playFun()}),l(this,"stop",()=>{this.animationFrame!==-1&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=-1),this.timer&&(clearTimeout(this.timer),this.timer=null),this.dispatchEvent({type:"stop"})}),l(this,"hasRendering",()=>Boolean(this.animationFrame!==-1||this.timer)),l(this,"hasVaildRender",()=>this.useful()),this.setFPS(e)}setFPS(e){return this.animationFrame!==-1&&cancelAnimationFrame(this.animationFrame),this.timer&&clearTimeout(this.timer),this.fps=e,e<=0?(this.fps=0,this.playFun=()=>{this.render(),this.animationFrame=requestAnimationFrame(this.playFun)}):this.playFun=()=>{this.timer=setTimeout(()=>{this.playFun()},e),this.render()},this.playFun(),this}dispose(){this.hasRendering()&&this.stop(),this.clear()}}const En=function(){return this.renderManager?(console.warn("has installed render manager plugin."),!1):(this.renderManager=new Mn,this.render=function(){return this.renderManager.render(),this},this.play=function(){return this.renderManager.play(),this},this.stop=function(){return this.renderManager.stop(),this},this.addEventListener("dispose",()=>{this.renderManager.dispose()}),!0)};class wn extends Se{constructor(e,t){super();l(this,"object"),l(this,"domElement"),l(this,"enabled",!0),l(this,"target",new O),l(this,"minDistance",0),l(this,"maxDistance",1/0),l(this,"minZoom",0),l(this,"maxZoom",1/0),l(this,"minPolarAngle",0),l(this,"maxPolarAngle",Math.PI),l(this,"minAzimuthAngle",-1/0),l(this,"maxAzimuthAngle",1/0),l(this,"enableDamping",!1),l(this,"dampingFactor",.05),l(this,"enableZoom",!0),l(this,"zoomSpeed",1),l(this,"enableRotate",!0),l(this,"rotateSpeed",1),l(this,"enablePan",!0),l(this,"panSpeed",1),l(this,"screenSpacePanning",!0),l(this,"keyPanSpeed",7),l(this,"autoRotate",!1),l(this,"autoRotateSpeed",2),l(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),l(this,"mouseButtons",{LEFT:null,MIDDLE:xt.DOLLY,RIGHT:xt.ROTATE}),l(this,"touches",{ONE:pt.ROTATE,TWO:pt.DOLLY_PAN}),l(this,"target0"),l(this,"position0"),l(this,"zoom0"),l(this,"_domElementKeyEvents",null),l(this,"spherical"),l(this,"reset"),l(this,"update"),l(this,"onContextMenu"),l(this,"onPointerDown"),l(this,"onPointerCancel"),l(this,"onMouseWheel"),l(this,"onPointerMove"),l(this,"onPointerUp"),l(this,"onKeyDown"),this.object=e||new se,this.domElement=t||document.createElement("div"),this.domElement.style.touchAction="none",this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.update=(()=>{const v=new O,P=new ne().setFromUnitVectors(this.object.up,new O(0,1,0)),Q=P.clone().invert(),ee=new O,Ge=new ne,Ue=2*Math.PI;return()=>{const Ks=this.object.position;v.copy(Ks).sub(this.target),v.applyQuaternion(P),n.setFromVector3(v),this.autoRotate&&r===i.NONE&&T(M()),this.enableDamping?(n.theta+=a.theta*this.dampingFactor,n.phi+=a.phi*this.dampingFactor):(n.theta+=a.theta,n.phi+=a.phi);let De=this.minAzimuthAngle,Pe=this.maxAzimuthAngle;return isFinite(De)&&isFinite(Pe)&&(De<-Math.PI?De+=Ue:De>Math.PI&&(De-=Ue),Pe<-Math.PI?Pe+=Ue:Pe>Math.PI&&(Pe-=Ue),De<=Pe?n.theta=Math.max(De,Math.min(Pe,n.theta)):n.theta=n.theta>(De+Pe)/2?Math.max(De,n.theta):Math.min(Pe,n.theta)),n.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n.phi)),n.makeSafe(),n.radius*=h,n.radius=Math.max(this.minDistance,Math.min(this.maxDistance,n.radius)),this.enableDamping===!0?this.target.addScaledVector(c,this.dampingFactor):this.target.add(c),v.setFromSpherical(n),v.applyQuaternion(Q),Ks.copy(this.target).add(v),this.object.lookAt(this.target),this.enableDamping===!0?(a.theta*=1-this.dampingFactor,a.phi*=1-this.dampingFactor,c.multiplyScalar(1-this.dampingFactor)):(a.set(0,0,0),c.set(0,0,0)),h=1,m||ee.distanceToSquared(this.object.position)>o||8*(1-Ge.dot(this.object.quaternion))>o?(this.dispatchEvent({type:"change"}),ee.copy(this.object.position),Ge.copy(this.object.quaternion),m=!1,!0):!1}})();const i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=i.NONE;const o=1e-6,n=new li,a=new li;let h=1;const c=new O;let m=!1;const y=new B,S=new B,x=new B,E=new B,w=new B,C=new B,u=new B,b=new B,p=new B,f=[],g={},M=()=>2*Math.PI/60/60*this.autoRotateSpeed,R=()=>Math.pow(.95,this.zoomSpeed),T=v=>{a.theta-=v},D=v=>{a.phi-=v},j=function(){const v=new O;return function(Q,ee){v.setFromMatrixColumn(ee,0),v.multiplyScalar(-Q),c.add(v)}}(),k=(()=>{const v=new O;return(P,Q)=>{this.screenSpacePanning===!0?v.setFromMatrixColumn(Q,1):(v.setFromMatrixColumn(Q,0),v.crossVectors(this.object.up,v)),v.multiplyScalar(P),c.add(v)}})(),X=(()=>{const v=new O;return(P,Q)=>{const ee=this.domElement;if(this.object instanceof se){const Ge=this.object.position;v.copy(Ge).sub(this.target);let Ue=v.length();Ue*=Math.tan(this.object.fov/2*Math.PI/180),j(2*P*Ue/ee.clientHeight,this.object.matrix),k(2*Q*Ue/ee.clientHeight,this.object.matrix)}else this.object instanceof he?(j(P*(this.object.right-this.object.left)/this.object.zoom/ee.clientWidth,this.object.matrix),k(Q*(this.object.top-this.object.bottom)/this.object.zoom/ee.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}})(),Oe=v=>{this.object instanceof se?h/=v:this.object instanceof he?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*v)),this.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},V=v=>{this.object instanceof se?h*=v:this.object instanceof he?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/v)),this.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)};function Y(v){y.set(v.clientX,v.clientY)}function q(v){u.set(v.clientX,v.clientY)}function _(v){E.set(v.clientX,v.clientY)}const fe=v=>{S.set(v.clientX,v.clientY),x.subVectors(S,y).multiplyScalar(this.rotateSpeed);const P=this.domElement;T(2*Math.PI*x.x/P.clientHeight),D(2*Math.PI*x.y/P.clientHeight),y.copy(S),this.update()},Z=v=>{b.set(v.clientX,v.clientY),p.subVectors(b,u),p.y>0?Oe(R()):p.y<0&&V(R()),u.copy(b),this.update()},rt=v=>{w.set(v.clientX,v.clientY),C.subVectors(w,E).multiplyScalar(this.panSpeed),X(C.x,C.y),E.copy(w),this.update()},nt=v=>{v.deltaY<0?V(R()):v.deltaY>0&&Oe(R()),this.update()},ot=v=>{let P=!1;switch(v.code){case this.keys.UP:X(0,this.keyPanSpeed),P=!0;break;case this.keys.BOTTOM:X(0,-this.keyPanSpeed),P=!0;break;case this.keys.LEFT:X(this.keyPanSpeed,0),P=!0;break;case this.keys.RIGHT:X(-this.keyPanSpeed,0),P=!0;break}P&&(v.preventDefault(),this.update())};function Ut(){if(f.length===1)y.set(f[0].pageX,f[0].pageY);else{const v=.5*(f[0].pageX+f[1].pageX),P=.5*(f[0].pageY+f[1].pageY);y.set(v,P)}}function vt(){if(f.length===1)E.set(f[0].pageX,f[0].pageY);else{const v=.5*(f[0].pageX+f[1].pageX),P=.5*(f[0].pageY+f[1].pageY);E.set(v,P)}}function zs(){const v=f[0].pageX-f[1].pageX,P=f[0].pageY-f[1].pageY,Q=Math.sqrt(v*v+P*P);u.set(0,Q)}const $i=()=>{this.enableZoom&&zs(),this.enablePan&&vt()},er=()=>{this.enableZoom&&zs(),this.enableRotate&&Ut()},ks=v=>{if(f.length==1)S.set(v.pageX,v.pageY);else{const Q=ds(v),ee=.5*(v.pageX+Q.x),Ge=.5*(v.pageY+Q.y);S.set(ee,Ge)}x.subVectors(S,y).multiplyScalar(this.rotateSpeed);const P=this.domElement;T(2*Math.PI*x.x/P.clientHeight),D(2*Math.PI*x.y/P.clientHeight),y.copy(S)},Gs=v=>{if(f.length===1)w.set(v.pageX,v.pageY);else{const P=ds(v),Q=.5*(v.pageX+P.x),ee=.5*(v.pageY+P.y);w.set(Q,ee)}C.subVectors(w,E).multiplyScalar(this.panSpeed),X(C.x,C.y),E.copy(w)},Us=v=>{const P=ds(v),Q=v.pageX-P.x,ee=v.pageY-P.y,Ge=Math.sqrt(Q*Q+ee*ee);b.set(0,Ge),p.set(0,Math.pow(b.y/u.y,this.zoomSpeed)),Oe(p.y),u.copy(b)},tr=v=>{this.enableZoom&&Us(v),this.enablePan&&Gs(v)},sr=v=>{this.enableZoom&&Us(v),this.enableRotate&&ks(v)};this.onPointerDown=v=>{this.enabled!==!1&&(f.length===0&&(this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp)),cr(v),v.pointerType==="touch"?or(v):ir(v))};let us=!1;this.onPointerMove=v=>{this.enabled!==!1&&(us||(this.domElement.setPointerCapture(v.pointerId),us=!0),v.pointerType==="touch"?ar(v):rr(v))},this.onPointerUp=v=>{this.enabled!==!1&&(us=!1,v.pointerType==="touch"?lr():nr(v),Fs(v),f.length===0&&(this.domElement.releasePointerCapture(v.pointerId),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)))},this.onPointerCancel=v=>{Fs(v)};const ir=v=>{let P;switch(v.button){case 0:P=this.mouseButtons.LEFT;break;case 1:P=this.mouseButtons.MIDDLE;break;case 2:P=this.mouseButtons.RIGHT;break;default:P=-1}switch(P){case xt.DOLLY:if(this.enableZoom===!1)return;q(v),r=i.DOLLY;break;case xt.ROTATE:if(v.ctrlKey||v.metaKey||v.shiftKey){if(this.enablePan===!1)return;_(v),r=i.PAN}else{if(this.enableRotate===!1)return;Y(v),r=i.ROTATE}break;case xt.PAN:if(v.ctrlKey||v.metaKey||v.shiftKey){if(this.enableRotate===!1)return;Y(v),r=i.ROTATE}else{if(this.enablePan===!1)return;_(v),r=i.PAN}break;default:r=i.NONE}r!==i.NONE&&this.dispatchEvent({type:"start"})},rr=v=>{if(this.enabled!==!1)switch(r){case i.ROTATE:if(this.enableRotate===!1)return;fe(v);break;case i.DOLLY:if(this.enableZoom===!1)return;Z(v);break;case i.PAN:if(this.enablePan===!1)return;rt(v);break}},nr=v=>{this.dispatchEvent({type:"end"}),r=i.NONE};this.onMouseWheel=v=>{this.enabled===!1||this.enableZoom===!1||r!==i.NONE||(v.preventDefault(),this.dispatchEvent({type:"start"}),nt(v),this.dispatchEvent({type:"end"}))},this.onKeyDown=v=>{this.enabled===!1||this.enablePan===!1||ot(v)};const or=v=>{switch(Ws(v),f.length){case 1:switch(this.touches.ONE){case pt.ROTATE:if(this.enableRotate===!1)return;Ut(),r=i.TOUCH_ROTATE;break;case pt.PAN:if(this.enablePan===!1)return;vt(),r=i.TOUCH_PAN;break;default:r=i.NONE}break;case 2:switch(this.touches.TWO){case pt.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;$i(),r=i.TOUCH_DOLLY_PAN;break;case pt.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;er(),r=i.TOUCH_DOLLY_ROTATE;break;default:r=i.NONE}break;default:r=i.NONE}r!==i.NONE&&this.dispatchEvent({type:"start"})},ar=v=>{switch(Ws(v),r){case i.TOUCH_ROTATE:if(this.enableRotate===!1)return;ks(v),this.update();break;case i.TOUCH_PAN:if(this.enablePan===!1)return;Gs(v),this.update();break;case i.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;tr(v),this.update();break;case i.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;sr(v),this.update();break;default:r=i.NONE}},lr=v=>{this.dispatchEvent({type:"end"}),r=i.NONE};this.onContextMenu=v=>{this.enabled!==!1&&v.preventDefault()};function cr(v){f.push(v)}const Fs=v=>{delete g[v.pointerId];for(let P=0;P<f.length;P++)if(f[P].pointerId==v.pointerId){f.splice(P,1);return}};function Ws(v){let P=g[v.pointerId];P===void 0&&(P=new B,g[v.pointerId]=P),P.set(v.pageX,v.pageY)}function ds(v){const P=v.pointerId===f[0].pointerId?f[1]:f[0];return g[P.pointerId]}this.spherical=n,this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onMouseWheel,{passive:!1}),this.reset=()=>{this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent({type:"change"}),this.update(),r=i.NONE},this.update()}getPolarAngle(){return this.spherical.phi}getAzimuthalAngle(){return this.spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this.onKeyDown),this._domElementKeyEvents=e}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}setCamera(e){this.object=e}setDom(e){this.dispose(),this.domElement=e,this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onMouseWheel,{passive:!1})}dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointercancel",this.onPointerCancel),this.domElement.removeEventListener("wheel",this.onMouseWheel),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp),this._domElementKeyEvents!==null&&this._domElementKeyEvents.removeEventListener("keydown",this.onKeyDown)}}var G;(function(s){s.DEFAULT="default",s.TOP="top",s.BOTTOM="bottom",s.LEFT="left",s.RIGHT="right",s.FRONT="front",s.BACK="back"})(G||(G={}));const Sn=function(s={}){var e;if(!this.webGLRenderer)return console.error("must install some renderer before BasicViewpoint plugin."),!1;!s.viewpoint&&(s.viewpoint=G.DEFAULT),!s.perspective&&(s.perspective={}),!s.perspective.position&&(s.perspective.position={x:60,y:60,z:60}),!s.perspective.lookAt&&(s.perspective.lookAt={x:0,y:0,z:0}),!s.perspective.up&&(s.perspective.up={x:0,y:1,z:0}),!s.orthograpbic&&(s.orthograpbic={}),!s.orthograpbic.up&&(s.orthograpbic.up={x:0,y:1,z:0});const t=new se;t.position.set(s.perspective.position.x,s.perspective.position.y,s.perspective.position.z),t.lookAt(s.perspective.lookAt.x,s.perspective.lookAt.y,s.perspective.lookAt.z),t.up.set(s.perspective.up.x,s.perspective.up.y,s.perspective.up.z);const i=new he(-window.innerWidth/8,window.innerWidth/8,-window.innerHeight/8,window.innerHeight/8);i.up.set(s.perspective.up.x,s.perspective.up.y,s.perspective.up.z),this.setViewpoint=function(o){return this.dispatchEvent({type:"setViewpoint",viewpoint:o}),this},this.addEventListener("setSize",o=>{const n=o.width,a=o.height;t.aspect=n/a,t.updateProjectionMatrix(),i.left=-n/16,i.right=n/16,i.top=a/16,i.bottom=-a/16,i.updateProjectionMatrix()});const r=s.orthograpbic.distance||60;return(e=s.orthograpbic.allowRotate)!=null,this.addEventListener("setViewpoint",o=>{const n=o.viewpoint;if(n===G.DEFAULT){this.setCamera(t);return}n===G.TOP?i.position.set(0,r,0):n===G.BOTTOM?i.position.set(0,-r,0):n===G.RIGHT?i.position.set(r,0,0):n===G.LEFT?i.position.set(-r,0,0):n===G.FRONT?i.position.set(0,0,r):n===G.BACK&&i.position.set(0,0,-r),this.setCamera(i)}),this.completeSet.add(()=>{s.viewpoint===G.DEFAULT?this.setCamera(t):this.setCamera(i),this.objectHelperManager&&this.objectHelperManager.addFilteredObject(t,i)}),!0},xn=function(s){return this.orbitControls?(console.warn("this has installed orbitControls plugin."),!1):this.renderManager?(this.orbitControls=new wn(this.camera,this.dom),this.addEventListener("setCamera",e=>{this.orbitControls.setCamera(e.camera)}),this.addEventListener("setDom",e=>{this.orbitControls.setDom(e.dom)}),this.renderManager.addEventListener("render",()=>{this.orbitControls.update()}),this.completeSet.add(()=>{this.setViewpoint&&this.addEventListener("setViewpoint",e=>{const t=e.viewpoint;this.orbitControls.target.set(0,0,0),t===G.DEFAULT?this.orbitControls.enableRotate=!0:t===G.TOP?this.orbitControls.enableRotate=!1:t===G.BOTTOM?this.orbitControls.enableRotate=!1:t===G.RIGHT?this.orbitControls.enableRotate=!1:t===G.LEFT?this.orbitControls.enableRotate=!1:t===G.FRONT?this.orbitControls.enableRotate=!1:t===G.BACK&&(this.orbitControls.enableRotate=!1)})}),!0):(console.warn("this must install renderManager before install orbitControls plugin."),!1)};class Cn{constructor(e){l(this,"REVISION"),l(this,"dom"),l(this,"addPanel"),l(this,"showPanel"),l(this,"begin"),l(this,"end"),l(this,"update"),l(this,"domElement"),l(this,"setMode");const t=sn();this.REVISION=t.REVISION,this.dom=t.dom,this.domElement=t.domElement,this.begin=t.begin.bind(t),this.end=t.end.bind(t),this.update=t.update.bind(t),this.addPanel=t.addPanel.bind(t),this.showPanel=t.showPanel.bind(t),this.setMode=t.setMode.bind(t);const i=this.domElement;i.style.position="absolute",i.style.top="0",i.style.left="35px",e&&(i.style.top=`${e.top}px`,i.style.left=`${e.left}px`,i.style.right=`${e.right}px`,i.style.bottom=`${e.bottom}px`)}}const An=function(s){if(this.stats)return console.warn("this has installed stats plugin."),!1;if(!this.renderManager)return console.warn("this must install renderManager before install stats plugin."),!1;const e=new Cn(s);this.stats=e;const t=()=>{this.stats.update()};return this.setStats=function(i){if(i)this.dom.appendChild(this.stats.domElement),this.renderManager.addEventListener("render",t);else try{this.dom.removeChild(this.stats.domElement),this.renderManager.removeEventListener("render",t)}catch{}return this},!0},Tn=function(s={}){if(this.effectComposer)return console.warn("this has installed effect composer plugin."),!1;if(!this.webGLRenderer)return console.error("must install some renderer before this plugin."),!1;let e;if(s.WebGLMultisampleRenderTarget||s.MSAA){const i=this.webGLRenderer,r=i.getPixelRatio(),o=i.getDrawingBufferSize(new B);Number(window.__THREE__)>137?e=new ws(i,new Ye(o.width*r,o.height*r,{format:s.format||_e,samples:s.samples||4})):e=new ws(i,new Or(o.width*r,o.height*r,{format:s.format||_e}))}else e=new ws(this.webGLRenderer);this.effectComposer=e;let t;return this.scene&&this.camera&&(t=new Ss(this.scene,this.camera),e.addPass(t)),this.addEventListener("setCamera",i=>{if(!t&&this.scene){t=new Ss(this.scene,i.camera),e.addPass(t);return}else t&&(t.camera=i.camera)}),this.addEventListener("setScene",i=>{if(!t&&this.camera){t=new Ss(i.scene,this.camera),e.addPass(t);return}else t&&(t.scene=i.scene)}),this.addEventListener("setSize",i=>{e.setSize(i.width,i.height)}),this.renderManager?(this.renderManager.removeEventListener("render",this.render),this.renderManager.addEventListener("render",i=>{this.effectComposer.render(i.delta)})):this.render=function(){return this.effectComposer.render(),this},!0};class Rn extends Se{constructor(e){super();l(this,"dom"),l(this,"mouse"),l(this,"canMouseMove"),l(this,"mouseEventTimer"),l(this,"throttleTime"),l(this,"pointerDownFun"),l(this,"pointerMoveFun"),l(this,"pointerUpFun"),this.dom=e.dom,this.mouse=new B,this.canMouseMove=!0,this.mouseEventTimer=null,this.throttleTime=e.throttleTime||1e3/60,this.pointerDownFun=t=>{const i={mouse:this.mouse};for(const r in t)i[r]=t[r];this.dispatchEvent(i)},this.pointerMoveFun=t=>{!this.canMouseMove||(this.canMouseMove=!1,this.mouseEventTimer=window.setTimeout(()=>{const i=this.mouse,r=this.dom,o=r.getBoundingClientRect();i.x=(t.clientX-o.left)/r.offsetWidth*2-1,i.y=-((t.clientY-o.top)/r.offsetHeight)*2+1,this.canMouseMove=!0;const n={mouse:this.mouse};for(const a in t)n[a]=t[a];this.dispatchEvent(n)},this.throttleTime))},this.pointerUpFun=t=>{const i={mouse:this.mouse};for(const r in t)i[r]=t[r];this.dispatchEvent(i)}}setDom(e){return this.dom&&(this.dom.removeEventListener("pointerdown",this.pointerDownFun),this.dom.removeEventListener("pointermove",this.pointerMoveFun),this.dom.removeEventListener("pointerup",this.pointerUpFun)),e.addEventListener("pointerdown",this.pointerDownFun),e.addEventListener("pointermove",this.pointerMoveFun),e.addEventListener("pointerup",this.pointerUpFun),this.dom=e,this}getNormalMouse(){return this.mouse}}const Ln=function(s){if(this.pointerManager)return console.warn("this has installed pointerManager plugin."),!1;const e=new Rn(Object.assign(s||{},{dom:this.dom}));return this.addEventListener("setDom",t=>{e.setDom(t.dom)}),this.pointerManager=e,!0};var Dt;(function(s){s.POINTERDOWN="pointerdown",s.POINTERUP="pointerup",s.POINTERMOVE="pointermove",s.POINTERENTER="pointerenter",s.POINTERLEAVE="pointerleave",s.CLICK="click",s.DBLCLICK="dblclick",s.CONTEXTMENU="contextmenu"})(Dt||(Dt={}));class On extends Se{constructor(e){super();l(this,"raycaster"),l(this,"scene"),l(this,"camera"),l(this,"filter",new Set),l(this,"recursive",!1),l(this,"penetrate",!1),l(this,"propagation",!1),this.raycaster=new Vs,this.camera=e.camera,this.scene=e.scene,e.recursive&&(this.recursive=e.recursive),e.penetrate&&(this.penetrate=e.penetrate)}setScene(e){return this.scene=e,this}setCamera(e){return this.camera=e,this}addFilterObject(e){return this.filter.add(e),this}removeFilterObject(e){return this.filter.delete(e),this}intersectObject(e){this.raycaster.setFromCamera(e,this.camera);const t=this.filter,i=this.scene.children.filter(r=>!t.has(r));return this.raycaster.intersectObjects(i,this.recursive)}use(e){const t=function(a,h){return Object.assign({},a,h)};e.addEventListener("pointerdown",a=>{const h=this.intersectObject(a.mouse);if(h.length)if(this.penetrate){if(a.button===0)for(const c of h)c.object.dispatchEvent(t(a,{type:"pointerdown",intersection:c})),c.object.dispatchEvent(t(a,{type:"mousedown",intersection:c}))}else{const c=h[0];a.button===0&&(c.object.dispatchEvent(t(a,{type:"pointerdown",intersection:c})),c.object.dispatchEvent(t(a,{type:"mousedown",intersection:c})))}a.button===0&&(this.dispatchEvent(t(a,{type:"pointerdown",intersections:h})),this.dispatchEvent(t(a,{type:"mousedown",intersections:h})),this.scene.dispatchEvent(t(a,{type:"pointerdown",intersections:h})),this.scene.dispatchEvent(t(a,{type:"mousedown",intersections:h})))});const i=new Map;let r=null;e.addEventListener("pointermove",a=>{const h=this.intersectObject(a.mouse);if(this.penetrate){if(!h.length){i.forEach(c=>{c.object.dispatchEvent(t(a,{type:"pointerleave",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseleave",intersection:c}))}),i.clear();return}for(const c of h)i.has(c.object)?(c.object.dispatchEvent(t(a,{type:"pointermove",intersection:c})),c.object.dispatchEvent(t(a,{type:"mousemove",intersection:c})),i.delete(c.object)):(c.object.dispatchEvent(t(a,{type:"pointerenter",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseenter",intersection:c})));for(const c of i.values())c.object.dispatchEvent(t(a,{type:"pointerleave",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseleave",intersection:c}));i.clear();for(const c of h)i.set(c.object,c)}else{if(!h.length){r&&(r.object.dispatchEvent(t(a,{type:"pointerleave",intersection:r})),r.object.dispatchEvent(t(a,{type:"mouseleave",intersection:r})),r=null);return}const c=h[0];if(!r){c.object.dispatchEvent(t(a,{type:"pointerenter",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseenter",intersection:c})),r=c;return}if(c.object!==r.object){r.object.dispatchEvent(t(a,{type:"pointerleave",intersection:c})),r.object.dispatchEvent(t(a,{type:"mouseleave",intersection:c})),c.object.dispatchEvent(t(a,{type:"pointerenter",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseenter",intersection:c})),r=c;return}c.object===r.object&&(c.object.dispatchEvent(t(a,{type:"pointermove",intersection:c})),c.object.dispatchEvent(t(a,{type:"mousemove",intersection:c})))}this.dispatchEvent(t(a,{type:"pointermove",intersections:h})),this.dispatchEvent(t(a,{type:"mousemove",intersections:h})),this.scene.dispatchEvent(t(a,{type:"pointermove",intersections:h})),this.scene.dispatchEvent(t(a,{type:"mousemove",intersections:h}))});const o=new Map;let n=null;return e.addEventListener("pointerup",a=>{const h=this.intersectObject(a.mouse);if(h.length)if(this.penetrate)for(const c of h)a.button===0?(c.object.dispatchEvent(t(a,{type:"pointerup",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseup",intersection:c})),c.object.dispatchEvent(t(a,{type:"click",intersection:c})),o.has(c.object)&&c.object.dispatchEvent(t(a,{type:"dblclick",intersection:c}))):a.button===2&&c.object.dispatchEvent(t(a,{type:"contextmenu",intersection:c}));else{const c=h[0];a.button===0?(c.object.dispatchEvent(t(a,{type:"pointerup",intersection:c})),c.object.dispatchEvent(t(a,{type:"mouseup",intersection:c})),c.object.dispatchEvent(t(a,{type:"click",intersection:c})),o.has(c.object)&&c.object.dispatchEvent(t(a,{type:"dblclick",intersection:c}))):a.button===2&&c.object.dispatchEvent(t(a,{type:"contextmenu",intersection:c}))}if(a.button===0)if(this.dispatchEvent(t(a,{type:"pointerup",intersections:h})),this.dispatchEvent(t(a,{type:"mouseup",intersections:h})),this.dispatchEvent(t(a,{type:"click",intersections:h})),this.scene.dispatchEvent(t(a,{type:"pointerup",intersections:h})),this.scene.dispatchEvent(t(a,{type:"mouseup",intersections:h})),this.scene.dispatchEvent(t(a,{type:"click",intersections:h})),n)clearTimeout(n),n=null,this.dispatchEvent(t(a,{type:"dblclick",intersections:h})),this.scene.dispatchEvent(t(a,{type:"dblclick",intersections:h}));else{if(h.length)for(const c of h)o.set(c.object,!0);n=window.setTimeout(()=>{n=null,o.clear()},300)}else a.button===2&&(this.dispatchEvent(t(a,{type:"contextmenu",intersections:h})),this.scene.dispatchEvent(t(a,{type:"contextmenu",intersections:h})))}),this}}const Dn=function(s){if(this.eventManager)return console.warn("engine has installed eventManager plugin."),!1;if(!this.pointerManager)return console.error("must install pointerManager before this plugin."),!1;const e=new On(Object.assign({scene:this.scene,camera:this.camera},s));return e.use(this.pointerManager),this.eventManager=e,this.addEventListener("setCamera",t=>{this.eventManager.setCamera(t.camera)}),this.addEventListener("setScene",t=>{this.eventManager.setScene(t.scene)}),!0};var qt;(function(s){s.OBJECTCHANGED="objectChanged"})(qt||(qt={}));class Pn extends bi{constructor(e,t){!e&&(e=new se),!t&&(t=document.body);super(e,t);l(this,"target"),l(this,"transObjectSet"),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this._onPointerDown=h=>{var c;!this.enabled||!((c=this.object)==null?void 0:c.parent)||(this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(h)),this.pointerDown(this._getPointer(h)))},this.domElement.addEventListener("pointerdown",this._onPointerDown),this.target=new Qe,this.transObjectSet=new Set;let i="";const r=this.target,o=this.transObjectSet,n={x:0,y:0,z:0},a=new WeakMap;this.addEventListener("mouseDown",h=>{i=h.target.mode,i==="translate"&&(i="position"),i==="rotate"&&(i="rotation"),n.x=r[i].x,n.y=r[i].y,n.z=r[i].z,o.forEach(c=>{a.set(c,c.matrixAutoUpdate),c.matrixAutoUpdate=!1})}),this.addEventListener("objectChange",h=>{const c=r[i].x-n.x,m=r[i].y-n.y,y=r[i].z-n.z;n.x=r[i].x,n.y=r[i].y,n.z=r[i].z,o.forEach(S=>{S[i].x+=c,S[i].y+=m,S[i].z+=y,S.updateMatrix(),S.updateMatrixWorld()}),this.dispatchEvent({type:qt.OBJECTCHANGED,transObjectSet:o,mode:i,target:r})}),this.addEventListener("mouseUp",h=>{o.forEach(c=>{c.matrixAutoUpdate=a.get(c),a.delete(c)})})}setDom(e){return this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),e.addEventListener("pointerdown",this._onPointerDown),e.addEventListener("pointermove",this._onPointerHover),e.addEventListener("pointerup",this._onPointerUp),this.domElement=e,this}setCamera(e){return this.camera=e,this}getTarget(){return this.target}getTransObjectSet(){return this.transObjectSet}setAttach(...e){if(this.transObjectSet.clear(),!e.length||!e[0])return this.detach(),this;this.attach(this.target);const t=this.target;if(e.length===1){const n=e[0];return t.position.copy(n.position),t.quaternion.copy(n.quaternion),t.scale.copy(n.scale),t.updateMatrix(),t.updateMatrixWorld(),this.transObjectSet.add(n),this}const i=[],r=[],o=[];return e.forEach(n=>{i.push(n.matrixWorld.elements[12]),r.push(n.matrixWorld.elements[13]),o.push(n.matrixWorld.elements[14])}),t.rotation.set(0,0,0),t.scale.set(0,0,0),t.position.x=(Math.max(...i)-Math.min(...i))/2+Math.min(...i),t.position.y=(Math.max(...r)-Math.min(...r))/2+Math.min(...r),t.position.z=(Math.max(...o)-Math.min(...o))/2+Math.min(...o),t.updateMatrix(),t.updateMatrixWorld(),e.forEach(n=>{this.transObjectSet.add(n)}),this}}const jn=function(s){if(this.transformControls)return console.warn("this has installed transformControls plugin."),!1;if(!this.pointerManager)return console.warn("this must install pointerManager before install transformControls plugin."),!1;if(!this.eventManager)return console.warn("this must install eventManager before install transformControls plugin."),!1;const e=new Pn(this.camera,this.dom);return e.detach(),this.transformControls=e,this.scene.add(this.transformControls),this.scene.add(this.transformControls.target),this.setTransformControls=function(t){return t?this.scene.add(this.transformControls):this.scene.remove(this.transformControls),this},this.addEventListener("setCamera",t=>{e.setCamera(t.camera)}),this.addEventListener("setDom",t=>{e.setDom(t.dom)}),this.addEventListener("setScene",t=>{const i=t.scene;i.add(this.transformControls.target),i.add(this.transformControls)}),this.selectionBox?this.addEventListener("selected",t=>{e.setAttach(...t.objects)}):this.eventManager.addEventListener("pointerup",t=>{if(!this.transformControls.dragging&&t.button===0){const r=t.intersections.map(o=>o.object)[0]||null;r?e.setAttach(r):e.detach()}}),this.eventManager.addFilterObject(e),this.completeSet.add(()=>{if(this.IS_ENGINESUPPORT){const t=o=>{const n=this.compilerManager.getObjectSymbol(o);return n?this.dataSupportManager.getConfigBySymbol(n):null};let i=null,r;e.addEventListener(qt.OBJECTCHANGED,o=>{const n=o;n.transObjectSet.forEach(a=>{i=t(a),r=n.mode,i&&(i[r].x=a[r].x,i[r].y=a[r].y,i[r].z=a[r].z)})})}}),!0},In=function(s={}){return this.webGLRenderer?(console.warn("this has installed webglRenderer plugin."),!1):(this.webGLRenderer=new bs(s),this.getScreenshot=function(e={}){const t={width:this.dom.offsetWidth,height:this.dom.offsetHeight};!e.width&&(e.width=this.dom.offsetWidth),!e.height&&(e.height=this.dom.offsetHeight),!e.mine&&(e.mine="image/png");let i=!1;this.renderManager.hasRendering()&&(this.renderManager.stop(),i=!0),this.setSize(e.width,e.height),this.renderManager.render();const r=this.webGLRenderer.domElement.toDataURL(e.mine);return this.setSize(t.width,t.height),i&&this.renderManager.play(),r},this.addEventListener("setDom",e=>{e.dom.appendChild(this.webGLRenderer.domElement)}),this.addEventListener("setSize",e=>{this.webGLRenderer.setSize(e.width,e.height,!0)}),this.addEventListener("dispose",()=>{this.webGLRenderer.dispose()}),this.renderManager?(this.renderManager.removeEventListener("render",this.render),this.renderManager.addEventListener("render",e=>{this.webGLRenderer.render(this.scene,this.camera)})):this.render=function(){return this.webGLRenderer.render(this.scene,this.camera),this},!0)},Nn=/^[og]\s*(.+)?/,Bn=/^mtllib /,Hn=/^usemtl /,zn=/^usemap /,Li=new O,Ts=new O,Oi=new O,Di=new O,de=new O;function kn(){const s={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,o){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:n!==void 0?n.smooth:this.smooth,groupStart:n!==void 0?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(h){const c={index:typeof h=="number"?h:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),r&&this.materials.length>1)for(let n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,o=this.object.geometry.normals;Li.fromArray(r,e),Ts.fromArray(r,t),Oi.fromArray(r,i),de.subVectors(Oi,Ts),Di.subVectors(Li,Ts),de.cross(Di),de.normalize(),o.push(de.x,de.y,de.z),o.push(de.x,de.y,de.z),o.push(de.x,de.y,de.z)},addColor:function(e,t,i){const r=this.colors,o=this.object.geometry.colors;r[e]!==void 0&&o.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&o.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&o.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,o,n,a,h,c){const m=this.vertices.length;let y=this.parseVertexIndex(e,m),S=this.parseVertexIndex(t,m),x=this.parseVertexIndex(i,m);if(this.addVertex(y,S,x),this.addColor(y,S,x),a!==void 0&&a!==""){const E=this.normals.length;y=this.parseNormalIndex(a,E),S=this.parseNormalIndex(h,E),x=this.parseNormalIndex(c,E),this.addNormal(y,S,x)}else this.addFaceNormal(y,S,x);if(r!==void 0&&r!==""){const E=this.uvs.length;y=this.parseUVIndex(r,E),S=this.parseUVIndex(o,E),x=this.parseUVIndex(n,E),this.addUV(y,S,x),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const o=this.parseVertexIndex(e[i],t);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let o=0,n=e.length;o<n;o++)this.addVertexLine(this.parseVertexIndex(e[o],i));for(let o=0,n=t.length;o<n;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return s.startObject("",!1),s}class Gn extends ms{constructor(e){super(e);this.materials=null}load(e,t,i,r){const o=this,n=new Qs(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,function(a){try{t(o.parse(a))}catch(h){r?r(h):console.error(h),o.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new kn;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r="",o="",n=0,a=[];const h=typeof"".trimLeft=="function";for(let y=0,S=i.length;y<S;y++)if(r=i[y],r=h?r.trimLeft():r.trim(),n=r.length,n!==0&&(o=r.charAt(0),o!=="#"))if(o==="v"){const x=r.split(/\s+/);switch(x[0]){case"v":t.vertices.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3])),x.length>=7?t.colors.push(parseFloat(x[4]),parseFloat(x[5]),parseFloat(x[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(x[1]),parseFloat(x[2]),parseFloat(x[3]));break;case"vt":t.uvs.push(parseFloat(x[1]),parseFloat(x[2]));break}}else if(o==="f"){const E=r.substr(1).trim().split(/\s+/),w=[];for(let u=0,b=E.length;u<b;u++){const p=E[u];if(p.length>0){const f=p.split("/");w.push(f)}}const C=w[0];for(let u=1,b=w.length-1;u<b;u++){const p=w[u],f=w[u+1];t.addFace(C[0],p[0],f[0],C[1],p[1],f[1],C[2],p[2],f[2])}}else if(o==="l"){const x=r.substring(1).trim().split(" ");let E=[];const w=[];if(r.indexOf("/")===-1)E=x;else for(let C=0,u=x.length;C<u;C++){const b=x[C].split("/");b[0]!==""&&E.push(b[0]),b[1]!==""&&w.push(b[1])}t.addLineGeometry(E,w)}else if(o==="p"){const E=r.substr(1).trim().split(" ");t.addPointGeometry(E)}else if((a=Nn.exec(r))!==null){const x=(" "+a[0].substr(1).trim()).substr(1);t.startObject(x)}else if(Hn.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(Bn.test(r))t.materialLibraries.push(r.substring(7).trim());else if(zn.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(o==="s"){if(a=r.split(" "),a.length>1){const E=a[1].trim().toLowerCase();t.object.smooth=E!=="0"&&E!=="off"}else t.object.smooth=!0;const x=t.object.currentMaterial();x&&(x.smooth=t.object.smooth)}else{if(r==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}t.finalize();const c=new Zs;if(c.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let y=0,S=t.objects.length;y<S;y++){const x=t.objects[y],E=x.geometry,w=x.materials,C=E.type==="Line",u=E.type==="Points";let b=!1;if(E.vertices.length===0)continue;const p=new re;p.setAttribute("position",new J(E.vertices,3)),E.normals.length>0&&p.setAttribute("normal",new J(E.normals,3)),E.colors.length>0&&(b=!0,p.setAttribute("color",new J(E.colors,3))),E.hasUVIndices===!0&&p.setAttribute("uv",new J(E.uvs,2));const f=[];for(let M=0,R=w.length;M<R;M++){const T=w[M],D=T.name+"_"+T.smooth+"_"+b;let j=t.materials[D];if(this.materials!==null){if(j=this.materials.create(T.name),C&&j&&!(j instanceof je)){const k=new je;Ft.prototype.copy.call(k,j),k.color.copy(j.color),j=k}else if(u&&j&&!(j instanceof ve)){const k=new ve({size:10,sizeAttenuation:!1});Ft.prototype.copy.call(k,j),k.color.copy(j.color),k.map=j.map,j=k}}j===void 0&&(C?j=new je:u?j=new ve({size:1,sizeAttenuation:!1}):j=new gs,j.name=T.name,j.flatShading=!T.smooth,j.vertexColors=b,t.materials[D]=j),f.push(j)}let g;if(f.length>1){for(let M=0,R=w.length;M<R;M++){const T=w[M];p.addGroup(T.groupStart,T.groupCount,M)}C?g=new ge(p,f):u?g=new Ie(p,f):g=new L(p,f)}else C?g=new ge(p,f[0]):u?g=new Ie(p,f[0]):g=new L(p,f[0]);g.name=x.name,c.add(g)}else if(t.vertices.length>0){const y=new ve({size:1,sizeAttenuation:!1}),S=new re;S.setAttribute("position",new J(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(S.setAttribute("color",new J(t.colors,3)),y.vertexColors=!0);const x=new Ie(S,y);c.add(x)}return c}}class Un extends ms{constructor(e){super(e)}load(e,t,i,r){const o=this,n=this.path===""?Cr.extractUrlBase(e):this.path,a=new Qs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(h){try{t(o.parse(h,n))}catch(c){r?r(c):console.error(c),o.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const o=/\s+/,n={};for(let h=0;h<i.length;h++){let c=i[h];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const m=c.indexOf(" ");let y=m>=0?c.substring(0,m):c;y=y.toLowerCase();let S=m>=0?c.substring(m+1):"";if(S=S.trim(),y==="newmtl")r={name:S},n[S]=r;else if(y==="ka"||y==="kd"||y==="ks"||y==="ke"){const x=S.split(o,3);r[y]=[parseFloat(x[0]),parseFloat(x[1]),parseFloat(x[2])]}else r[y]=S}const a=new Fn(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(n),a}}class Fn{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:qs,this.wrap=this.options.wrap!==void 0?this.options.wrap:Ar}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],o={};t[i]=o;for(const n in r){let a=!0,h=r[n];const c=n.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(h=[h[0]/255,h[1]/255,h[2]/255]),this.options&&this.options.ignoreZeroRGBs&&h[0]===0&&h[1]===0&&h[2]===0&&(a=!1);break}a&&(o[c]=h)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function o(a,h){return typeof h!="string"||h===""?"":/^https?:\/\//i.test(h)?h:a+h}function n(a,h){if(r[a])return;const c=t.getTextureParams(h,r),m=t.loadTexture(o(t.baseUrl,c.url));m.repeat.copy(c.scale),m.offset.copy(c.offset),m.wrapS=t.wrap,m.wrapT=t.wrap,r[a]=m}for(const a in i){const h=i[a];let c;if(h!=="")switch(a.toLowerCase()){case"kd":r.color=new W().fromArray(h);break;case"ks":r.specular=new W().fromArray(h);break;case"ke":r.emissive=new W().fromArray(h);break;case"map_kd":n("map",h);break;case"map_ks":n("specularMap",h);break;case"map_ke":n("emissiveMap",h);break;case"norm":n("normalMap",h);break;case"map_bump":case"bump":n("bumpMap",h);break;case"map_d":n("alphaMap",h),r.transparent=!0;break;case"ns":r.shininess=parseFloat(h);break;case"d":c=parseFloat(h),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(h),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break}}return this.materials[e]=new gs(r),this.materials[e]}getTextureParams(e,t){const i={scale:new B(1,1),offset:new B(0,0)},r=e.split(/\s+/);let o;return o=r.indexOf("-bm"),o>=0&&(t.bumpScale=parseFloat(r[o+1]),r.splice(o,2)),o=r.indexOf("-s"),o>=0&&(i.scale.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),o=r.indexOf("-o"),o>=0&&(i.offset.set(parseFloat(r[o+1]),parseFloat(r[o+2])),r.splice(o,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,o){const n=this.manager!==void 0?this.manager:Tr;let a=n.getHandler(e);a===null&&(a=new Rr(n)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const h=a.load(e,i,r,o);return t!==void 0&&(h.mapping=t),h}}const Pt=class extends ms{constructor(s){super(s)}load(s,e,t,i){this.path!==void 0&&(s=this.path+s),this.manager.itemStart(s),s=this.manager.resolveURL(s);const r=Js.get(s);if(r!==void 0)return setTimeout(()=>{e&&e(r),this.manager.itemEnd(s)},0),r;const o=document.createElement("video");return o.preload=Pt.preload,o.autoplay=Pt.autoplay,o.loop=Pt.loop,o.muted=Pt.muted,o.src=s,o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.zIndex="-1",document.body.appendChild(o),o.oncanplay=()=>{Js.add(s,o),this.manager.itemEnd(s),e&&e(o)},o.onerror=n=>{this.manager.itemEnd(s),i&&i(n)},o}};let jt=Pt;l(jt,"autoplay",!0);l(jt,"preload","auto");l(jt,"muted",!0);l(jt,"loop",!0);var ie;(function(s){s.BEFORELOAD="beforeLoad",s.LOADING="loading",s.DETAILLOADING="detailLoading",s.DETAILLOADED="detailLoaded",s.LOADED="loaded"})(ie||(ie={}));class Wn extends Se{constructor(e){super();l(this,"resourceMap"),l(this,"loaderMap"),l(this,"loadTotal"),l(this,"loadSuccess"),l(this,"loadError"),l(this,"isError"),l(this,"isLoading"),l(this,"isLoaded"),l(this,"loadDetailMap"),l(this,"path",""),this.resourceMap=new Map,this.loadTotal=0,this.loadSuccess=0,this.loadError=0,this.isError=!1,this.isLoading=!1,this.isLoaded=!1,this.loadDetailMap={};const t=new Kr,i=new jt;this.loaderMap={jpg:t,png:t,jpeg:t,obj:new Gn,mtl:new Un,mp4:i,webm:i,ogg:i},e&&(this.loaderMap=Object.assign(this.loaderMap,e.loaderExtends))}loaded(){return this.dispatchEvent({type:ie.LOADED,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError,resourceMap:this.resourceMap}),this}checkLoaded(){return this.loadTotal===this.loadSuccess+this.loadError&&(this.isError=!0,this.isLoaded=!0,this.isLoading=!1,this.loaded()),this}setPath(e){const t=this.loaderMap;return Object.keys(t).forEach(i=>{t[i].setPath(e)}),this.path=e,this}load(e){var t;if(this.reset(),this.isLoading=!0,this.dispatchEvent({type:ie.BEFORELOAD,urlList:[...e]}),e.length<=0)return this.checkLoaded(),console.warn("url list is empty."),this;this.loadTotal+=e.length;const i=this.resourceMap,r=this.loaderMap,o=this.loadDetailMap;for(const n of e){let a,h;typeof n=="string"?(a=n,h=((t=a.split(".").pop())==null?void 0:t.toLocaleLowerCase())||""):(a=n.url,h=n.ext.toLocaleLowerCase());const c={url:a,progress:0,error:!1,message:a};if(o[a]=c,i.has(a)){c.progress=1,this.loadSuccess+=1,this.dispatchEvent({type:ie.DETAILLOADED,detail:c}),this.dispatchEvent({type:ie.LOADING,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError}),this.checkLoaded();continue}if(!h){c.message=`url: ${a} \u5730\u5740\u6709\u8BEF\uFF0C\u65E0\u6CD5\u83B7\u53D6\u6587\u4EF6\u683C\u5F0F\u3002`,console.warn(c.message),c.error=!0,this.isError=!0,this.loadError+=1,this.dispatchEvent({type:ie.DETAILLOADED,detail:c}),this.dispatchEvent({type:ie.LOADING,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError});continue}const m=r[h];if(!m){c.message=`url: ${a} \u4E0D\u652F\u6301\u6B64\u6587\u4EF6\u683C\u5F0F\u52A0\u8F7D\u3002`,console.warn(c.message),c.error=!0,this.isError=!0,this.loadError+=1,this.dispatchEvent({type:ie.DETAILLOADED,detail:c}),this.dispatchEvent({type:ie.LOADING,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError});continue}m.loadAsync(a,y=>{c.progress=Number((y.loaded/y.total).toFixed(2)),this.dispatchEvent({type:ie.DETAILLOADING,detail:c})}).then(y=>{c.progress=1,this.loadSuccess+=1,this.resourceMap.set(a,y),this.dispatchEvent({type:ie.DETAILLOADED,detail:c}),this.dispatchEvent({type:ie.LOADING,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError}),this.checkLoaded()}).catch(y=>{c.error=!0,c.message=JSON.stringify(y),this.loadError+=1,this.dispatchEvent({type:ie.DETAILLOADED,detail:c}),this.dispatchEvent({type:ie.LOADING,loadTotal:this.loadTotal,loadSuccess:this.loadSuccess,loadError:this.loadError}),this.checkLoaded()})}return this}reset(){return this.loadTotal=0,this.loadSuccess=0,this.loadError=0,this.isError=!1,this.isLoading=!1,this.isLoaded=!1,this.loadDetailMap={},this}register(e,t){return this.loaderMap[e]=t,this}hasLoaded(e){return this.resourceMap.has(e)}getResource(e){return this.resourceMap.get(e)}getLoadDetailMap(){return this.loadDetailMap}setLoadDetailMap(e){return this.loadDetailMap=e,this}remove(e){}toJSON(){const e=[];return this.resourceMap.forEach((t,i)=>{e.push(i)}),JSON.stringify(e)}exportConfig(){const e=[];return this.resourceMap.forEach((t,i)=>{e.push(i)}),e}dispose(){return this.resourceMap.clear(),this}}const Kn=function(s){if(this.loaderManager)return console.warn("engine has installed loaderManager plugin."),!1;const e=new Wn(s);return this.loaderManager=e,this.loadResources=(t,i)=>{if(this.resourceManager){const r=o=>{i(void 0,o),this.resourceManager.removeEventListener("mapped",r)};try{this.resourceManager.addEventListener("mapped",r)}catch(o){i(o)}}else{const r=o=>{i(void 0,o),this.loaderManager.removeEventListener("loaded",r)};try{this.loaderManager.addEventListener("loaded",r)}catch(o){i(o)}}return this.loaderManager.load(t),this},this.loadResourcesAsync=t=>new Promise((i,r)=>{if(this.resourceManager){const o=n=>{i(n),this.resourceManager.removeEventListener("mapped",o)};try{this.resourceManager.addEventListener("mapped",o)}catch(n){r(n)}}else{const o=n=>{i(n),this.loaderManager.removeEventListener("loaded",o)};try{this.loaderManager.addEventListener("loaded",o)}catch(n){r(n)}}this.loaderManager.load(t)}),!0};var Jt,Xn=new Uint8Array(16);function Vn(){if(!Jt&&(Jt=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Jt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jt(Xn)}var Yn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function z(s){return typeof s=="string"&&Yn.test(s)}var $=[];for(var Rs=0;Rs<256;++Rs)$.push((Rs+256).toString(16).substr(1));function _n(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=($[s[e+0]]+$[s[e+1]]+$[s[e+2]]+$[s[e+3]]+"-"+$[s[e+4]]+$[s[e+5]]+"-"+$[s[e+6]]+$[s[e+7]]+"-"+$[s[e+8]]+$[s[e+9]]+"-"+$[s[e+10]]+$[s[e+11]]+$[s[e+12]]+$[s[e+13]]+$[s[e+14]]+$[s[e+15]]).toLowerCase();if(!z(t))throw TypeError("Stringified UUID is invalid");return t}function Qn(s,e,t){s=s||{};var i=s.random||(s.rng||Vn)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(var r=0;r<16;++r)e[t+r]=i[r];return e}return _n(i)}const Zn={name:"uvPulseShader",uniforms:{uTime:{value:0},uWidth:{value:.5},uColor:{value:{r:1,g:0,b:0}},uCenter:{value:{x:.5,y:.5}}},vertexShader:`
    uniform float uWidth;
    uniform float uTime;
    
    varying vec2 vUv;

    void main () {

      vUv = uv;

      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }`,fragmentShader:`
    uniform float uWidth;
    uniform float uTime;
    uniform vec3 uColor;
    uniform vec2 uCenter;

    varying vec2 vUv;

    void main () {
      // \u6839\u636EuTime\u6C42\u51FA\u767E\u5206\u6BD4
      float deg = mod(degrees(uTime), 360.0);
      if (deg > 0.0 && deg < 90.0) {
        discard;
      }

      float percent = sin(uTime);
      float distancePercent = distance(uCenter, vUv);

      // \u4ECE\u5916\u5411\u91CC
      if (distancePercent > 0.5) {
        discard;
      }
      if (distancePercent < percent) {
        discard;
      }

      if (distancePercent - percent > uWidth) {
        discard;
      }

      float opacity =  (uWidth - (distancePercent - percent)) / uWidth;

      // float opacity = distancePercent;
      gl_FragColor = vec4(uColor, opacity);
    }`},We=class{static getShader(s){return We.library.has(s)?We.cloneShader(We.library.get(s)):(console.warn(`con not found shader in shader library: ${s}`),null)}static generateConfig(s){if(!We.library.has(s))return console.warn(`con not found shader in shader library: ${s}`),{};const e=We.library.get(s),t={shader:s,uniforms:{}};return e.uniforms&&(t.uniforms=JSON.parse(JSON.stringify(e.uniforms))),t}static cloneShader(s){const e={name:s.name};return s.vertexShader&&(e.vertexShader=s.vertexShader),s.fragmentShader&&(e.fragmentShader=s.fragmentShader),s.uniforms&&(e.uniforms=JSON.parse(JSON.stringify(s.uniforms))),e}};let gt=We;l(gt,"library",new Map);l(gt,"reigster",function(s){We.library.has(s.name)&&console.warn(`shader library has exist shader: ${s.name} that will be cover.`),We.library.set(s.name,s)});const qn={name:"defaultShader"};gt.reigster(qn);gt.reigster(Zn);var d;(function(s){s.BOXGEOMETRY="BoxGeometry",s.SPHEREGEOMETRY="SphereGeometry",s.LOADGEOMETRY="LoadGeometry",s.PLANEGEOMETRY="PlaneGeometry",s.CIRCLEGEOMETRY="CircleGeometry",s.CONEGEOMETRY="ConeGeometry",s.CYLINDERGEOMETRY="CylinderGeometry",s.DODECAHEDRONGEOMETRY="DodecahedronGeometry",s.EDGESGEOMETRY="EdgesGeometry",s.LINECURVEGEOMETRY="LineCurveGeometry",s.SPLINECURVEGEOMETRY="SplineCurveGeometry",s.CUBICBEZIERCURVEGEOMETRY="CubicBezierCurveGeometry",s.QUADRATICBEZIERCURVEGEOMETRY="QuadraticBezierCurveGeometry",s.MESH="Mesh",s.LINE="Line",s.POINTS="Points",s.SPRITE="Sprite",s.GROUP="Group",s.CSS3DOBJECT="CSS3DObject",s.CSS3DSPRITE="CSS3DSprite",s.CSS3DPLANE="CSS3DPlane",s.IMAGETEXTURE="ImageTexture",s.CUBETEXTURE="CubeTexture",s.CANVASTEXTURE="CanvasTexture",s.VIDEOTEXTURE="VideoTexture",s.MESHBASICMATERIAL="MeshBasicMaterial",s.MESHSTANDARDMATERIAL="MeshStandardMaterial",s.MESHPHONGMATERIAL="MeshPhongMaterial",s.SPRITEMATERIAL="SpriteMaterial",s.LINEBASICMATERIAL="LineBasicMaterial",s.POINTSMATERIAL="PointsMaterial",s.SHADERMATERIAL="ShaderMaterial",s.AMBIENTLIGHT="AmbientLight",s.SPOTLIGHT="SpotLight",s.POINTLIGHT="PointLight",s.DIRECTIONALLIGHT="DirectionalLight",s.PERSPECTIVECAMERA="PerspectiveCamera",s.ORTHOGRAPHICCAMERA="OrthographicCamera",s.WEBGLRENDERER="WebGLRenderer",s.CSS3DRENDERER="CSS3DRenderer",s.SCENE="Scene",s.TRNASFORMCONTROLS="TransformControls",s.ORBITCONTROLS="OrbitControls",s.SMAAPASS="SMAAPass",s.UNREALBLOOMPASS="UnrealBloomPass",s.SCRIPTANIMATION="ScriptAnimation",s.KEYFRAMEANIMATION="KeyframeAnimation"})(d||(d={}));const Ke=()=>({vid:"",name:"",type:"Object3D",castShadow:!0,receiveShadow:!0,lookAt:"",visible:!0,matrixAutoUpdate:!0,renderOrder:0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},up:{x:0,y:1,z:0},parent:"",children:[],pointerdown:[],pointermove:[],pointerup:[],pointerenter:[],pointerleave:[],click:[],dblclick:[],contextmenu:[]}),Ls=function(){return Object.assign(Ke(),{type:"Light",color:"rgb(255, 255, 255)",intensity:1})},Jn=function(){return Object.assign(Ke(),{type:d.AMBIENTLIGHT,color:"rgb(255, 255, 255)",intensity:1})},$n=function(){return Object.assign(Ls(),{type:d.POINTLIGHT,distance:30,decay:.01})},eo=function(){return Object.assign(Ls(),{type:d.SPOTLIGHT,distance:30,angle:Math.PI/180*45,penumbra:.01,decay:.01})},to=function(){return Object.assign(Ls(),{type:d.DIRECTIONALLIGHT,shadow:{mapSize:{width:512,height:512},camera:{near:.5,far:500}}})},xe=function(){return{vid:"",type:"Geometry",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},groups:[]}},so=function(){return Object.assign(xe(),{type:d.BOXGEOMETRY,width:5,height:5,depth:5,widthSegments:1,heightSegments:1,depthSegments:1})},io=function(){return Object.assign(xe(),{type:d.SPHEREGEOMETRY,radius:3,widthSegments:32,heightSegments:32,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI})},ro=function(){return Object.assign(xe(),{type:d.PLANEGEOMETRY,width:5,height:5,widthSegments:1,heightSegments:1})},no=function(){return Object.assign(xe(),{type:d.CIRCLEGEOMETRY,radius:3,segments:8,thetaStart:0,thetaLength:Math.PI*2})},oo=function(){return Object.assign(xe(),{type:d.CONEGEOMETRY,radius:3,height:5,radialSegments:8,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:Math.PI*2})},ao=function(){return Object.assign(xe(),{type:d.LOADGEOMETRY,url:""})},lo=function(){return Object.assign(xe(),{type:d.CYLINDERGEOMETRY,radiusTop:3,radiusBottom:3,height:5,radialSegments:8,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:Math.PI*2})},co=function(){return Object.assign(xe(),{type:"",radius:3,detail:0})},ho=function(){return Object.assign(xe(),{type:d.LOADGEOMETRY,url:"",thresholdAngle:1})},$t=function(){return Object.assign(xe(),{path:[],divisions:36,space:!0})},uo=function(){return Object.assign($t(),{type:d.LINECURVEGEOMETRY})},po=function(){return Object.assign($t(),{type:d.SPLINECURVEGEOMETRY})},fo=function(){return Object.assign($t(),{type:d.CUBICBEZIERCURVEGEOMETRY})},mo=function(){return Object.assign($t(),{type:d.QUADRATICBEZIERCURVEGEOMETRY})},es=function(){return{vid:"",type:"Texture",name:"",mapping:Dr,wrapS:ti,wrapT:ti,magFilter:me,minFilter:Pr,anisotropy:1,format:_e,offset:{x:0,y:0},repeat:{x:1,y:1},rotation:0,center:{x:0,y:0},matrixAutoUpdate:!0,encoding:si,needsUpdate:!1}},go=function(){return Object.assign(es(),{type:d.IMAGETEXTURE,url:""})},yo=function(){return Object.assign(es(),{type:d.VIDEOTEXTURE,url:"",minFilter:me})},bo=function(){return Object.assign(es(),{type:d.CUBETEXTURE,cube:{nx:"",ny:"",nz:"",px:"",py:"",pz:""},mapping:jr,flipY:!1})},vo=function(){return Object.assign(es(),{type:d.CANVASTEXTURE,url:"",needsUpdate:!1})},et=function(){return{vid:"",type:"Material",alphaTest:0,colorWrite:!0,depthTest:!0,depthWrite:!0,format:_e,fog:!0,name:"",needsUpdate:!1,opacity:1,dithering:!1,shadowSide:null,side:qs,toneMapped:!0,transparent:!1,visible:!0,blendDst:Ir,blendDstAlpha:null,blendEquation:Nr,blendEquationAlpha:null,blending:Br,blendSrc:Hr,blendSrcAlpha:null}},Mo=function(){return Object.assign(et(),{type:d.MESHBASICMATERIAL,color:"rgb(255, 255, 255)",combine:ii,aoMapIntensity:1,fog:!0,lightMapIntensity:1,reflectivity:1,refractionRatio:.98,wireframe:!1,wireframeLinecap:"round",wireframeLinejoin:"round",wireframeLinewidth:1,map:"",envMap:"",alphaMap:"",aoMap:"",lightMap:"",specularMap:""})},Eo=function(){return Object.assign(et(),{type:d.MESHSTANDARDMATERIAL,aoMapIntensity:1,bumpScale:1,color:"rgb(255, 255, 255)",displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",emissiveIntensity:1,envMapIntensity:1,flatShading:!1,lightMapIntensity:1,metalness:0,normalMapType:ri,refractionRatio:.98,roughness:1,wireframe:!1,wireframeLinecap:"round",wireframeLinejoin:"round",roughnessMap:"",normalMap:"",metalnessMap:"",map:"",lightMap:"",envMap:"",emissiveMap:"",displacementMap:"",bumpMap:"",alphaMap:"",aoMap:""})},wo=function(){return Object.assign(et(),{type:d.MESHPHONGMATERIAL,aoMapIntensity:1,bumpScale:1,color:"rgb(255, 255, 255)",displacementScale:1,displacementBias:0,emissive:"rgb(0, 0, 0)",emissiveIntensity:1,envMapIntensity:1,flatShading:!1,lightMapIntensity:1,normalMapType:ri,refractionRatio:.98,wireframe:!1,wireframeLinecap:"round",wireframeLinejoin:"round",specular:"rgb(17, 17, 17)",shininess:30,combine:ii,normalMap:"",map:"",lightMap:"",envMap:"",emissiveMap:"",displacementMap:"",bumpMap:"",alphaMap:"",aoMap:"",specularMap:""})},So=function(){return Object.assign(et(),{type:d.SPRITEMATERIAL,color:"rgb(255, 255, 255)",rotation:0,map:"",alphaMap:"",sizeAttenuation:!0})},xo=function(){return Object.assign(et(),{type:d.LINEBASICMATERIAL,color:"rgb(255, 255, 255)",linecap:"round",linejoin:"round",linewidth:1})},Co=function(){return Object.assign(et(),{type:d.POINTSMATERIAL,map:"",alphaMap:"",color:"rgb(255, 255, 255)",sizeAttenuation:!0,size:1})},Ao=function(){return Object.assign(et(),{type:d.SHADERMATERIAL,shader:"defaultShader",uniforms:{}})},To=function(){return Object.assign(Ke(),{type:d.PERSPECTIVECAMERA,adaptiveWindow:!1,fov:45,aspect:1920/1080,near:5,far:50})},Ro=function(){return Object.assign(Ke(),{type:d.ORTHOGRAPHICCAMERA,adaptiveWindow:!1,left:-1920/32,right:1920/32,top:1080/32,bottom:-1080/32,near:5,far:50,zoom:1})},Pi=function(){return{vid:"",type:"Renderer",size:null}},Lo=function(){return Object.assign(Pi(),{vid:d.WEBGLRENDERER,type:d.WEBGLRENDERER,clearColor:"rgba(0, 0, 0, 0)",outputEncoding:si,physicallyCorrectLights:!1,shadowMap:{enabled:!1,autoUpdate:!0,type:zr},toneMapping:kr,toneMappingExposure:1,pixelRatio:window.devicePixelRatio,adaptiveCamera:!1,viewport:null,scissor:null})},Oo=function(){return Object.assign(Pi(),{vid:d.CSS3DRENDERER,type:d.CSS3DRENDERER})},Do=function(){return Object.assign(Ke(),{vid:d.SCENE,type:d.SCENE,background:"",environment:"",fog:{type:"",color:"rgb(150, 150, 150)",near:1,far:200,density:.003}})},Po=function(){return{vid:d.TRNASFORMCONTROLS,type:d.TRNASFORMCONTROLS,axis:"XYZ",enabled:!0,mode:"translate",snapAllow:!1,rotationSnap:Math.PI/180*10,translationSnap:5,scaleSnap:.1,showX:!0,showY:!0,showZ:!0,size:1,space:"world"}},jo=function(){return{vid:d.ORBITCONTROLS,type:d.ORBITCONTROLS,autoRotate:!1,autoRotateSpeed:2,enableDamping:!1,dampingFactor:.05,enabled:!0,enablePan:!0,enableRotate:!0,enableZoom:!0,maxAzimuthAngle:1/0,maxDistance:1/0,maxPolarAngle:Math.PI,maxZoom:1/0,minAzimuthAngle:-1/0,minDistance:0,minPolarAngle:0,minZoom:0,panSpeed:1,rotateSpeed:1,zoomSpeed:1,screenSpacePanning:!0,target:null}},ts=function(){return Object.assign(Ke(),{material:"",geometry:""})},Io=function(){return Object.assign(ts(),{type:"Sprite",material:"",center:{x:.5,y:.5}})},No=function(){return Object.assign(ts(),{type:d.MESH,geometry:"",material:""})},Bo=function(){return Object.assign(ts(),{type:d.POINTS,geometry:"",material:""})},Ho=function(){return Object.assign(ts(),{type:d.LINE,geometry:"",material:""})},zo=function(){return Object.assign(Ke(),{type:d.GROUP,children:[]})},ji=function(){return{vid:"",type:"Pass"}},ko=function(){return Object.assign(ji(),{type:d.SMAAPASS})},Go=function(){return Object.assign(ji(),{type:d.UNREALBLOOMPASS,strength:1.5,threshold:0,radius:0})},Uo=function(){return{vid:"",type:d.SCRIPTANIMATION,target:"",attribute:"",script:{name:""}}},Fo=function(){return{vid:"",type:d.KEYFRAMEANIMATION,target:"",attribute:""}},Os=function(){return Object.assign(Ke(),{type:d.CSS3DOBJECT,element:""})},Wo=function(){return Object.assign(Os(),{type:d.CSS3DPLANE})},Ko=function(){return Object.assign(Os(),{type:d.CSS3DSPRITE,rotation2D:0})},yt={[d.IMAGETEXTURE]:go,[d.CUBETEXTURE]:bo,[d.CANVASTEXTURE]:vo,[d.VIDEOTEXTURE]:yo,[d.MESHBASICMATERIAL]:Mo,[d.MESHSTANDARDMATERIAL]:Eo,[d.MESHPHONGMATERIAL]:wo,[d.SPRITEMATERIAL]:So,[d.LINEBASICMATERIAL]:xo,[d.POINTSMATERIAL]:Co,[d.SHADERMATERIAL]:Ao,[d.AMBIENTLIGHT]:Jn,[d.SPOTLIGHT]:eo,[d.POINTLIGHT]:$n,[d.DIRECTIONALLIGHT]:to,[d.BOXGEOMETRY]:so,[d.SPHEREGEOMETRY]:io,[d.LOADGEOMETRY]:ao,[d.PLANEGEOMETRY]:ro,[d.CIRCLEGEOMETRY]:no,[d.CONEGEOMETRY]:oo,[d.CYLINDERGEOMETRY]:lo,[d.EDGESGEOMETRY]:ho,[d.LINECURVEGEOMETRY]:uo,[d.SPLINECURVEGEOMETRY]:po,[d.CUBICBEZIERCURVEGEOMETRY]:fo,[d.QUADRATICBEZIERCURVEGEOMETRY]:mo,[d.DODECAHEDRONGEOMETRY]:co,[d.SPRITE]:Io,[d.LINE]:Ho,[d.MESH]:No,[d.POINTS]:Bo,[d.GROUP]:zo,[d.CSS3DOBJECT]:Os,[d.CSS3DSPRITE]:Ko,[d.CSS3DPLANE]:Wo,[d.PERSPECTIVECAMERA]:To,[d.ORTHOGRAPHICCAMERA]:Ro,[d.WEBGLRENDERER]:Lo,[d.CSS3DRENDERER]:Oo,[d.SCENE]:Do,[d.TRNASFORMCONTROLS]:Po,[d.ORBITCONTROLS]:jo,[d.SMAAPASS]:ko,[d.UNREALBLOOMPASS]:Go,[d.SCRIPTANIMATION]:Uo,[d.KEYFRAMEANIMATION]:Fo};var A;(function(s){s.CAMERA="camera",s.LIGHT="light",s.GEOMETRY="geometry",s.TEXTURE="texture",s.MATERIAL="material",s.RENDERER="renderer",s.SCENE="scene",s.SPRITE="sprite",s.CONTROLS="controls",s.LINE="line",s.MESH="mesh",s.POINTS="points",s.GROUP="group",s.CSS3D="css3D",s.PASS="pass",s.MODIFIER="modifier",s.ANIMATION="animation"})(A||(A={}));var Ds;(function(s){s[s.CAMERA=A.CAMERA]="CAMERA",s[s.LIGHT=A.LIGHT]="LIGHT",s[s.SCENE=A.SCENE]="SCENE",s[s.SPRITE=A.SPRITE]="SPRITE",s[s.LINE=A.LINE]="LINE",s[s.MESH=A.MESH]="MESH",s[s.POINTS=A.POINTS]="POINTS",s[s.GROUP=A.GROUP]="GROUP",s[s.CSS3D=A.CSS3D]="CSS3D"})(Ds||(Ds={}));const ss={[d.IMAGETEXTURE]:A.TEXTURE,[d.CUBETEXTURE]:A.TEXTURE,[d.CANVASTEXTURE]:A.TEXTURE,[d.VIDEOTEXTURE]:A.TEXTURE,[d.MESHBASICMATERIAL]:A.MATERIAL,[d.MESHSTANDARDMATERIAL]:A.MATERIAL,[d.MESHPHONGMATERIAL]:A.MATERIAL,[d.SPRITEMATERIAL]:A.MATERIAL,[d.LINEBASICMATERIAL]:A.MATERIAL,[d.POINTSMATERIAL]:A.MATERIAL,[d.SHADERMATERIAL]:A.MATERIAL,[d.AMBIENTLIGHT]:A.LIGHT,[d.SPOTLIGHT]:A.LIGHT,[d.POINTLIGHT]:A.LIGHT,[d.DIRECTIONALLIGHT]:A.LIGHT,[d.BOXGEOMETRY]:A.GEOMETRY,[d.SPHEREGEOMETRY]:A.GEOMETRY,[d.LOADGEOMETRY]:A.GEOMETRY,[d.PLANEGEOMETRY]:A.GEOMETRY,[d.CIRCLEGEOMETRY]:A.GEOMETRY,[d.CONEGEOMETRY]:A.GEOMETRY,[d.CIRCLEGEOMETRY]:A.GEOMETRY,[d.EDGESGEOMETRY]:A.GEOMETRY,[d.CYLINDERGEOMETRY]:A.GEOMETRY,[d.LINECURVEGEOMETRY]:A.GEOMETRY,[d.SPLINECURVEGEOMETRY]:A.GEOMETRY,[d.CUBICBEZIERCURVEGEOMETRY]:A.GEOMETRY,[d.QUADRATICBEZIERCURVEGEOMETRY]:A.GEOMETRY,[d.SPRITE]:A.SPRITE,[d.LINE]:A.LINE,[d.MESH]:A.MESH,[d.POINTS]:A.POINTS,[d.GROUP]:A.GROUP,[d.CSS3DOBJECT]:A.CSS3D,[d.CSS3DSPRITE]:A.CSS3D,[d.CSS3DPLANE]:A.CSS3D,[d.PERSPECTIVECAMERA]:A.CAMERA,[d.ORTHOGRAPHICCAMERA]:A.CAMERA,[d.WEBGLRENDERER]:A.RENDERER,[d.SCENE]:A.SCENE,[d.TRNASFORMCONTROLS]:A.CONTROLS,[d.ORBITCONTROLS]:A.CONTROLS,[d.SMAAPASS]:A.PASS,[d.UNREALBLOOMPASS]:A.PASS,[d.SCRIPTANIMATION]:A.ANIMATION,[d.KEYFRAMEANIMATION]:A.ANIMATION},I=function(s,e,t=!0,i=!0){if(!yt[s])return console.error(`type: ${s} can not be found in configList.`),{vid:"",type:s};const r=(n,a)=>{for(const h in a){if(n[h]===void 0){!t&&(n[h]=a[h]),t&&i&&console.warn(`'${s}' config can not set key: ${h}`);continue}typeof a[h]=="object"&&a[h]!==null&&!Array.isArray(a[h])?(n[h]===null&&(n[h]=vn({},a[h])),r(n[h],a[h])):n[h]=a[h]}},o=yt[s]();if([d.SHADERMATERIAL].includes(s)){const n=gt.generateConfig((e==null?void 0:e.shader)||"defaultShader"),a=t;t=!1,r(o,n),t=a}if([d.SCRIPTANIMATION,d.KEYFRAMEANIMATION].includes(s)&&(t=!1),o.vid===""&&(o.vid=Qn()),e&&r(o,e),I.autoInject&&I.injectEngine){const n=I.injectEngine;if(n.applyConfig(o),I.injectScene&&ss[o.type]in Ds&&o.type!==d.SCENE){let a=null;typeof I.injectScene=="boolean"?a=n.getObjectConfig(n.scene):typeof I.injectScene=="string"&&(a=n.getConfigBySymbol(I.injectScene)),a?a.children.push(o.vid):console.warn("current engine scene can not found it config",n,n.scene)}}return o};I.autoInject=!0;I.injectScene=!1;I.injectEngine=null;const It=(s,e)=>e===1/0?"Infinity":e===-1/0?"-Infinity":e,Ii=(s,e)=>e==="Infinity"?1/0:e==="-Infinity"?-1/0:e,is=s=>JSON.parse(JSON.stringify(s,It),Ii);var Ni;(function(s){s.MAPPED="mapped"})(Ni||(Ni={}));class Xo extends Se{constructor(e={}){super();l(this,"structureMap",new Map),l(this,"configMap",new Map),l(this,"resourceMap",new Map),l(this,"configModuleMap",ss),l(this,"mappingHandler",new Map);const t=this.mappingHandler;t.set(HTMLImageElement,this.HTMLImageElementHandler),t.set(HTMLCanvasElement,this.HTMLCanvasElementHandler),t.set(HTMLVideoElement,this.HTMLVideoElementHandler),t.set(Qe,this.Object3DHandler),t.set(HTMLDivElement,this.HTMLDivElementHandler),t.set(HTMLSpanElement,this.HTMLSpanElementHandler);const i=new Map;for(const r in e)i.has(r)&&console.warn(`resourceManager construct params rescource already exist: ${r}, that will be cover.`),i.set(r,e[r]);this.mappingResource(i)}Object3DHandler(e,t){const i=this.structureMap,r=this.configMap,o=this.resourceMap,n=function(a,h){let c=a;o.set(c,h);const m=I(h.type,h,!0,!1);r.set(c,m);const y={type:`${h.type}`,url:c};if(h.geometry){const S=h.geometry;S.computeBoundingBox();const x=S.boundingBox,E=x.getCenter(new O);c=`${a}.geometry`,o.set(c,S);const w=I(d.LOADGEOMETRY,{url:c,position:{x:E.x/(x.max.x-x.min.x)*2,y:E.y/(x.max.y-x.min.y)*2,z:E.z/(x.max.z-x.min.z)*2}});r.set(c,w),y.geometry=c,m.geometry=w.vid}if(h.material){const S=h.material;if(S instanceof Array)y.material=[],m.material=[],S.forEach((x,E,w)=>{c=`${a}.material.${E}`,o.set(c,x);const C=I(x.type,x,!0,!1);r.set(c,C),y.material[E]=c,m.material.push(C.vid)});else{c=`${a}.material`,o.set(c,S);const x=I(S.type,S,!0,!1);r.set(c,x),y.material=c,m.material=x.vid}}if([d.GROUP,d.SCENE].includes(h.type)&&(r.get(y.url).children=[]),h.children.length)if(y.children=[],[d.GROUP,d.SCENE].includes(h.type)){const S=r.get(y.url);h.children.forEach((x,E,w)=>{c=`${a}.children.${E}`,S.children.push(c),y.children[E]=n(c,x)})}else h.children.forEach((S,x,E)=>{c=`${a}.children.${x}`,y.children[x]=n(c,S)});return y};return i.set(e,n(e,t)),this}HTMLImageElementHandler(e,t){return this.resourceMap.set(e,t),this.configMap.set(e,I(d.IMAGETEXTURE,{url:e})),this.structureMap.set(e,e),this}HTMLCanvasElementHandler(e,t){return this.resourceMap.set(e,t),this.configMap.set(e,I(d.CANVASTEXTURE,{url:e})),this.structureMap.set(e,e),this}HTMLVideoElementHandler(e,t){return this.resourceMap.set(e,t),this.configMap.set(e,I(d.VIDEOTEXTURE,{url:e})),this.structureMap.set(e,e),this}HTMLDivElementHandler(e,t){return this.resourceMap.set(e,t),this.configMap.set(e,I(d.CSS3DOBJECT,{element:e})),this.structureMap.set(e,e),this}HTMLSpanElementHandler(e,t){return this.resourceMap.set(e,t),this.configMap.set(e,I(d.CSS3DSPRITE,{element:e})),this.structureMap.set(e,e),this}mappingResource(e){const t=this.structureMap,i=this.configMap,r=this.resourceMap,o=this.mappingHandler,n=(c,m,y)=>Object.getPrototypeOf(y)?o.has(Object.getPrototypeOf(y).constructor)?(o.get(Object.getPrototypeOf(y).constructor).call(this,c,m),!0):n(c,m,Object.getPrototypeOf(y)):!1,a=I.autoInject;I.autoInject=!1;const h={};return e.forEach((c,m)=>{n(m,c,c)?h[m]=this.getResourceConfig(m):(r.set(m,c),t.set(m,m),console.warn("resource manager can not support this resource to generate config",c))}),I.autoInject=a,this.dispatchEvent({type:"mapped",structureMap:t,configMap:i,resourceMap:r,resourceConfig:h}),this}getResourceConfig(e){if(this.structureMap.has(e))if(this.structureMap.get(e)===e){const t=this.configMap.get(e);return t?{[this.configModuleMap[t.type]]:{[t.vid]:is(t)}}:{}}else{const t={},i=this.configMap,r=this.configModuleMap,o=this.structureMap.get(e),n=a=>{let h=i.get(a.url),c=r[h.type];if(t[c]||(t[c]={}),t[c][h.vid]=is(h),a.geometry&&(h=i.get(a.geometry),c=r[h.type],t[c]||(t[c]={}),t[c][h.vid]=is(h)),a.material&&(h=i.get(a.material),c=r[h.type],t[c]||(t[c]={}),t[c][h.vid]=is(h)),a.children&&a.children.length)for(const m of a.children)n(m)};return n(o),t}else return console.warn(`resource manager can not found this url resource: ${e}`),{}}hasResource(e){return this.resourceMap.has(e)}remove(e){if(this.structureMap.has(e))if(this.structureMap.get(e)===e){this.structureMap.delete(e),this.configMap.delete(e);const t=this.resourceMap.get(e);return(t==null?void 0:t.dispose)&&t.dispose(),this.resourceMap.delete(e),this}else{const t=this.configMap,i=this.resourceMap,r=this.structureMap.get(e),o=n=>{if(t.delete(n.url),i.delete(n.url),n.geometry&&(t.delete(n.geometry),i.delete(n.geometry)),n.material&&(t.delete(n.material),i.delete(n.material)),n.children&&n.children.length)for(const a of n.children)o(a)};return o(r),this}else return console.warn(`resource manager can not found this url resource: ${e}`),this}dispose(){this.resourceMap.forEach((e,t)=>{e.dispose&&e.dispose()}),this.resourceMap.clear(),this.configMap.clear(),this.structureMap.clear()}}const Vo=function(s){if(this.resourceManager)return console.warn("engine has installed resourceManager plugin."),!1;const e=new Xo(s.resources);return this.resourceManager=e,this.loaderManager&&this.loaderManager.addEventListener("loaded",t=>{this.resourceManager.mappingResource(t.resourceMap)}),this.registerResources=t=>{const i=new Map;return Object.keys(t).forEach(r=>{i.set(r,t[r])}),this.resourceManager.mappingResource(i),this},this.addEventListener("dispose",()=>{this.resourceManager.dispose()}),!0};function rs(s,e){return s in e}const Ce=class extends Se{constructor(s){super();l(this,"ignoreAttribute"),this.ignoreAttribute=s||{}}static proxyGetter(s,e,t){return Reflect.get(s,e,t)}static proxySetter(s,e,t,i,r,o){if(typeof e=="symbol")return Reflect.set(s,e,t,i);let n;if(s[e]===void 0){if(typeof t=="object"&&t!==null&&!Ce.proxyWeakSet.has(t)&&!r.ignoreAttribute[e]){const a=o.concat([e]);t=r.proxyExtends(t,a)}n=Reflect.set(s,e,t),r.broadcast({operate:"add",path:o.concat([]),key:e,value:t})}else{if(typeof t=="object"&&t!==null&&!Ce.proxyWeakSet.has(t)&&!r.ignoreAttribute[e]){const a=o.concat([e]);t=r.proxyExtends(t,a)}if(n=Reflect.set(s,e,t),Array.isArray(s)&&e==="length"){const a=s[Symbol.for(Ce.arraySymobl)],h=a.length-s.length;if(h>0){let c=0,m=0;for(const y of a)if(!s.includes(y)&&(r.broadcast({operate:"delete",path:o.concat([]),key:m.toString(),value:y}),c+=1,m+=1,c===h))break}return s[Symbol.for(this.arraySymobl)]=s.concat([]),n}r.broadcast({operate:"set",path:o.concat([]),key:e,value:t})}return n}static proxyDeleter(s,e,t,i){const r=s[e],o=Reflect.deleteProperty(s,e);return Array.isArray(s)||typeof e=="symbol"||t.broadcast({operate:"delete",path:i.concat([]),key:e,value:r}),o}proxyExtends(s,e=[]){if(Ce.proxyWeakSet.has(s)||typeof s!="object")return s;const t={get:Ce.proxyGetter,set:(r,o,n,a)=>Ce.proxySetter(r,o,n,a,this,e),deleteProperty:(r,o)=>Ce.proxyDeleter(r,o,this,e)};if(typeof s=="object"&&s!==null)for(const r in s){const o=e.concat([r]);let n=this.ignoreAttribute,a=!1;for(const h of o.slice(1)){if(n[h]===!0){a=!0;break}n[h]&&(n=n[h])}a||rs(r,s)&&typeof s[r]=="object"&&s[r]!==null&&(Array.isArray(s[r])&&(s[r][Symbol.for(Ce.arraySymobl)]=s[r].concat([])),s[r]=this.proxyExtends(s[r],o))}const i=new Proxy(s,t);return Ce.proxyWeakSet.add(i),i}broadcast({operate:s,path:e,key:t,value:i}){return{__poto__:!0,length:!0}[t]?this:(this.dispatchEvent({type:"broadcast",notice:{operate:s,path:e,key:t,value:i}}),this)}};let Ps=Ce;l(Ps,"proxyWeakSet",new WeakSet);l(Ps,"arraySymobl","vis.array");class Yo{constructor(){l(this,"rule"),l(this,"memberSet"),this.rule=function(){},this.memberSet=new Set}apply(e){return this.memberSet.add(e),this}cancel(e){return this.memberSet.delete(e),this}setRule(e){return this.rule=e,this}translate(e){const t=this.rule;return this.memberSet.forEach(i=>{t(e,i)}),this}}class Ae{constructor(e,t,i){l(this,"data"),l(this,"broadcast"),l(this,"translater"),this.translater=new Yo().setRule(e),this.broadcast=new Ps(i),this.data=this.broadcast.proxyExtends(t),this.broadcast.addEventListener("broadcast",r=>{this.translater.translate(r.notice)})}getData(){return this.data}setData(e){return this.data=e,this}proxyData(e){return this.data=this.broadcast.proxyExtends(e),this.data}existSymbol(e){return Boolean(this.data[e])}addConfig(e){return this.data[e.vid]=e,this}getConfig(e){return this.data[e]}removeConfig(e){const t=this.data;t[e]!==void 0&&delete t[e]}addCompiler(e){return e.setTarget(this.data),e.compileAll(),this.translater.apply(e),this}toJSON(e=!0){return e?JSON.stringify(this.exportConfig(),It):JSON.stringify(this.data,It)}exportConfig(e=!0){if(e){const t=this.data,i={},r={},o=(n,a,h={})=>{for(const c in n){if(["vid","type"].includes(c)){h[c]=n[c];continue}if(typeof n[c]=="object"&&n[c]!==null){if(Array.isArray(n[c])){if(!n[c].length)continue;h[c]=n[c].map(m=>typeof m=="object"&&m!==null?JSON.parse(JSON.stringify(m)):m);continue}h[c]={},a[c]?(o(n[c],a[c],h[c]),Object.keys(h[c]).length===0&&delete h[c]):h[c]=JSON.parse(JSON.stringify(n[c]))}else a[c]!==n[c]&&(h[c]=n[c])}};for(const n of Object.values(t)){if(!r[n.type]){if(!yt[n.type]){console.error(`can not font some config with: ${n.type}`);continue}r[n.type]=yt[n.type]()}i[n.vid]={},o(n,r[n.type],i[n.vid])}return i}else return JSON.parse(JSON.stringify(this.data,It),Ii)}load(e){const t=this.data,i={},r=(o,n)=>{for(const a in n)typeof o[a]=="object"&&o[a]!==null&&typeof n[a]=="object"&&n[a]!==null?r(o[a],n[a]):o[a]===void 0&&(o[a]=n[a])};for(const o in e){const n=e[o];if(!i[n.type]){if(!yt[n.type]){console.error(`can not font some config with: ${n.type}`);continue}i[n.type]=yt[n.type]()}r(n,i[n.type]),t[o]=n}return this}remove(e){const t=this.data;for(const i in e)t[i]!==void 0&&delete t[i];return this}getModule(){return this.MODULE}}const _o=function(s,e){const{operate:t,key:i,path:r,value:o}=s;if(t==="add"){z(i)&&e.add(i,o);return}if(t==="set"){const n=r.concat([]),a=n.shift()||i;a&&z(a)?e.set(a,n,i,o):console.warn(`texture rule vid is illeage: '${a}'`);return}if(t==="delete"){const n=r[0]||i;z(n)?e.remove(n):console.warn(`texture rule vid is illeage: '${n}'`);return}};class Qo extends Ae{constructor(e,t){!e&&(e={});super(_o,e,t);l(this,"MODULE",A.TEXTURE)}}const Zo=function(s,e){const{operate:t,key:i,path:r,value:o}=s;if(t==="add"){z(i)&&e.add(i,o);return}if(t==="set"){if(z(i)&&!r.length&&typeof o=="object"){e.cover(i,o);return}const n=r.concat([]),a=n.shift();a&&z(a)?e.set(a,n,i,o):console.warn(`material rule vid is illeage: '${a}'`);return}if(t==="delete"){const n=r[0]||i;z(n)?e.remove(n):console.warn(`texture rule vid is illeage: '${n}'`);return}};class qo extends Ae{constructor(e,t){!e&&(e={});super(Zo,e,t);l(this,"MODULE",A.MATERIAL)}}class Nt extends Ae{constructor(e,t,i){!t&&(t=Object.create(Object.prototype));super(e,t,i);l(this,"MODULE",A.GROUP)}}const ns={[d.WEBGLRENDERER]:!0,[d.CSS3DRENDERER]:!0,[d.SCENE]:!0},Ne=function(s,e){const{operate:t,key:i,path:r,value:o}=s;if(i==="parent")return;const n=r.concat([]);let a=i,h=i;if(n.length&&(a=n.shift(),n.length&&(h=n[0])),h==="children"){if(t==="add"){e.addChildren(a,o);return}if(t==="delete"){e.removeChildren(a,o);return}}if(h.toLocaleUpperCase()in Dt){const c=Number(n.length>2?n[1]:i);if(t==="add"){if(Number.isInteger(Number(i))&&n.length===1){e.addEvent(a,h,o);return}if(!Number.isInteger(c)){console.error(`${e.MODULE} rule: event analysis error.`,s);return}e.updateEvent(a,h,c);return}if(t==="set"){if(!Number.isInteger(c)){console.error(`${e.MODULE} rule: event analysis error.`,s);return}e.updateEvent(a,h,c);return}if(t==="delete"){if(!Number.isInteger(c)){console.error(`${e.MODULE} rule: event analysis error.`,s);return}e.removeEvent(a,h,o);return}}if(t==="add"&&(z(i)||ns[i])){e.add(i,o);return}if(t==="set"){if((a&&z(i)||ns[a])&&!r.length&&typeof o=="object"){e.cover(a,o);return}a&&z(a)||ns[a]?e.set(a,n,i,o):console.warn(`${e.MODULE} rule vid is illeage: '${a}'`);return}if(t==="delete"){(z(i)||ns[i])&&e.remove(i,o);return}},Jo=function(s,e){Ne(s,e)};class $o extends Nt{constructor(e,t){!e&&(e={});super(Jo,e,t);l(this,"MODULE",A.LIGHT)}}const ea=function(s,e){const{operate:t,key:i,path:r,value:o}=s,n=r.length?r[0]:i,a=r.length>=2?r[1]:i,h=r.length?r.concat([]).slice(1):[];if(t==="add"){if(z(n)){if(a==="groups")if(Number.isInteger(Number(i))){e.addGroup(n,o);return}else{console.warn(`geometry rule illeage groups index: ${i}`);return}h.length>0?e.set(n,h,o):e.add(n,o)}else console.warn(`geometry rule vid is illeage: '${i}'`);return}if(t==="set"){if(n&&z(n)){if(a==="groups"){const c=Number(r[2]||i);if(!Number.isInteger(c)){console.warn(`geometry rule illeage groups index: ${c}`);return}e.updateGroup(n,c);return}e.set(n,h,o)}else console.warn(`geometry rule vid is illeage: '${n}'`);return}if(t==="delete"){if(z(n)){if(a==="groups"){const c=Number(r[2]||i);if(!Number.isInteger(c)){console.warn(`geometry rule illeage groups index: ${c}`);return}e.removeGroup(n,c)}e.remove(n)}else console.warn(`geometry rule vid is illeage: '${n}'`);return}};class ta extends Ae{constructor(e,t){!e&&(e={});super(ea,e,t);l(this,"MODULE",A.GEOMETRY)}}const sa=function(s,e){Ne(s,e)};class ia extends Nt{constructor(e,t){!e&&(e={});super(sa,e,t);l(this,"MODULE",A.CAMERA)}}const ra=function(s,e){const{operate:t,key:i,value:r}=s,o=s.path.concat([]);if(t==="add"){e.add(r);return}if(t==="set"){if(z(i)||i===d.WEBGLRENDERER){e.add(r);return}let n=i;o.length&&(n=o.shift()),z(n)||n===d.WEBGLRENDERER?e.assembly(n,a=>{a.process({path:o.concat([]),key:i,value:r})}):console.warn(`renderer rule can not support this vid: ${n}`);return}};class na extends Ae{constructor(e,t){!e&&(e={});super(ra,e,t);l(this,"MODULE",A.RENDERER)}}const oa=function(s,e){Ne(s,e)};class aa extends Nt{constructor(e,t){!e&&(e={});super(oa,e,t);l(this,"MODULE",A.SCENE)}}const la=function(s,e){const{operate:t,key:i,path:r,value:o}=s;if(t==="set"){const n=r.concat([]),a=n.shift();a?e.set(a,n,i,o):i?e.setAll(i):console.warn(`controls rule can not found controls type in set operate: ${a}`)}};class ca extends Ae{constructor(e,t){!e&&(e={});super(la,e,t);l(this,"MODULE",A.CONTROLS)}}class os extends Ae{constructor(e,t,i){!t&&(t=Object.create(Object.prototype));super(e,t,i);l(this,"MODULE",A.MESH)}}const ha=function(s,e){s.key!=="geometry"&&Ne(s,e)};class ua extends os{constructor(e,t){!e&&(e={});super(ha,e,t);l(this,"MODULE",A.SPRITE)}}const da=function(s,e){Ne(s,e)};class pa extends os{constructor(e,t){!e&&(e={});super(da,e,t);l(this,"MODULE",A.LINE)}}const fa=function(s,e){Ne(s,e)};class ma extends os{constructor(e,t){!e&&(e={});super(fa,e,t);l(this,"MODULE",A.MESH)}}const ga=function(s,e){Ne(s,e)};class ya extends os{constructor(e,t){!e&&(e={});super(ga,e,t);l(this,"MODULE",A.POINTS)}}const ba=function(s,e){Ne(s,e)};class va extends Nt{constructor(e,t){!e&&(e={});super(ba,e,t);l(this,"MODULE",A.GROUP)}}const Ma=function(s,e){const{operate:t,key:i,value:r}=s;if(t==="add"){e.add(r);return}t==="delete"&&e.remove(r.vid)};class Ea extends Ae{constructor(e,t){!e&&(e={});super(Ma,e,t);l(this,"MODULE",A.PASS)}}const wa=function(s,e){const{operate:t,key:i,path:r,value:o}=s;if(t==="add"){z(i)?e.add(i,o):console.warn(`animation rule vid is illeage: '${i}'`);return}if(t==="set"){const a=r.concat([]).shift();a&&z(a)?e.update(a):console.warn(`animation rule vid is illeage: '${a}'`);return}if(t==="delete"){z(i)?e.remove(o):console.warn(`animation rule vid is illeage: '${i}'`);return}};class Sa extends Ae{constructor(e,t){!e&&(e={});super(wa,e,t);l(this,"MODULE",A.ANIMATION)}}const xa=function(s,e){Ne(s,e)};class Ca extends Nt{constructor(e,t){!e&&(e={});super(xa,e,t);l(this,"MODULE",A.CSS3D)}}const js=class{constructor(s){l(this,"cameraDataSupport",new ia),l(this,"lightDataSupport",new $o),l(this,"geometryDataSupport",new ta),l(this,"textureDataSupport",new Qo),l(this,"materialDataSupport",new qo),l(this,"rendererDataSupport",new na),l(this,"sceneDataSupport",new aa),l(this,"controlsDataSupport",new ca),l(this,"spriteDataSupport",new ua),l(this,"lineDataSupport",new pa),l(this,"meshDataSupport",new ma),l(this,"pointsDataSupport",new ya),l(this,"groupDataSupport",new va),l(this,"css3DDataSupport",new Ca),l(this,"passDataSupport",new Ea),l(this,"animationDataSupport",new Sa),l(this,"dataSupportMap"),s&&Object.keys(s).forEach(t=>{this[t]!==void 0&&(this[t]=s[t])});const e=new Map;Object.keys(this).forEach(t=>{const i=this[t];i instanceof Ae&&e.set(i.MODULE,i)}),this.dataSupportMap=e}getDataSupport(s){return this.dataSupportMap.has(s)?this.dataSupportMap.get(s):(console.warn(`can not found this type in dataSupportManager: ${s}`),null)}getSupportData(s){return this.dataSupportMap.has(s)?this.dataSupportMap.get(s).getData():(console.warn(`can not found this type in dataSupportManager: ${s}`),null)}setSupportData(s,e){return this.dataSupportMap.has(s)?this.dataSupportMap.get(s).setData(e):console.warn(`can not found this type in dataSupportManager: ${s}`),this}getConfigBySymbol(s){const e=this.dataSupportMap.values();for(const t of e){const i=t.getConfig(s);if(i)return i}return null}removeConfigBySymbol(...s){const e=this.dataSupportMap.values();for(const t of s)for(const i of e)if(i.existSymbol(t)){i.removeConfig(t);break}return this}getModuleBySymbol(s){const e=this.dataSupportMap.values();for(const t of e)if(t.existSymbol(s))return t.MODULE;return null}applyConfig(...s){for(const e of s){const t=js.configModuleMap[e.type];t?this.dataSupportMap.get(t).addConfig(e):console.warn(`dataSupportManager can not found this config module: ${e.type}`)}return this}reactiveConfig(s){const e=js.configModuleMap[s.type];return e?this.dataSupportMap.get(e).addConfig(s).getConfig(s.vid):(console.warn(`dataSupportManager can not found this config module: ${s.type}`),s)}load(s){return this.dataSupportMap.forEach((t,i)=>{s[i]&&t.load(s[i])}),this}remove(s){return this.dataSupportMap.forEach((t,i)=>{s[i]&&t.remove(s[i])}),this}toJSON(s={},e=!0){return JSON.stringify(this.exportConfig(s,e),It)}exportConfig(s={},e=!0){return this.dataSupportMap.forEach((i,r)=>{s[r]=i.exportConfig(e)}),s}};let Bi=js;l(Bi,"configModuleMap",ss);const Aa=function(s){if(this.dataSupportManager)return console.warn("engine has installed dataSupportManager plugin."),!1;const e=new Bi(s);return this.dataSupportManager=e,this.applyConfig=function(...t){return this.dataSupportManager.applyConfig(...t),this},this.reactiveConfig=function(t){return this.dataSupportManager.reactiveConfig(t)},this.getConfigBySymbol=function(t){return this.dataSupportManager.getConfigBySymbol(t)},this.removeConfigBySymbol=function(...t){return this.dataSupportManager.removeConfigBySymbol(...t),this},this.toJSON=function(){if(this.loaderManager){const t={assets:JSON.parse(this.loaderManager.toJSON())};return this.dataSupportManager.toJSON(t)}return this.dataSupportManager.toJSON()},this.exportConfig=function(){let t={};return this.loaderManager&&(t={assets:this.loaderManager.exportConfig()}),this.dataSupportManager.exportConfig(t)},this.completeSet.add(()=>{const t=this.dataSupportManager.getDataSupport(A.RENDERER).getData();t.WebGLRenderer||(t.WebGLRenderer=I(d.WEBGLRENDERER));const i=this.dataSupportManager.getDataSupport(A.CONTROLS).getData();this.transformControls&&(i[d.TRNASFORMCONTROLS]||(i[d.TRNASFORMCONTROLS]=I(d.TRNASFORMCONTROLS))),this.orbitControls&&(i[d.ORBITCONTROLS]||(i[d.ORBITCONTROLS]=I(d.ORBITCONTROLS)))}),!0};class le{static applyConfig(e,t,i={},r){const o=Object.assign({vid:!0,type:!0},i),n=(a,h)=>{for(const c in a)if(!o[c]){if(typeof a[c]=="object"&&typeof a[c]!==null&&rs(c,h)){n(a[c],h[c]);continue}rs(c,h)&&(h[c]=a[c])}};n(e,t),r&&r()}constructor(){}}const Ta={name:"linearTime",multiply:1},Ra=function(s,e,t,i){return e[t]===void 0?(console.error(`object not exist attribute: ${t}`,e),r=>{}):typeof e[t]!="number"?(console.error("object attribute is not typeof number.",e,t),r=>{}):r=>{e[t]+=r.delta*i.multiply}},Be=class{static generateConfig(s,e){if(!Be.configLibrary.has(s))return console.warn(`event library can not found config by name: ${s}`),{name:""};const t=(r,o)=>{for(const n in o)r[n]!==void 0&&(typeof o[n]=="object"&&o[n]!==null&&!Array.isArray(o[n])?t(r[n],o[n]):r[n]=o[n])},i=JSON.parse(JSON.stringify(Be.configLibrary.get(s)));return t(i,e),i}static generateScript(s,e,t,i){return Be.generatorLibrary.has(i.name)?Be.generatorLibrary.get(i.name)(s,e,t,i):(console.error(`event library can not found generator by name: ${i.name}`),()=>{})}static has(s){return Be.configLibrary.has(s)}};let tt=Be;l(tt,"configLibrary",new Map);l(tt,"generatorLibrary",new Map);l(tt,"register",function(s,e){Be.configLibrary.has(s.name)&&console.warn(`EventLibrary has already exist this event generator: ${s.name}, that will be cover.`),Be.configLibrary.set(s.name,JSON.parse(JSON.stringify(s))),Be.generatorLibrary.set(s.name,e)});tt.register(Ta,Ra);class La extends le{constructor(){super();l(this,"MODULE",A.ANIMATION),l(this,"target",{}),l(this,"engine"),l(this,"objectMapSet",new Set),l(this,"scriptAniSymbol","vis.scriptAni")}linkObjectMap(...e){for(const t of e)this.objectMapSet.has(t)||this.objectMapSet.add(t);return this}linkTextureMap(e){return this.objectMapSet.add(e),this}linkMaterialMap(e){return this.objectMapSet.add(e),this}getObject(e){for(const t of this.objectMapSet)if(t.has(e))return t.get(e);return console.error(`animation compiler can not found object which vid: ${e}`),{}}add(e,t){const i=this.engine.renderManager;let r=this.getObject(t.target);const o=t.attribute.split(".");o.shift();const n=o.pop();for(const a of o){if(r[a]===void 0){console.error(`animaton compiler: target object can not found key: ${a}`,r);break}r=r[a]}if(t.type===d.SCRIPTANIMATION){const a=tt.generateScript(this.engine,r,n,t.script);t[Symbol.for(this.scriptAniSymbol)]=a,i.addEventListener("render",a)}else console.warn(`animation compiler can not support this type config: ${t.type}`);return this}update(e){return this.remove(this.target[e]).add(e,this.target[e])}remove(e){return e.type===d.SCRIPTANIMATION&&this.engine.renderManager.removeEventListener("render",e[Symbol.for(this.scriptAniSymbol)]),this}setTarget(e){return this.target=e,this}useEngine(e){return this.engine=e,this}compileAll(){for(const e of Object.values(this.target))this.add(e.vid,e);return this}dispose(e){for(const t of Object.values(this.target))this.remove(t);return this}getObjectSymbol(e){return null}getObjectBySymbol(e){return null}}const Oa={name:"openWindow",params:{url:""}},Da=function(s,e){return()=>{window.open(e.params.url)}};var ye={Linear:{None:function(s){return s}},Quadratic:{In:function(s){return s*s},Out:function(s){return s*(2-s)},InOut:function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)}},Cubic:{In:function(s){return s*s*s},Out:function(s){return--s*s*s+1},InOut:function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)}},Quartic:{In:function(s){return s*s*s*s},Out:function(s){return 1- --s*s*s*s},InOut:function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)}},Quintic:{In:function(s){return s*s*s*s*s},Out:function(s){return--s*s*s*s*s+1},InOut:function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)}},Sinusoidal:{In:function(s){return 1-Math.cos(s*Math.PI/2)},Out:function(s){return Math.sin(s*Math.PI/2)},InOut:function(s){return .5*(1-Math.cos(Math.PI*s))}},Exponential:{In:function(s){return s===0?0:Math.pow(1024,s-1)},Out:function(s){return s===1?1:1-Math.pow(2,-10*s)},InOut:function(s){return s===0?0:s===1?1:(s*=2)<1?.5*Math.pow(1024,s-1):.5*(-Math.pow(2,-10*(s-1))+2)}},Circular:{In:function(s){return 1-Math.sqrt(1-s*s)},Out:function(s){return Math.sqrt(1- --s*s)},InOut:function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)}},Elastic:{In:function(s){return s===0?0:s===1?1:-Math.pow(2,10*(s-1))*Math.sin((s-1.1)*5*Math.PI)},Out:function(s){return s===0?0:s===1?1:Math.pow(2,-10*s)*Math.sin((s-.1)*5*Math.PI)+1},InOut:function(s){return s===0?0:s===1?1:(s*=2,s<1?-.5*Math.pow(2,10*(s-1))*Math.sin((s-1.1)*5*Math.PI):.5*Math.pow(2,-10*(s-1))*Math.sin((s-1.1)*5*Math.PI)+1)}},Back:{In:function(s){var e=1.70158;return s*s*((e+1)*s-e)},Out:function(s){var e=1.70158;return--s*s*((e+1)*s+e)+1},InOut:function(s){var e=1.70158*1.525;return(s*=2)<1?.5*(s*s*((e+1)*s-e)):.5*((s-=2)*s*((e+1)*s+e)+2)}},Bounce:{In:function(s){return 1-ye.Bounce.Out(1-s)},Out:function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},InOut:function(s){return s<.5?ye.Bounce.In(s*2)*.5:ye.Bounce.Out(s*2-1)*.5+.5}}},Bt;typeof self=="undefined"&&typeof process!="undefined"&&process.hrtime?Bt=function(){var s=process.hrtime();return s[0]*1e3+s[1]/1e6}:typeof self!="undefined"&&self.performance!==void 0&&self.performance.now!==void 0?Bt=self.performance.now.bind(self.performance):Date.now!==void 0?Bt=Date.now:Bt=function(){return new Date().getTime()};var bt=Bt,Pa=function(){function s(){this._tweens={},this._tweensAddedDuringUpdate={}}return s.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},s.prototype.removeAll=function(){this._tweens={}},s.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},s.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},s.prototype.update=function(e,t){e===void 0&&(e=bt()),t===void 0&&(t=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var o=this._tweens[i[r]],n=!t;o&&o.update(e,n)===!1&&!t&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},s}(),Ht={Linear:function(s,e){var t=s.length-1,i=t*e,r=Math.floor(i),o=Ht.Utils.Linear;return e<0?o(s[0],s[1],i):e>1?o(s[t],s[t-1],t-i):o(s[r],s[r+1>t?t:r+1],i-r)},Bezier:function(s,e){for(var t=0,i=s.length-1,r=Math.pow,o=Ht.Utils.Bernstein,n=0;n<=i;n++)t+=r(1-e,i-n)*r(e,n)*s[n]*o(i,n);return t},CatmullRom:function(s,e){var t=s.length-1,i=t*e,r=Math.floor(i),o=Ht.Utils.CatmullRom;return s[0]===s[t]?(e<0&&(r=Math.floor(i=t*(1+e))),o(s[(r-1+t)%t],s[r],s[(r+1)%t],s[(r+2)%t],i-r)):e<0?s[0]-(o(s[0],s[0],s[1],s[1],-i)-s[0]):e>1?s[t]-(o(s[t],s[t],s[t-1],s[t-1],i-t)-s[t]):o(s[r?r-1:0],s[r],s[t<r+1?t:r+1],s[t<r+2?t:r+2],i-r)},Utils:{Linear:function(s,e,t){return(e-s)*t+s},Bernstein:function(s,e){var t=Ht.Utils.Factorial;return t(s)/t(e)/t(s-e)},Factorial:function(){var s=[1];return function(e){var t=1;if(s[e])return s[e];for(var i=e;i>1;i--)t*=i;return s[e]=t,t}}(),CatmullRom:function(s,e,t,i,r){var o=(t-s)*.5,n=(i-e)*.5,a=r*r,h=r*a;return(2*e-2*t+o+n)*h+(-3*e+3*t-2*o-n)*a+o*r+e}}},ja=function(){function s(){}return s.nextId=function(){return s._nextId++},s._nextId=0,s}(),Hi=new Pa,Te=function(){function s(e,t){t===void 0&&(t=Hi),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ye.Linear.None,this._interpolationFunction=Ht.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=ja.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return s.prototype.getId=function(){return this._id},s.prototype.isPlaying=function(){return this._isPlaying},s.prototype.isPaused=function(){return this._isPaused},s.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),t!==void 0&&(this._duration=t),this},s.prototype.duration=function(e){return this._duration=e,this},s.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var t in this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e!==void 0?typeof e=="string"?bt()+parseFloat(e):e:bt(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},s.prototype._setupProperties=function(e,t,i,r){for(var o in i){var n=e[o],a=Array.isArray(n),h=a?"array":typeof n,c=!a&&Array.isArray(i[o]);if(!(h==="undefined"||h==="function")){if(c){var m=i[o];if(m.length===0)continue;m=m.map(this._handleRelativeValue.bind(this,n)),i[o]=[n].concat(m)}if((h==="object"||a)&&n&&!c){t[o]=a?[]:{};for(var y in n)t[o][y]=n[y];r[o]=a?[]:{},this._setupProperties(n,t[o],i[o],r[o])}else typeof t[o]=="undefined"&&(t[o]=n),a||(t[o]*=1),c?r[o]=i[o].slice().reverse():r[o]=t[o]||0}}},s.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},s.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},s.prototype.pause=function(e){return e===void 0&&(e=bt()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},s.prototype.resume=function(e){return e===void 0&&(e=bt()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},s.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},s.prototype.group=function(e){return this._group=e,this},s.prototype.delay=function(e){return this._delayTime=e,this},s.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},s.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},s.prototype.yoyo=function(e){return this._yoyo=e,this},s.prototype.easing=function(e){return this._easingFunction=e,this},s.prototype.interpolation=function(e){return this._interpolationFunction=e,this},s.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},s.prototype.onStart=function(e){return this._onStartCallback=e,this},s.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},s.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},s.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},s.prototype.onStop=function(e){return this._onStopCallback=e,this},s.prototype.update=function(e,t){if(e===void 0&&(e=bt()),t===void 0&&(t=!0),this._isPaused)return!0;var i,r,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=this._duration===0||r>1?1:r;var n=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,n),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),r===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},s.prototype._updateProperties=function(e,t,i,r){for(var o in i)if(t[o]!==void 0){var n=t[o]||0,a=i[o],h=Array.isArray(e[o]),c=Array.isArray(a),m=!h&&c;m?e[o]=this._interpolationFunction(a,r):typeof a=="object"&&a?this._updateProperties(e[o],n,a,r):(a=this._handleRelativeValue(n,a),typeof a=="number"&&(e[o]=n+(a-n)*r))}},s.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},s.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},s}(),Re=Hi;Re.getAll.bind(Re);Re.removeAll.bind(Re);Re.add.bind(Re);Re.remove.bind(Re);Re.update.bind(Re);var st;(function(s){s.ELN="ELN",s.EQI="EQI",s.EQO="EQO",s.EASING_LINEAR_NONE="EASING_LINEAR_NONE",s.EASING_QUARTIC_IN="EASING_QUARTIC_IN",s.EASING_QUARTIC_OUT="EASING_QUARTIC_OUT",s.EASING_QUARTIC_INOUT="EASING_QUARTIC_INOUT"})(st||(st={}));const Le={ELN:ye.Linear.None,EQI:ye.Quartic.In,EQO:ye.Quartic.Out,EASING_LINEAR_NONE:ye.Linear.None,EASING_QUARTIC_IN:ye.Quartic.In,EASING_QUARTIC_OUT:ye.Quartic.Out,EASING_QUARTIC_INOUT:ye.Quartic.InOut},Ia={name:"moveTo",params:{target:"",position:{x:0,y:0,z:0},delay:0,duration:1e3,timingFunction:st.EASING_QUARTIC_IN}},Na=function(s,e){const t=e.params,r=s.compilerManager.getObjectBySymbol(t.target);if(!r)return console.warn(`real time animation moveTO: can not found vid object: ${t.target}`),()=>{};const o=s.renderManager,n=s.dataSupportManager.getConfigBySymbol(t.target);return n?()=>{const a=new Te(r.position).to(t.position).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start(),h=c=>{a.update()};o.addEventListener("render",h),a.onComplete(()=>{o.removeEventListener("render",h),n.position.x=t.position.x,n.position.y=t.position.y,n.position.z=t.position.z})}:(console.warn(`can not found object config: ${t.target}`),()=>{})},Ba={name:"moveSpacing",params:{target:"",spacing:{x:10,y:10,z:10},delay:0,duration:1e3,timingFunction:st.EASING_QUARTIC_IN}},Ha=function(s,e){const t=e.params,i=s.getObjectBySymbol(t.target);if(!i)return console.warn(`can not found vid object: ${t.target}`),()=>{};const r=s.renderManager,o=s.getConfigBySymbol(t.target);return()=>{const n={x:i.position.x+t.spacing.x,y:i.position.y+t.spacing.y,z:i.position.z+t.spacing.z},a=new Te(i.position).to(n).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start(),h=c=>{a.update()};r.addEventListener("render",h),a.onComplete(()=>{r.removeEventListener("render",h),o.position.x=n.x,o.position.y=n.y,o.position.z=n.z})}},za={name:"vector3To",params:{target:"",attribute:".position",props:{x:"x",y:"y",z:"z"},delay:0,duration:500,to:{},timingFunction:st.EASING_QUARTIC_IN}},ka=function(s,e){var t,i,r;const o=e.params,n=s.compilerManager.getObjectBySymbol(o.target);if(!n)return console.warn(`real time animation vector3To: can not found vid object: ${o.target}`),()=>{};const a=s.renderManager;let h=s.dataSupportManager.getConfigBySymbol(o.target);if(!h)return console.warn(`real time animation vector3To: can not found object config: ${o.target}`),()=>{};const c=o.attribute.split(".");c.shift();let m=n;for(const x of c){if(m[x]===void 0)return console.error(`real time animation vector3To: object can not support key: ${x}`,n),()=>{};m=m[x],h=h[x]}const y=o.props;if(!(y.x in m)||!(y.y in m)||!(y.z in m))return console.error("real time animation vector3To: object can not support props:",m,y),()=>{};if(!(y.x in h)||!(y.y in h)||!(y.z in h))return console.error("real time animation vector3To: config can not support props:",h,y),()=>{};const S={x:(t=o.to.x)!=null?t:m[y.x],y:(i=o.to.y)!=null?i:m[y.y],z:(r=o.to.z)!=null?r:m[y.z]};return()=>{const x=new Te(m).to(S).duration(o.duration).delay(o.delay).easing(Le[o.timingFunction]).start(),E=w=>{x.update()};a.addEventListener("render",E),x.onComplete(()=>{a.removeEventListener("render",E),h[y.x]=S.x,h[y.y]=S.y,h[y.z]=S.z})}},Ga={name:"foucsObject",params:{target:"",space:"world",offset:{x:0,y:0,z:20},delay:0,duration:1e3,timingFunction:st.EASING_QUARTIC_IN,back:!0}},Ua=function(s,e){const t=e.params,i=s.getObjectBySymbol(t.target),r=s.camera,o=s.getObjectConfig(r),n=s.orbitControls&&s.orbitControls.object===r,a=s.orbitControls.target;return i?(o||console.warn("engine current camera can not found config."),()=>{const h=s.renderManager;let c={x:i.position.x+t.offset.x,y:i.position.y+t.offset.y,z:i.position.z+t.offset.z};const m={x:r.position.x,y:r.position.y,z:r.position.z};if(t.space==="local"){const u=new O(t.offset.x,t.offset.y,t.offset.z).applyEuler(i.rotation);c={x:i.position.x+u.x,y:i.position.y+u.y,z:i.position.z+u.z}}const y=new Te(r.position).to(c).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start();let S;const x={x:r.up.x,y:r.up.y,z:r.up.z};if(t.space==="local"){const u=new O(0,1,0).applyEuler(i.rotation);S=new Te(r.up).to({x:u.x,y:u.y,z:u.z}).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start()}let E;const w={x:a.x,y:a.y,z:a.z};n&&(E=new Te(a).to(i.position).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start());let C;n&&t.space==="local"?C=u=>{y.update(),S.update(),E.update()}:n?C=u=>{y.update(),E.update()}:t.space==="local"?C=u=>{y.update(),S.update()}:C=u=>{y.update()},h.addEventListener("render",C),y.onComplete(()=>{if(h.removeEventListener("render",C),o&&(o.position.x=c.x,o.position.y=c.y,o.position.z=c.z),t.back){const u=()=>{const b=new Te(r.position).to(m).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start();let p;t.space==="local"&&(p=new Te(r.up).to(x).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start());let f;n&&(f=new Te(a).to(w).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start());const g=M=>{b.update(),p&&p.update(),f&&f.update()};b.onComplete(()=>{h.removeEventListener("render",g)}),h.addEventListener("render",g),document.removeEventListener("dblclick",u)};document.addEventListener("dblclick",u)}})}):(console.warn(`real time animation focusObject: can not found vid object: ${t.target}`),()=>{})},Fa={name:"fadeObject",params:{target:"",direction:"out",delay:0,duration:1e3,timingFunction:st.EASING_QUARTIC_IN,visible:!1}},Wa=function(s,e){const t=e.params,i=s.getObjectBySymbol(t.target);if(!i)return console.warn(`real time animation fadeObject: can not found vid object: ${t.target}`),()=>{};const r=s.getObjectConfig(i);if(!r.material)return console.warn(`real time animation fadeObject: target can not support fade: ${t.target}`),()=>{};const o=[],n=[],a=Array.isArray(r.material)?[].concat(r.material):[r.material];for(const h of a){const c=s.getObjectBySymbol(h),m=s.getConfigBySymbol(h);if(!(c instanceof Ft)){console.error(`real time animation fadeObject: object config material is not instanceof Material: ${h}`);continue}if(!m){console.error(`real time animation fadeObject: object config material can not found config: ${h}`);continue}o.push(c),n.push(m)}return()=>{const h=s.renderManager;o.forEach((c,m,y)=>{c.transparent=!0,c.opacity=t.direction==="in"?0:1,c.needsUpdate=!0;const S=new Te(c).to({opacity:t.direction==="in"?1:0}).duration(t.duration).delay(t.delay).easing(Le[t.timingFunction]).start(),x=E=>{S.update()};h.addEventListener("render",x),S.onComplete(()=>{h.removeEventListener("render",x),t.direction==="out"&&t.visible?n[m].visible=!1:t.direction==="in"&&t.visible&&(n[m].visible=!0),n[m].opacity=t.direction==="in"?1:0})})}},He=class{static generateConfig(s,e){if(!He.configLibrary.has(s))return console.warn(`event library can not found config by name: ${s}`),{name:""};const t=(r,o)=>{for(const n in o)typeof o[n]=="object"&&o[n]!==null&&!Array.isArray(o[n])?t(r[n],o[n]):r[n]=o[n]},i=JSON.parse(JSON.stringify(He.configLibrary.get(s)));return t(i,e),i}static generateEvent(s,e){return He.generatorLibrary.has(s.name)?He.generatorLibrary.get(s.name)(e,s):(console.error(`event library can not found generator by name: ${s.name}`),()=>{})}static has(s){return He.configLibrary.has(s)}};let pe=He;l(pe,"configLibrary",new Map);l(pe,"generatorLibrary",new Map);l(pe,"register",function(s,e){He.configLibrary.has(s.name)&&console.warn(`EventLibrary has already exist this event generator: ${s.name}, that will be cover.`),He.configLibrary.set(s.name,JSON.parse(JSON.stringify(s))),He.generatorLibrary.set(s.name,e)});pe.register(Oa,Da);pe.register(Ia,Na);pe.register(Ba,Ha);pe.register(za,ka);pe.register(Ga,Ua);pe.register(Fa,Wa);const zt=class extends le{constructor(){super();l(this,"IS_OBJECTCOMPILER",!0),l(this,"target"),l(this,"map"),l(this,"weakMap"),l(this,"objectCacheMap"),l(this,"objectMapSet"),l(this,"filterAttribute",{lookAt:!0,parent:!0,children:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointerenter:!0,pointerleave:!0,click:!0,dblclick:!0,contextmenu:!0}),l(this,"engine"),this.map=new Map,this.weakMap=new WeakMap,this.objectMapSet=new Set,this.objectCacheMap=new WeakMap}getObject(s){for(const e of this.objectMapSet)if(e.has(s))return e.get(s);return null}mergeFilterAttribute(s){const e=(t,i)=>{for(const r in i){if(t[r]===void 0){t[r]=i[r];continue}typeof i[r]=="object"?e(t[r],i[r]):t[r]=i[r]}};return e(this.filterAttribute,s),this}setLookAt(s,e){if(s===e)return console.error("can not set object lookAt itself."),this;if(!this.map.has(s))return console.error(`${this.MODULE}Compiler: can not found object which vid: ${s}.`),this;const t=this.map.get(s);let i=this.objectCacheMap.get(t);if(i||(i={lookAtTarget:null,updateMatrixWorldFun:null},this.objectCacheMap.set(t,i)),!e)return i.updateMatrixWorldFun?(t.updateMatrixWorld=i.updateMatrixWorldFun,i.lookAtTarget=null,i.updateMatrixWorldFun=null,this):this;const r=this.getObject(e);if(!r)return console.warn(`${this.MODULE}Compiler: can not found this vid mapping object: '${s}'`),this;const o=t.updateMatrixWorld;return i.updateMatrixWorldFun=o,i.lookAtTarget=r.position,t.updateMatrixWorld=n=>{o.bind(t)(n),t.lookAt(i.lookAtTarget)},this}addEvent(s,e,t){if(!this.map.has(s))return console.warn(`${this.MODULE} compiler : No matching vid found: ${s}`),this;if(!pe.has(t.name))return console.warn(`${this.MODULE} compiler: can not support this event: ${t.name}`),this;const i=this.map.get(s),r=pe.generateEvent(t,this.engine),o=Symbol.for(zt.eventSymbol);return t[o]=r,i.addEventListener(e,r),this}removeEvent(s,e,t){if(!this.map.has(s))return console.warn(`${this.MODULE} compiler: No matching vid found: ${s}`),this;const i=this.map.get(s),r=t[Symbol.for(zt.eventSymbol)];return r?(i.removeEventListener(e,r),delete t[Symbol.for(zt.eventSymbol)],this):(console.warn(`${this.MODULE} compiler: event remove can not fun found event in config`,t),this)}updateEvent(s,e,t){if(!this.map.has(s))return console.warn(`${this.MODULE} compiler: No matching vid found: ${s}`),this;const i=this.map.get(s),r=Symbol.for(zt.eventSymbol),o=this.target[s][e][t],n=o[r];if(!n)return console.warn(`${this.MODULE} compiler: can not fun found event: ${s}, ${e}, ${t}`),this;i.removeEventListener(e,n);const a=pe.generateEvent(o,this.engine);return o[r]=n,i.addEventListener(e,a),this}addChildren(s,e){if(!this.map.has(s))return console.warn(`${this.MODULE} compiler: can not found this vid in compiler: ${s}.`),this;const t=this.map.get(s),i=this.getObject(e);if(!i)return console.warn(`${this.MODULE} compiler: can not found this vid in compiler: ${e}.`),this;t.add(i);const r=this.engine.getConfigBySymbol(e);return r?(r.parent=s,this):(console.warn(`${this.MODULE} compiler: can not foud object config: ${e}`),this)}removeChildren(s,e){if(!this.map.has(s))return console.warn(`${this.MODULE} compiler: can not found this vid in compiler: ${s}.`),this;const t=this.map.get(s),i=this.getObject(e);if(!i)return console.warn(`${this.MODULE} compiler: can not found this vid in compiler: ${e}.`),this;t.remove(i);const r=this.engine.getConfigBySymbol(e);return r?(r.parent="",this):(console.warn(`${this.MODULE} compiler: remove children function can not foud object config: ${e}`),this)}linkObjectMap(...s){for(const e of s)this.objectMapSet.has(e)||this.objectMapSet.add(e);return this}useEngine(s){return this.engine=s,this}setTarget(s){return this.target=s,this}getMap(){return this.map}getObjectSymbol(s){return this.weakMap.get(s)||null}getObjectBySymbol(s){return this.map.get(s)||null}compileAll(){const s=this.target;for(const e in s)this.add(e,s[e]);return this}add(s,e){const t=this.map.get(s);return t?(Promise.resolve().then(()=>{if(this.setLookAt(s,e.lookAt),e.children.length)for(const r of e.children)this.addChildren(s,r);for(const r of Object.values(Dt)){const o=e[r];if(o.length)for(const n of o)this.addEvent(s,r,n)}}),le.applyConfig(e,t,this.filterAttribute),t.updateMatrix(),t.updateMatrixWorld(),this):(console.error(`${this.MODULE} compiler can not finish add method.`),this)}set(s,e,t,i){if(!this.map.has(s))return console.warn(`${this.MODULE} compiler can not found this vid mapping object: '${s}'`),this;if(t==="lookAt")return this.setLookAt(s,i);let r=this.map.get(s),o=this.filterAttribute;for(const n of e){if(o[n]){if(o[n]===!0)return this;o=o[n]}r=r[n]}return r[t]=i,this}cover(s,e){const t=this.map.get(s);return t?(Promise.resolve().then(()=>{if(this.setLookAt(s,e.lookAt),e.children.length)for(const r of e.children)this.addChildren(s,r);for(const r of Object.values(Dt)){t._listeners&&t._listeners[r]&&(t._listeners[r]=[]);const o=e[r];if(o.length)for(const n of o)this.addEvent(s,r,n)}}),le.applyConfig(e,t,this.filterAttribute),this):(console.error(`${this.MODULE} compiler can not found object: ${s}.`),this)}remove(s,e){if(!this.map.has(s))return console.warn(`${this.MODULE}Compiler: can not found object which vid: ${s}.`),this;if(e.parent){const i=this.engine.getConfigBySymbol(e.parent);i?i.children.includes(s)?i.children.splice(i.children.indexOf(s),1):console.warn(`${this.MODULE} compiler: can not found vid in its parent config: ${s}`):console.warn(`${this.MODULE} compiler: can not found parent object config: ${e.parent}`)}const t=this.map.get(s);return this.weakMap.delete(t),this.objectCacheMap.delete(this.map.get(s)),this.map.delete(s),this}dispose(){return this.map.clear(),this.objectMapSet.clear(),this}};let Xe=zt;l(Xe,"eventSymbol","vis.event");class Ka extends Xe{constructor(){super();l(this,"MODULE",A.CAMERA),l(this,"constructMap"),l(this,"cacheCameraMap");const e=new Map;e.set("PerspectiveCamera",()=>new se),e.set("OrthographicCamera",()=>new he(-50,50,50,-50)),this.constructMap=e,this.mergeFilterAttribute({scale:!0,adaptiveWindow:!0}),this.cacheCameraMap=new WeakMap}setAdaptiveWindow(e,t){if(!this.map.has(e))return console.warn(`camera compiler can not found this vid camera: '${e}'`),this;const i=this.map.get(e);let r=this.cacheCameraMap.get(i);if(r||(r={},this.cacheCameraMap.set(i,r)),!t){if(r.setSizeFun&&this.engine.hasEventListener("setSize",r.setSizeFun))return this.engine.removeEventListener("setSize",r.setSizeFun),r.setSizeFun=void 0,this;if(r.setSizeFun&&!this.engine.hasEventListener("setSize",r.setSizeFun))return r.setSizeFun=void 0,this}if(t){if(r.setSizeFun&&this.engine.hasEventListener("setSize",r.setSizeFun))return this;if(r.setSizeFun&&!this.engine.hasEventListener("setSize",r.setSizeFun))return this.engine.addEventListener("setSize",r.setSizeFun),this;let o=a=>{};i instanceof se?o=a=>{i.aspect=a.width/a.height,i.updateProjectionMatrix()}:i instanceof he?o=a=>{const h=a.width,c=a.height;i.left=-h/2,i.right=h/2,i.top=c/2,i.bottom=-c/2,i.updateProjectionMatrix()}:console.warn("camera compiler can not support this class camera:",i),this.engine.addEventListener("setSize",o),r.setSizeFun=o;const n=this.engine.dom;o({type:"setSize",width:n.offsetWidth,height:n.offsetHeight})}return this}add(e,t){if(t.type&&this.constructMap.has(t.type)){const i=this.constructMap.get(t.type)();this.map.set(e,i),this.weakMap.set(i,e),this.setLookAt(t.vid,t.lookAt),this.setAdaptiveWindow(t.vid,t.adaptiveWindow),super.add(e,t),(i instanceof se||i instanceof he)&&i.updateProjectionMatrix()}else console.warn(`CameraCompiler: can not support this config type: ${t.type}`);return this}cover(e,t){return this.setLookAt(t.vid,t.lookAt),this.setAdaptiveWindow(t.vid,t.adaptiveWindow),super.cover(e,t)}set(e,t,i,r){if(i==="adaptiveWindow")return this.setAdaptiveWindow(e,r);super.set(e,t,i,r);const o=this.map.get(e);return o&&(o instanceof se||o instanceof he)&&o.updateProjectionMatrix(),this}dispose(){return super.dispose(),this}}class Is{constructor(){l(this,"filterMap",{}),l(this,"assembly",!1),this.filterMap=Object.assign({vid:!0,type:!0},this.filterMap)}mergeAttribute(e,t,i){if(this.filterMap[e.concat([t]).join(".")])return;let r=this.target;if(e.length)for(const o of e)r=r[o];r[t]=i}mergeObject(e){const t=(i,r)=>{for(const o in i)if(!this.filterMap[o]){if(typeof i[o]=="object"&&typeof i[o]!==null){t(i[o],r[o]);continue}r[o]=i[o]}};t(this.config,this.target),e&&e()}processAll(){const e=(t,i)=>{for(const r in t)if(!this.filterMap[i.concat([r]).join(".")]){if(typeof t[r]=="object"&&typeof t[r]!==null){e(t[r],i.concat([r]));continue}this.process({path:i,key:r,value:t[r]})}};return e(this.config,[]),this}}class Xa extends Is{constructor(){super();l(this,"config"),l(this,"target"),l(this,"engine")}assemble(e){return this.config=e.config,this.target=e.control,this.engine=e.engine,this.assembly=!0,this}process(e){return this.assembly?e.key==="target"||e.path.length&&e.path[0]==="target"?(this.setTarget(this.config.target),this):(this.mergeAttribute([],e.key,e.value),this):(console.warn("OrbitControls Processor unassembled"),this)}setTarget(e){typeof e=="object"&&e!==null&&(this.target.target=new O(e.x,e.y,e.z))}dispose(){return this.config=void 0,this.target=void 0,this.assembly=!1,this}}class Va extends Is{constructor(){super();l(this,"config"),l(this,"target"),l(this,"filterMap",{translationSnap:!0,rotationSnap:!0,scaleSnap:!0})}assemble(e){return this.config=e.config,this.target=e.control,this.assembly=!0,this}process(e){return this.assembly?this.filterMap[e.key]?this:this[e.key]?(this[e.key](e.value),this):(this.mergeAttribute([],e.key,e.value),this):(console.warn("transformControls Processor unassembled"),this)}dispose(){return this.config=void 0,this.target=void 0,this}snapAllow(e){const t=this.config,i=this.target;return e?(i.translationSnap=t.translationSnap,i.rotationSnap=t.rotationSnap,i.scaleSnap=t.scaleSnap):(i.translationSnap=null,i.rotationSnap=null,i.scaleSnap=null),!0}}class Ya extends le{constructor(){super();l(this,"MODULE",A.CONTROLS),l(this,"target",{}),l(this,"map",new Map),l(this,"weakMap",new Map),l(this,"engine"),l(this,"processorMap",{[d.TRNASFORMCONTROLS]:new Va,[d.ORBITCONTROLS]:new Xa})}getAssembly(e){const t=this.target[e];if(!t)return console.warn(`controls compiler can not found this config: '${e}'`),null;const i=this.processorMap[t.type];if(!i)return console.warn(`controls compiler can not support this controls: '${e}'`),null;const r=this.map.get(t.type);return r?{config:t,processer:i,control:r}:(console.warn(`controls compiler can not found type of control: '${t.type}'`),null)}set(e,t,i,r){const o=this.getAssembly(e);return o?(o.processer.assemble({config:o.config,control:o.control,engine:this.engine}).process({key:i,path:t,value:r}),this):this}setAll(e){const t=this.getAssembly(e);return t?(t.processer.assemble({config:t.config,control:t.control,engine:this.engine}).processAll().dispose(),this):this}setTarget(e){return this.target=e,this}useEngine(e){return e.transformControls&&(this.map.set(d.TRNASFORMCONTROLS,e.transformControls),this.weakMap.set(e.transformControls,d.TRNASFORMCONTROLS)),e.orbitControls&&(this.map.set(d.ORBITCONTROLS,e.orbitControls),this.weakMap.set(e.orbitControls,d.ORBITCONTROLS)),this.engine=e,this}compileAll(){for(const e of Object.keys(this.target)){const t=this.getAssembly(e);!t||t.processer.assemble({config:t.config,control:t.control,engine:this.engine}).processAll().dispose()}return this}dispose(){return this.map.forEach(e=>{e.dispose&&e.dispose()}),this.map.clear(),this}getObjectSymbol(e){return this.weakMap.get(e)||null}getObjectBySymbol(e){return this.map.get(e)||null}}class _a extends Qt{constructor(e=document.createElement("div")){super(e);l(this,"geometry");const t=e.getBoundingClientRect();this.geometry=new Ze(t.width,t.height),this.geometry.computeBoundingBox()}raycast(e,t){const i=this.matrixWorld,r=this.geometry.boundingBox.clone();r.applyMatrix4(i),e.ray.intersectsBox(r)&&t.push({distance:e.ray.origin.distanceTo(this.position),object:this,point:this.position})}}class Qa extends Xe{constructor(){super();l(this,"MODULE",A.CSS3D),l(this,"resourceMap"),l(this,"constructMap"),this.constructMap=new Map,this.resourceMap=new Map,this.constructMap.set(d.CSS3DOBJECT,e=>new Qt(this.getElement(e.element))),this.constructMap.set(d.CSS3DPLANE,e=>new _a(this.getElement(e.element))),this.constructMap.set(d.CSS3DSPRITE,e=>new Ai(this.getElement(e.element))),this.mergeFilterAttribute({element:!0,interactive:!0})}getElement(e){if(!this.resourceMap.has(e))return console.warn(`css3D compiler: can not found resource element: ${e}`),document.createElement("div");const t=this.resourceMap.get(e);return t instanceof HTMLElement?t:(console.warn("css3D compiler can not suport render this resource type.",t.constructor,e),document.createElement("div"))}linkRescourceMap(e){return this.resourceMap=e,this}add(e,t){if(t.type&&this.constructMap.has(t.type)){const i=this.constructMap.get(t.type)(t);i.type=t.type,this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t)}else console.warn(`css3D compiler can not support this type: ${t.type}`);return this}set(e,t,i,r){if(!this.map.has(e))return console.warn(`css3D compiler: can not found this vid mapping object: '${e}'`),this;const o=this.map.get(e);return i==="element"?(o.element=this.getElement(r),this):(super.set(e,t,i,r),this)}}class Za extends re{constructor(e){super();l(this,"type","LoadBufferGeometry"),e&&this.copy(e)}}class as extends re{constructor(e,t=36,i=!0){super();l(this,"parameters"),this.type="CurveGeometry",this.parameters={path:e.map(r=>r.clone()),space:i,divisions:t}}}class qa extends as{constructor(e,t=36,i=!0){super(e,t,i);this.type="LineCurveGeometry";const r=new vs;for(let n=1;n<e.length;n+=1)r.add(new _r(e[n-1],e[n]));const o=r.curves.reduce((n,a)=>n+=a.arcLengthDivisions,0);if(t>o){const n=Math.ceil((t-o)/r.curves.length);r.curves.forEach(a=>{a.arcLengthDivisions=a.arcLengthDivisions*(n+1),a.updateArcLengths()})}this.setFromPoints(i?r.getSpacedPoints(t):r.getPoints(t))}}class Ja extends as{constructor(e,t=36,i=!0){super(e,t,i);this.type="SplineCurveGeometry";const r=new Qr(e);this.setFromPoints(i?r.getSpacedPoints(t):r.getPoints(t))}}class $a extends as{constructor(e,t=36,i=!0){super(e,t,i);this.type="CubicBezierCurveGeometry";const r=new vs;e.length<4&&console.error("CubicBezierCurveGeometry path length at least 4.");const o=4+(e.length-4)-(e.length-4)%3;for(let a=2;a<o;a+=3)r.add(new Zr(e[a-2],e[a-1],e[a],e[a+1]));const n=r.curves.reduce((a,h)=>a+=h.arcLengthDivisions,0);if(t>n){const a=Math.ceil((t-n)/r.curves.length);r.curves.forEach(h=>{h.arcLengthDivisions=h.arcLengthDivisions*(a+1),h.updateArcLengths()})}this.setFromPoints(i?r.getSpacedPoints(t):r.getPoints(t))}}class el extends as{constructor(e,t=36,i=!0){super(e,t,i);this.type="QuadraticBezierCurveGeometry";const r=new vs;e.length<3&&console.error("QuadraticBezierCurveGeometry path length at least 3.");const o=3+(e.length-3)-(e.length-3)%2;for(let a=1;a<o;a+=2)r.add(new qr(e[a-1],e[a],e[a+1]));const n=r.curves.reduce((a,h)=>a+=h.arcLengthDivisions,0);if(t>n){const a=Math.ceil((t-n)/r.curves.length);r.curves.forEach(h=>{h.arcLengthDivisions=h.arcLengthDivisions*(a+1),h.updateArcLengths()})}this.setFromPoints(i?r.getSpacedPoints(t):r.getPoints(t))}}const ce=class extends le{constructor(){super();l(this,"MODULE",A.GEOMETRY),l(this,"target",{}),l(this,"map",new Map),l(this,"weakMap",new WeakMap),l(this,"constructMap"),l(this,"resourceMap",new Map),l(this,"replaceGeometry",new K(5,5,5));const s=new Map;s.set(d.BOXGEOMETRY,e=>ce.transfromAnchor(new K(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments),e)),s.set(d.SPHEREGEOMETRY,e=>ce.transfromAnchor(new ps(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength),e)),s.set(d.PLANEGEOMETRY,e=>ce.transfromAnchor(new Ze(e.width,e.height,e.widthSegments,e.heightSegments),e)),s.set(d.LOADGEOMETRY,e=>ce.transfromAnchor(new Za(this.getGeometry(e.url)),e)),s.set(d.CIRCLEGEOMETRY,e=>ce.transfromAnchor(new Xr(e.radius,e.segments,e.thetaStart,e.thetaLength),e)),s.set(d.CONEGEOMETRY,e=>ce.transfromAnchor(new Vr(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength),e)),s.set(d.CYLINDERGEOMETRY,e=>ce.transfromAnchor(new te(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength),e)),s.set(d.EDGESGEOMETRY,e=>ce.transfromAnchor(new ht(this.map.get(e.url),e.thresholdAngle),e)),s.set(d.LINECURVEGEOMETRY,e=>ce.transfromAnchor(new qa(e.path.map(t=>new O(t.x,t.y,t.z)),e.divisions,e.space),e)),s.set(d.SPLINECURVEGEOMETRY,e=>ce.transfromAnchor(new Ja(e.path.map(t=>new O(t.x,t.y,t.z)),e.divisions,e.space),e)),s.set(d.CUBICBEZIERCURVEGEOMETRY,e=>ce.transfromAnchor(new $a(e.path.map(t=>new O(t.x,t.y,t.z)),e.divisions,e.space),e)),s.set(d.QUADRATICBEZIERCURVEGEOMETRY,e=>ce.transfromAnchor(new el(e.path.map(t=>new O(t.x,t.y,t.z)),e.divisions,e.space),e)),this.constructMap=s}linkRescourceMap(s){return this.resourceMap=s,this}getRescource(s){return this.resourceMap.has(s)?this.resourceMap.has(s)&&this.resourceMap.get(s)instanceof re?this.resourceMap.get(s).clone():(console.error(`url mapping rescource is not class with BufferGeometry: ${s}`),this.replaceGeometry.clone()):(console.error(`rescoure can not found url: ${s}`),this.replaceGeometry.clone())}getGeometry(s){return this.map.has(s)?this.map.get(s):this.getRescource(s)}getMap(){return this.map}useEngine(s){return this}setTarget(s){return this.target=s,this}add(s,e){if(e.type&&this.constructMap.has(e.type)){const t=this.constructMap.get(e.type)(e);t.clearGroups();for(const i of e.groups)t.addGroup(i.start,i.count,i.materialIndex);this.map.set(s,t),this.weakMap.set(t,s)}return this}addGroup(s,e){return this.map.has(s)?(this.map.get(s).addGroup(e.start,e.count,e.materialIndex),this):(console.warn(`geometry compiler can not found object with vid: ${s}`),this)}updateGroup(s,e){return this.removeGroup(s,e).addGroup(s,this.target[s].groups[e])}removeGroup(s,e){return this.map.has(s)?(this.map.get(s).groups.splice(e,1),this):(console.warn(`geometry compiler can not found object with vid: ${s}`),this)}set(s,e,t){if(!z(s))return console.warn(`geometry compiler set function vid parameters is illeage: '${s}'`),this;if(!this.map.has(s))return console.warn(`geometry compiler set function can not found vid geometry: '${s}'`),this;const i=this.map.get(s),r=this.target[s],o=this.constructMap.get(r.type)(r);return i.copy(o),i.dispatchEvent({type:"update"}),i.uuid=o.uuid,o.dispose(),this}remove(s){if(!this.map.has(s))return console.warn(`Geometry Compiler: can not found vid in compiler: ${s}`),this;const e=this.map.get(s);return e.dispose(),this.map.delete(s),this.weakMap.delete(e),this}compileAll(){const s=this.target;for(const e in s)this.add(e,s[e]);return this}dispose(){return this.map.forEach((s,e)=>{s.dispose()}),this}getObjectSymbol(s){return this.weakMap.get(s)||null}getObjectBySymbol(s){return this.map.get(s)||null}};let zi=ce;l(zi,"transfromAnchor",function(s,e){s.center(),s.computeBoundingBox();const t=s.boundingBox,i=e.position,r=e.rotation,o=e.scale,n=new ne().setFromEuler(new Ys(r.x,r.y,r.z,"XYZ"));return s.applyQuaternion(n),s.scale(o.x,o.y,o.z),s.center(),s.computeBoundingBox(),s.translate((t.max.x-t.min.x)/2*i.x,(t.max.y-t.min.y)/2*i.y,(t.max.z-t.min.z)/2*i.z),s});class tl extends Xe{constructor(){super();l(this,"MODULE",A.GROUP)}add(e,t){const i=new Zs;return this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t),this}dispose(){return super.dispose(),this}}class sl extends Xe{constructor(){super();l(this,"MODULE",A.LIGHT),l(this,"constructMap"),this.constructMap=new Map,this.constructMap.set(d.POINTLIGHT,()=>new $s),this.constructMap.set(d.SPOTLIGHT,()=>new Jr),this.constructMap.set(d.AMBIENTLIGHT,()=>new Wt),this.constructMap.set(d.DIRECTIONALLIGHT,()=>new ni),this.mergeFilterAttribute({color:!0,scale:!0,rotation:!0})}setLookAt(e,t){return this}add(e,t){if(t.type&&this.constructMap.has(t.type)){const i=this.constructMap.get(t.type)();i.color=new W(t.color),this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t)}else console.warn(`LightCompiler: can not support Light type: ${t.type}.`);return this}cover(e,t){const i=this.map.get(e);return i?(i.color=new W(t.color),super.cover(e,t)):(console.warn(`light compiler can not found light: ${e}`),this)}set(e,t,i,r){if(!this.map.has(e))return console.warn(`LightCompiler: can not found this vid mapping object: '${e}'`),this;const o=this.map.get(e);return i==="color"?(o.color=new W(r),this):(super.set(e,t,i,r),this)}dispose(){return super.dispose(),this}}class ls extends Xe{constructor(){super();l(this,"IS_SOLIDOBJECTCOMPILER",!0),l(this,"geometryMap"),l(this,"materialMap"),this.geometryMap=new Map,this.materialMap=new Map,this.mergeFilterAttribute({geometry:!0,material:!0})}getMaterial(e){return z(e)?this.materialMap.has(e)?this.materialMap.get(e):(console.warn(`${this.MODULE}Compiler: can not found material which vid: ${e}`),this.getReplaceMaterial()):(console.warn(`${this.MODULE}Compiler: material vid parameter is illegal: ${e}`),this.getReplaceMaterial())}getGeometry(e){return z(e)?this.geometryMap.has(e)?this.geometryMap.get(e):(console.warn(`${this.MODULE}Compiler: can not found geometry which vid: ${e}`),this.getReplaceGeometry()):(console.warn(`${this.MODULE}Compiler: geometry vid parameter is illegal: ${e}`),this.getReplaceGeometry())}linkGeometryMap(e){return this.geometryMap=e,this}linkMaterialMap(e){return this.materialMap=e,this}add(e,t){const i=this.map.get(e);if(!i)return console.error(`${this.MODULE} compiler can not finish add method.`),this;if(Array.isArray(i.material))for(const o of i.material)o.dispose();else i.material.dispose();let r;return typeof t.material=="string"?r=this.getMaterial(t.material):r=t.material.map(o=>this.getMaterial(o)),i.material=r,i.isSprite||(i.geometry.dispose(),i.geometry=this.getGeometry(t.geometry)),super.add(e,t),this}set(e,t,i,r){if(!this.map.has(e))return console.warn(`${this.MODULE} compiler can not found this vid mapping object: '${e}'`),this;const o=this.map.get(e);return i==="geometry"&&!o.isSprite?(o.geometry=this.getGeometry(r),this):i==="material"?(o.material=this.getMaterial(r),this):(super.set(e,t,i,r),this)}}class il extends ls{constructor(){super();l(this,"MODULE",A.LINE),l(this,"replaceMaterial",new je({color:"rgb(150, 150, 150)"})),l(this,"replaceGeometry",new K(10,10,10))}getReplaceMaterial(){return this.replaceMaterial}getReplaceGeometry(){return this.replaceGeometry}add(e,t){const i=new ue;return this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t),this}dispose(){return super.dispose(),this.replaceGeometry.dispose(),this.replaceMaterial.dispose(),this}}class rl extends le{constructor(){super();l(this,"MODULE",A.MATERIAL),l(this,"target",{}),l(this,"map",new Map),l(this,"weakMap",new WeakMap),l(this,"constructMap",new Map),l(this,"mapAttribute",{roughnessMap:!0,normalMap:!0,metalnessMap:!0,map:!0,lightMap:!0,envMap:!0,emissiveMap:!0,displacementMap:!0,bumpMap:!0,alphaMap:!0,aoMap:!0,specularMap:!0}),l(this,"colorAttribute",{color:!0,emissive:!0,specular:!0}),l(this,"shaderAttribute",{shader:!0}),l(this,"texturelMap",new Map),l(this,"resourceMap",new Map),l(this,"cachaColor",new W);const e=new Map;e.set(d.MESHBASICMATERIAL,()=>new lt),e.set(d.MESHSTANDARDMATERIAL,()=>new ei),e.set(d.MESHPHONGMATERIAL,()=>new gs),e.set(d.SPRITEMATERIAL,()=>new dt),e.set(d.LINEBASICMATERIAL,()=>new je),e.set(d.POINTSMATERIAL,()=>new ve),e.set(d.SHADERMATERIAL,t=>{const i=gt.getShader(t.shader),r=new be;return(i==null?void 0:i.vertexShader)&&(r.vertexShader=i.vertexShader),(i==null?void 0:i.fragmentShader)&&(r.fragmentShader=i.fragmentShader),(i==null?void 0:i.uniforms)&&(r.uniforms=i.uniforms),r}),this.constructMap=e}mergeMaterial(e,t){const i=JSON.parse(JSON.stringify(t)),r={},o=this.colorAttribute;for(const a in o)i[a]&&(e[a]=new W(i[a]),r[a]=!0);const n=this.mapAttribute;for(const a in n)i[a]&&(e[a]=this.getTexture(i[a]),r[a]=!0);return le.applyConfig(t,e,Object.assign(r,this.shaderAttribute)),e.needsUpdate=!0,this}getTexture(e){if(this.texturelMap.has(e)){const t=this.texturelMap.get(e);return t instanceof qe?t:(console.error(`this object which mapped by vid is not instance of Texture: ${e}`),null)}else return console.error(`texture map can not found this vid: ${e}`),null}linkRescourceMap(e){return this.resourceMap=e,this}linkTextureMap(e){return this.texturelMap=e,this}add(e,t){if(t.type&&this.constructMap.has(t.type)){const i=this.constructMap.get(t.type)(t);this.mergeMaterial(i,t),this.map.set(e,i),this.weakMap.set(i,e)}else console.warn(`material compiler can not support this type: ${t.type}`);return this}set(e,t,i,r){if(!this.map.has(e))return console.warn(`material compiler set function: can not found material which vid is: '${e}'`),this;const o=this.map.get(e);if(this.colorAttribute[i])return o[i]=new W(r),this;if(this.mapAttribute[i])return o[i]=this.getTexture(r),o.needsUpdate=!0,this;let n=o;return t.forEach((a,h,c)=>{n=n[a]}),n[i]=r,this}cover(e,t){return this.map.has(e)?this.mergeMaterial(this.map.get(e),t):(console.warn(`material compiler set function: can not found material which vid is: '${e}'`),this)}remove(e){if(!this.map.has(e))return console.warn(`material compiler set function: can not found material which vid is: '${e}'`),this;const t=this.map.get(e);return t.dispose(),this.map.delete(e),this.weakMap.delete(t),this}getMap(){return this.map}setTarget(e){return this.target=e,this}useEngine(e){return this}compileAll(){const e=this.target;for(const t in e)this.add(t,e[t]);return this}dispose(){return this.map.forEach((e,t)=>{e.dispose()}),this}getObjectSymbol(e){return this.weakMap.get(e)||null}getObjectBySymbol(e){return this.map.get(e)||null}}class nl extends ls{constructor(){super();l(this,"MODULE",A.MESH),l(this,"replaceMaterial",new lt({color:"rgb(150, 150, 150)"})),l(this,"replaceGeometry",new K(10,10,10))}getReplaceMaterial(){return this.replaceMaterial}getReplaceGeometry(){return this.replaceGeometry}add(e,t){const i=new L;return this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t),this}dispose(){return super.dispose(),this.replaceGeometry.dispose(),this.replaceMaterial.dispose(),this}}class ol extends le{constructor(){super();l(this,"MODULE",A.PASS),l(this,"target"),l(this,"map"),l(this,"weakMap"),l(this,"constructMap"),l(this,"composer"),l(this,"width",window.innerWidth*window.devicePixelRatio),l(this,"height",window.innerHeight*window.devicePixelRatio),this.map=new Map,this.weakMap=new WeakMap;const e=new Map;e.set(d.SMAAPASS,()=>new mn(this.width,this.height)),e.set(d.UNREALBLOOMPASS,t=>new mt(new B(this.width,this.height),t.strength,t.radius,t.threshold)),this.constructMap=e}setTarget(e){return this.target=e,this}useEngine(e){if(!e.effectComposer)return console.warn("engine need install effectComposer plugin that can use pass compiler."),this;this.composer=e.effectComposer;const t=this.composer.renderer.getPixelRatio();return this.width=Number(this.composer.renderer.domElement.getAttribute("width"))*t,this.height=Number(this.composer.renderer.domElement.getAttribute("height"))*t,this}add(e){if(this.constructMap.has(e.type)){const t=this.constructMap.get(e.type)(e);this.composer.addPass(t),this.map.set(e.vid,t),this.weakMap.set(t,e.vid)}else console.warn(`pass compiler can not support this type pass: ${e.type}.`)}set(){}remove(e){if(!this.map.has(e))return console.warn(`pass compiler can not found this vid pass: ${e}.`),this;const t=this.map.get(e);return this.composer.removePass(t),this.map.delete(e),this.weakMap.delete(t),this}compileAll(){const e=this.target;for(const t of Object.values(e))this.add(t);return this}dispose(){return this.map.clear(),this}getObjectSymbol(e){return this.weakMap.get(e)||null}getObjectBySymbol(e){return this.map.get(e)||null}}class al extends ls{constructor(){super();l(this,"MODULE",A.POINTS),l(this,"replaceMaterial",new ve({color:"rgb(150, 150, 150)"})),l(this,"replaceGeometry",new $r(5))}getReplaceMaterial(){return this.replaceMaterial}getReplaceGeometry(){return this.replaceGeometry}add(e,t){const i=new Ie;return this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t),this}dispose(){return super.dispose(),this.replaceGeometry.dispose(),this.replaceMaterial.dispose(),this}}class ll extends Is{constructor(){super();l(this,"target"),l(this,"config"),l(this,"engine"),l(this,"rendererCacheData"),this.rendererCacheData={}}assemble(e){return this.target=e.renderer,this.config=e.config,this.engine=e.engine,this.assembly=!0,this}process(e){return this.assembly?this[e.key]?(this[e.key](e.value),this):e.path.length&&this[e.path[0]]?(this[e.path[0]](e.value),this):(this.mergeAttribute(e.path,e.key,e.value),this):(console.warn("webGLRenderer Processor unassembled"),this)}dispose(){return this.target=void 0,this.config=void 0,this.engine=void 0,this.assembly=!1,this}clearColor(e){const t=Number(e.slice(0,-1).split(",").pop().trim());return this.target.setClearColor(e,t),this.target.clear(),this}pixelRatio(e){return this.target.setPixelRatio(e),this.target.clear(),this}size(){const e=this.target,t=this.config.size;if(t)e.setSize(t.x,t.y);else{const i=e.domElement;e.setSize(i.offsetWidth,i.offsetHeight)}return this}viewport(){const e=this.target,t=this.config.viewport;if(t)e.setViewport(t.x,t.y,t.width,t.height);else{const i=e.domElement;e.setViewport(0,0,i.offsetWidth,i.offsetHeight)}return this}scissor(){const e=this.target,t=this.config.scissor;if(t)e.setScissorTest(!0),e.setScissor(t.x,t.y,t.width,t.height);else{e.setScissorTest(!1);const i=e.domElement;e.setScissor(0,0,i.offsetWidth,i.offsetHeight)}return this}adaptiveCamera(e){if(!this.engine)return console.warn("renderer compiler is not set engine."),this;const t=this.target,i=this.engine,r=i.renderManager;if(!e){if(!this.rendererCacheData.adaptiveCameraFun)return this;if(this.rendererCacheData.adaptiveCameraFun)return r.removeEventListener("render",this.rendererCacheData.adaptiveCameraFun),this.rendererCacheData.adaptiveCameraFun=void 0,this}if(e){if(this.rendererCacheData.adaptiveCameraFun)return r.addEventListener("render",this.rendererCacheData.adaptiveCameraFun),this;const o=n=>{const a=i.camera,h=t.domElement.offsetWidth,c=t.domElement.offsetHeight;let m=0,y=0,S=0,x=0,E=0;if(a instanceof se)E=a.aspect;else if(a instanceof he)m=a.right-a.left,y=a.top-a.bottom,E=m/y;else{console.warn("renderer compiler can not support this camera",a);return}E>=1?(m=h,y=m/E,x=c/2-y/2):(y=c,m=y*E,S=h/2-m/2),t.setScissor(S,x,m,y),t.setViewport(S,x,m,y),t.setScissorTest(!0)};this.rendererCacheData.adaptiveCameraFun=o,r.addEventListener("render",this.rendererCacheData.adaptiveCameraFun)}return this}}class cl extends le{constructor(e){super();l(this,"MODULE",A.RENDERER),l(this,"target"),l(this,"engine"),l(this,"processorMap",{[d.WEBGLRENDERER]:new ll}),l(this,"map",new Map),e?(e.target&&(this.target=e.target),e.engine&&(this.engine=e.engine)):(this.target={},this.engine=new U)}assembly(e,t){const i=this.target[e];if(!i){console.warn(`controls compiler can not found this config: '${e}'`);return}const r=this.processorMap[i.type];if(!r){console.warn(`renderer compiler can not support this renderer: '${e}'`);return}const o=this.map.get(e);if(!o){console.warn(`renderer compiler can not found type of renderer: '${i.type}'`);return}r.dispose().assemble({config:i,renderer:o,processer:r,engine:this.engine}),t(r)}add(e){e.type===d.WEBGLRENDERER&&this.map.set(e.vid,this.engine.webGLRenderer),this.assembly(e.vid,t=>{t.processAll().dispose()})}setTarget(e){return this.target=e,this}useEngine(e){return e.webGLRenderer&&this.map.set(d.WEBGLRENDERER,e.webGLRenderer),this.engine=e,this}compileAll(){const e=this.target;for(const t of Object.values(e))this.add(t);return this}dispose(){return this.map.forEach((e,t)=>{e.dispose&&e.dispose()}),this}getObjectSymbol(e){let t=null;return this.map.forEach((i,r)=>{i===e&&(t=r)}),t}getObjectBySymbol(e){return this.map.get(e)||null}}class hl extends Xe{constructor(){super();l(this,"MODULE",A.SCENE),l(this,"textureMap"),l(this,"fogCache"),this.textureMap=new Map,this.fogCache=null,this.mergeFilterAttribute({background:!0,environment:!0,fog:!0})}setLookAt(e,t){return this}background(e,t){if(!this.map.has(e)){console.warn(`${this.MODULE} compiler can not found this vid mapping object: '${e}'`);return}const i=this.map.get(e);if(!t){i.background=null;return}z(t)?this.textureMap.has(t)?i.background=this.textureMap.get(t):console.warn(`scene compiler can not found this vid texture : '${t}'`):i.background=new W(t)}environment(e,t){if(!this.map.has(e)){console.warn(`${this.MODULE} compiler can not found this vid mapping object: '${e}'`);return}const i=this.map.get(e);if(!t){i.environment=null;return}z(t)?this.textureMap.has(t)?i.environment=this.textureMap.get(t):console.warn(`scene compiler can not found this vid texture : '${t}'`):console.warn(`this vid is illegal: '${t}'`)}fog(e,t){if(!this.map.has(e)){console.warn(`${this.MODULE} compiler can not found this vid mapping object: '${e}'`);return}const i=this.map.get(e);if(t.type===""){this.fogCache=null,i.fog=null;return}if(t.type==="Fog"){if(this.fogCache instanceof ci){const r=this.fogCache;r.color=new W(t.color),r.near=t.near,r.far=t.far}else i.fog=new ci(t.color,t.near,t.far),this.fogCache=i.fog;return}if(t.type==="FogExp2"){if(this.fogCache instanceof hi){const r=this.fogCache;r.color=new W(t.color),r.density=t.density}else i.fog=new hi(t.color,t.density),this.fogCache=i.fog;return}console.warn(`scene compiler can not support this type fog:'${t.type}'`)}linkTextureMap(e){return this.textureMap=e,this}add(e,t){const i=new Me;return this.map.set(e,i),this.weakMap.set(i,e),this.background(e,t.background),this.environment(e,t.environment),this.fog(e,t.fog),super.add(e,t),this}cover(e,t){return this.background(e,t.background),this.environment(e,t.environment),this.fog(e,t.fog),super.cover(e,t)}set(e,t,i,r){if(!this.map.has(e))return console.warn(`sceneCompiler: can not found this vid mapping object: '${e}'`),this;const o=t.length?t[0]:i,n={background:()=>this.background(e,r),environment:()=>this.environment(e,r),fog:()=>this.fog(e,this.target[e].fog)};return n[o]?(n[o](),this):(super.set(e,t,i,r),this)}setTarget(e){return this.target=e,this}dispose(){return super.dispose(),this}}class ul extends ls{constructor(){super();l(this,"MODULE",A.SPRITE),l(this,"replaceMaterial",new dt({color:"rgb(150, 150, 150)"})),l(this,"replaceGeometry",new Ze(1,1)),this.mergeFilterAttribute({geometry:!0})}getReplaceMaterial(){return this.replaceMaterial}getReplaceGeometry(){return console.warn("SpriteCompiler: can not use geometry in SpriteCompiler."),this.replaceGeometry}setLookAt(e,t){return this}getMaterial(e){const t=super.getMaterial(e);return t instanceof dt?t:(console.warn(`SpriteCompiler: sprite object can not support this type material: ${t.type}, vid: ${e}.`),this.getReplaceMaterial())}add(e,t){const i=new ut;return this.map.set(e,i),this.weakMap.set(i,e),super.add(e,t),this}dispose(){return this.map.forEach((e,t)=>{e.geometry.dispose()}),super.dispose(),this.replaceGeometry.dispose(),this.replaceMaterial.dispose(),this}}class dl extends qe{constructor(e,t,i,r,o,n,a,h,c,m){super(e,t,i,r,o,n,a,h,c,m)}}class pl extends qe{constructor(e,t,i,r,o,n,a,h,c){super(e,t,i,r,o,n,a,h,c);l(this,"isVideoTexture",!0),this.format=a!==void 0?a:fs,this.minFilter=n!==void 0?n:me,this.magFilter=o!==void 0?o:me,this.generateMipmaps=!1}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image,t="requestVideoFrameCallback"in e;t?this.needsUpdate=!0:t===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class kt{constructor(e){l(this,"canvas"),this.canvas=document.createElement("canvas");const t=window.devicePixelRatio;this.canvas.width=((e==null?void 0:e.width)||512)*t,this.canvas.height=((e==null?void 0:e.height)||512)*t,this.canvas.style.backgroundColor=(e==null?void 0:e.bgColor)||"rgb(255, 255, 255)"}get(){return this.canvas}clear(e=0,t=0,i,r){!i&&(i=this.canvas.width),!r&&(r=this.canvas.height);const o=this.canvas.getContext("2d");return o?(o.clearRect(e,t,i,r),this):(console.warn("you browser can not support canvas 2d"),this)}draw(e){const t=this.canvas.getContext("2d");return t?(t.scale(window.devicePixelRatio,window.devicePixelRatio),e(t),this):(console.warn("you browser can not support canvas 2d"),this)}preview(e){const t=this.canvas;return t.style.position="fixed",t.style.top=(e==null?void 0:e.top)||"5%",t.style.left=(e==null?void 0:e.left)||"5%",t.style.right=(e==null?void 0:e.right)||"unset",t.style.bottom=(e==null?void 0:e.bottom)||"unset",(e==null?void 0:e.scale)&&(t.style.transform=`scale(${e.scale})`),document.body.appendChild(this.canvas),this}}const cs=class extends le{constructor(){super();l(this,"MODULE",A.TEXTURE),l(this,"target",{}),l(this,"map"),l(this,"weakMap"),l(this,"constructMap"),l(this,"resourceMap"),this.map=new Map,this.weakMap=new WeakMap,this.resourceMap=new Map;const s=new Map;s.set(d.IMAGETEXTURE,()=>new dl),s.set(d.CUBETEXTURE,()=>new Yr),s.set(d.CANVASTEXTURE,()=>new St(document.createElement("canvas"))),s.set(d.VIDEOTEXTURE,()=>new pl(document.createElement("video"))),this.constructMap=s}getResource(s){if(!s)return cs.replaceImage;const e=this.resourceMap;if(e.has(s)){const t=e.get(s);return t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?t:(console.error(`this url mapping resource is not a texture image class: ${s}`),cs.replaceImage)}else return console.warn(`resource can not font url: ${s}`),cs.replaceImage}linkRescourceMap(s){return this.resourceMap=s,this}add(s,e){if(z(s))if(e.type&&this.constructMap.has(e.type)){const t=this.constructMap.get(e.type)(),i=JSON.parse(JSON.stringify(e));if(delete i.type,delete i.vid,[d.IMAGETEXTURE,d.CANVASTEXTURE,d.VIDEOTEXTURE].includes(e.type))t.image=this.getResource(i.url),delete i.url;else if(e.type===d.CUBETEXTURE){const r=e.cube,o=[this.getResource(r.px),this.getResource(r.nx),this.getResource(r.py),this.getResource(r.ny),this.getResource(r.pz),this.getResource(r.nz)];t.image=o,delete i.cube}le.applyConfig(i,t),t.needsUpdate=!0,this.map.set(s,t),this.weakMap.set(t,s)}else console.warn(`texture compiler can not support this type: ${e.type}`);else console.error(`texture vid parameter is illegal: ${s}`);return this}set(s,e,t,i){if(!z(s))return console.warn(`texture compiler set function: vid is illeage: '${s}'`),this;if(!this.map.has(s))return console.warn(`texture compiler set function: can not found texture which vid is: '${s}'`),this;const r=this.map.get(s);if(!e.length&&t==="url"){const n=this.target[s];return[d.IMAGETEXTURE,d.CANVASTEXTURE,d.VIDEOTEXTURE].includes(n.type)?r.image=this.getResource(i):console.warn(`texture compiler can not support this type config set url: ${n.type}`),this}if(t==="needsUpdate"){if(i){r.needsUpdate=!0;const n=this.target[s];n.needsUpdate=!1}return this}let o=r;for(const n of e){if(o[n]===void 0)return console.warn(`texture compiler set function: can not found key:${n} in object.`),this;o=o[n]}return o[t]=i,r.needsUpdate=!0,this}remove(s){if(!this.map.has(s))return console.warn(`texture compiler can not found vid match object: ${s}`),this;const e=this.map.get(s);return e.dispose(),this.map.delete(s),this.weakMap.delete(e),this}getMap(){return this.map}setTarget(s){return this.target=s,this}useEngine(s){return this}compileAll(){const s=this.target;for(const e in s)this.add(e,s[e]);return this}dispose(){return this.map.forEach((s,e)=>{s.dispose()}),this.map.clear(),this}getObjectSymbol(s){return this.weakMap.get(s)||null}getObjectBySymbol(s){return this.map.get(s)||null}};let ki=cs;l(ki,"replaceImage",new kt({width:512,height:512}).draw(s=>{s.translate(256,256),s.font="52px",s.fillStyle="white",s.fillText("\u6682\u65E0\u56FE\u7247",0,0)}).get());class fl{constructor(e){l(this,"cameraCompiler",new Ka),l(this,"lightCompiler",new sl),l(this,"geometryCompiler",new zi),l(this,"textureCompiler",new ki),l(this,"materialCompiler",new rl),l(this,"rendererCompiler",new cl),l(this,"sceneCompiler",new hl),l(this,"controlsCompiler",new Ya),l(this,"spriteCompiler",new ul),l(this,"lineCompiler",new il),l(this,"meshCompiler",new nl),l(this,"pointsCompiler",new al),l(this,"groupCompiler",new tl),l(this,"css3DCompiler",new Qa),l(this,"passCompiler",new ol),l(this,"animationCompiler",new La),l(this,"compilerMap"),e&&Object.keys(e).forEach(h=>{this[h]=e[h]});const t=this.textureCompiler.getMap();this.sceneCompiler.linkTextureMap(t),this.materialCompiler.linkTextureMap(t),this.animationCompiler.linkTextureMap(t);const i=this.geometryCompiler.getMap(),r=this.materialCompiler.getMap(),o=Object.values(this).filter(h=>h instanceof Xe),n=o.map(h=>h.getMap());for(const h of o)rs("IS_SOLIDOBJECTCOMPILER",h)&&h.linkGeometryMap(i).linkMaterialMap(r),h.linkObjectMap(...n);this.animationCompiler.linkObjectMap(...n).linkMaterialMap(r);const a=new Map;Object.keys(this).forEach(h=>{const c=this[h];c instanceof le&&a.set(c.MODULE,c)}),this.compilerMap=a}support(e){if(this.compilerMap.forEach(i=>{i.useEngine(e)}),e.resourceManager){const i=e.resourceManager.resourceMap;this.textureCompiler.linkRescourceMap(i),this.geometryCompiler.linkRescourceMap(i),this.css3DCompiler.linkRescourceMap(i)}const t=e.dataSupportManager;return t.textureDataSupport.addCompiler(this.textureCompiler),t.materialDataSupport.addCompiler(this.materialCompiler),t.geometryDataSupport.addCompiler(this.geometryCompiler),t.rendererDataSupport.addCompiler(this.rendererCompiler),t.controlsDataSupport.addCompiler(this.controlsCompiler),t.passDataSupport.addCompiler(this.passCompiler),t.cameraDataSupport.addCompiler(this.cameraCompiler),t.lightDataSupport.addCompiler(this.lightCompiler),t.spriteDataSupport.addCompiler(this.spriteCompiler),t.lineDataSupport.addCompiler(this.lineCompiler),t.meshDataSupport.addCompiler(this.meshCompiler),t.pointsDataSupport.addCompiler(this.pointsCompiler),t.css3DDataSupport.addCompiler(this.css3DCompiler),t.groupDataSupport.addCompiler(this.groupCompiler),t.sceneDataSupport.addCompiler(this.sceneCompiler),t.animationDataSupport.addCompiler(this.animationCompiler),this}getObjectSymbol(e){for(const t of this.compilerMap.values()){const i=t.getObjectSymbol(e);if(i)return i}return null}getObjectBySymbol(e){for(const t of this.compilerMap.values()){const i=t.getObjectBySymbol(e);if(i)return i}return null}dispose(){for(const e of this.compilerMap.values())e.dispose({});return this.compilerMap.clear(),this}}const ml=function(s){if(this.compilerManager)return console.warn("engine has installed compilerManager plugin."),!1;if(!this.dataSupportManager)return console.warn("must install dataSupportManager before compilerManager plugin."),!1;if(!this.renderManager)return console.warn("must install renderManager before compilerManager plugin."),!1;const e=new fl;return this.compilerManager=e,this.getObjectSymbol=function(t){return this.compilerManager.getObjectSymbol(t)},this.getObjectBySymbol=function(t){return this.compilerManager.getObjectBySymbol(t)},this.addEventListener("dispose",()=>{this.compilerManager.dispose()}),this.completeSet.add(()=>{this.compilerManager.support(this)}),!0};var Ns=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Gi={exports:{}};(function(s,e){(function(t,i){s.exports=i()})(Ns,function(){function t(u){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(b){return typeof b}:t=function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},t(u)}function i(u,b){if(!(u instanceof b))throw new TypeError("Cannot call a class as a function")}function r(u,b){for(var p=0;p<b.length;p++){var f=b[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}function o(u,b,p){return b&&r(u.prototype,b),p&&r(u,p),u}function n(u){return a(u)||h(u)||c(u)||y()}function a(u){if(Array.isArray(u))return m(u)}function h(u){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(u))return Array.from(u)}function c(u,b){if(!!u){if(typeof u=="string")return m(u,b);var p=Object.prototype.toString.call(u).slice(8,-1);if(p==="Object"&&u.constructor&&(p=u.constructor.name),p==="Map"||p==="Set")return Array.from(u);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return m(u,b)}}function m(u,b){(b==null||b>u.length)&&(b=u.length);for(var p=0,f=new Array(b);p<b;p++)f[p]=u[p];return f}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=function(){function u(b){i(this,u),this.sourceStr=b,this.subCombos=u.parseComboStr(b),this.keyNames=this.subCombos.reduce(function(p,f){return p.concat(f)},[])}return o(u,[{key:"check",value:function(p){for(var f=0,g=0;g<this.subCombos.length;g+=1)if(f=this._checkSubCombo(this.subCombos[g],f,p),f===-1)return!1;return!0}},{key:"isEqual",value:function(p){if(!p||typeof p!="string"&&t(p)!=="object"||(typeof p=="string"&&(p=new u(p)),this.subCombos.length!==p.subCombos.length))return!1;for(var f=0;f<this.subCombos.length;f+=1)if(this.subCombos[f].length!==p.subCombos[f].length)return!1;for(var g=0;g<this.subCombos.length;g+=1){for(var M=this.subCombos[g],R=p.subCombos[g].slice(0),T=0;T<M.length;T+=1){var D=M[T],j=R.indexOf(D);j>-1&&R.splice(j,1)}if(R.length!==0)return!1}return!0}},{key:"_checkSubCombo",value:function(p,f,g){p=p.slice(0),g=g.slice(f);for(var M=f,R=0;R<p.length;R+=1){var T=p[R];if(T[0]==="\\"){var D=T.slice(1);(D===u.comboDeliminator||D===u.keyDeliminator)&&(T=D)}var j=g.indexOf(T);if(j>-1&&(p.splice(R,1),R-=1,j>M&&(M=j),p.length===0))return M}return-1}}]),u}();S.comboDeliminator=">",S.keyDeliminator="+",S.parseComboStr=function(u){for(var b=S._splitStr(u,S.comboDeliminator),p=[],f=0;f<b.length;f+=1)p.push(S._splitStr(b[f],S.keyDeliminator));return p},S._splitStr=function(u,b){for(var p=u,f=b,g="",M=[],R=0;R<p.length;R+=1)R>0&&p[R]===f&&p[R-1]!=="\\"&&(M.push(g.trim()),g="",R+=1),g+=p[R];return g&&M.push(g.trim()),M};var x=function(){function u(b){i(this,u),this.localeName=b,this.activeTargetKeys=[],this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}return o(u,[{key:"bindKeyCode",value:function(p,f){typeof f=="string"&&(f=[f]),this._keyMap[p]=f}},{key:"bindMacro",value:function(p,f){typeof f=="string"&&(f=[f]);var g=null;typeof f=="function"&&(g=f,f=null);var M={keyCombo:new S(p),keyNames:f,handler:g};this._macros.push(M)}},{key:"getKeyCodes",value:function(p){var f=[];for(var g in this._keyMap){var M=this._keyMap[g].indexOf(p);M>-1&&f.push(g|0)}return f}},{key:"getKeyNames",value:function(p){return this._keyMap[p]||[]}},{key:"setKillKey",value:function(p){if(typeof p=="string"){for(var f=this.getKeyCodes(p),g=0;g<f.length;g+=1)this.setKillKey(f[g]);return}this._killKeyCodes.push(p)}},{key:"pressKey",value:function(p){if(typeof p=="string"){for(var f=this.getKeyCodes(p),g=0;g<f.length;g+=1)this.pressKey(f[g]);return}this.activeTargetKeys.length=0;for(var M=this.getKeyNames(p),R=0;R<M.length;R+=1)this.activeTargetKeys.push(M[R]),this.pressedKeys.indexOf(M[R])===-1&&this.pressedKeys.push(M[R]);this._applyMacros()}},{key:"releaseKey",value:function(p){if(typeof p=="string")for(var f=this.getKeyCodes(p),g=0;g<f.length;g+=1)this.releaseKey(f[g]);else{var M=this.getKeyNames(p),R=this._killKeyCodes.indexOf(p);if(R!==-1)this.pressedKeys.length=0;else for(var T=0;T<M.length;T+=1){var D=this.pressedKeys.indexOf(M[T]);D>-1&&this.pressedKeys.splice(D,1)}this.activeTargetKeys.length=0,this._clearMacros()}}},{key:"_applyMacros",value:function(){for(var p=this._macros.slice(0),f=0;f<p.length;f+=1){var g=p[f];if(g.keyCombo.check(this.pressedKeys)){g.handler&&(g.keyNames=g.handler(this.pressedKeys));for(var M=0;M<g.keyNames.length;M+=1)this.pressedKeys.indexOf(g.keyNames[M])===-1&&this.pressedKeys.push(g.keyNames[M]);this._appliedMacros.push(g)}}}},{key:"_clearMacros",value:function(){for(var p=0;p<this._appliedMacros.length;p+=1){var f=this._appliedMacros[p];if(!f.keyCombo.check(this.pressedKeys)){for(var g=0;g<f.keyNames.length;g+=1){var M=this.pressedKeys.indexOf(f.keyNames[g]);M>-1&&this.pressedKeys.splice(M,1)}f.handler&&(f.keyNames=null),this._appliedMacros.splice(p,1),p-=1}}}}]),u}(),E=function(){function u(b,p,f,g){i(this,u),this._locale=null,this._currentContext="",this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._contexts.global={listeners:this._listeners,targetWindow:b,targetElement:p,targetPlatform:f,targetUserAgent:g},this.setContext("global")}return o(u,[{key:"setLocale",value:function(p,f){var g=null;return typeof p=="string"?f?(g=new x(p),f(g,this._targetPlatform,this._targetUserAgent)):g=this._locales[p]||null:(g=p,p=g._localeName),this._locale=g,this._locales[p]=g,g&&(this._locale.pressedKeys=g.pressedKeys),this}},{key:"getLocale",value:function(p){return p||(p=this._locale.localeName),this._locales[p]||null}},{key:"bind",value:function(p,f,g,M){if((p===null||typeof p=="function")&&(M=g,g=f,f=p,p=null),p&&t(p)==="object"&&typeof p.length=="number"){for(var R=0;R<p.length;R+=1)this.bind(p[R],f,g);return this}return this._listeners.push({keyCombo:p?new S(p):null,pressHandler:f||null,releaseHandler:g||null,preventRepeat:M||!1,preventRepeatByDefault:M||!1,executingHandler:!1}),this}},{key:"addListener",value:function(p,f,g,M){return this.bind(p,f,g,M)}},{key:"on",value:function(p,f,g,M){return this.bind(p,f,g,M)}},{key:"bindPress",value:function(p,f,g){return this.bind(p,f,null,g)}},{key:"bindRelease",value:function(p,f){return this.bind(p,null,f,preventRepeatByDefault)}},{key:"unbind",value:function(p,f,g){if((p===null||typeof p=="function")&&(g=f,f=p,p=null),p&&t(p)==="object"&&typeof p.length=="number"){for(var M=0;M<p.length;M+=1)this.unbind(p[M],f,g);return this}for(var R=0;R<this._listeners.length;R+=1){var T=this._listeners[R],D=!p&&!T.keyCombo||T.keyCombo&&T.keyCombo.isEqual(p),j=!f&&!g||!f&&!T.pressHandler||f===T.pressHandler,k=!f&&!g||!g&&!T.releaseHandler||g===T.releaseHandler;D&&j&&k&&(this._listeners.splice(R,1),R-=1)}return this}},{key:"removeListener",value:function(p,f,g){return this.unbind(p,f,g)}},{key:"off",value:function(p,f,g){return this.unbind(p,f,g)}},{key:"setContext",value:function(p){if(this._locale&&this.releaseAllKeys(),!this._contexts[p]){var f=this._contexts.global;this._contexts[p]={listeners:[],targetWindow:f.targetWindow,targetElement:f.targetElement,targetPlatform:f.targetPlatform,targetUserAgent:f.targetUserAgent}}var g=this._contexts[p];return this._currentContext=p,this._listeners=g.listeners,this.stop(),this.watch(g.targetWindow,g.targetElement,g.targetPlatform,g.targetUserAgent),this}},{key:"getContext",value:function(){return this._currentContext}},{key:"withContext",value:function(p,f){var g=this.getContext();return this.setContext(p),f(),this.setContext(g),this}},{key:"watch",value:function(p,f,g,M){var R=this;this.stop();var T=typeof globalThis!="undefined"?globalThis:typeof Ns!="undefined"?Ns:typeof window!="undefined"?window:{};if(!p){if(!T.addEventListener&&!T.attachEvent)throw new Error("Cannot find window functions addEventListener or attachEvent.");p=T}if(typeof p.nodeType=="number"&&(M=g,g=f,f=p,p=T),!p.addEventListener&&!p.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!p.addEventListener;var D=p.navigator&&p.navigator.userAgent||"",j=p.navigator&&p.navigator.platform||"";f&&f!==null||(f=p.document),g&&g!==null||(g=j),M&&M!==null||(M=D),this._targetKeyDownBinding=function(X){R.pressKey(X.keyCode,X),R._handleCommandBug(X,j)},this._targetKeyUpBinding=function(X){R.releaseKey(X.keyCode,X)},this._targetResetBinding=function(X){R.releaseAllKeys(X)},this._bindEvent(f,"keydown",this._targetKeyDownBinding),this._bindEvent(f,"keyup",this._targetKeyUpBinding),this._bindEvent(p,"focus",this._targetResetBinding),this._bindEvent(p,"blur",this._targetResetBinding),this._targetElement=f,this._targetWindow=p,this._targetPlatform=g,this._targetUserAgent=M;var k=this._contexts[this._currentContext];return k.targetWindow=this._targetWindow,k.targetElement=this._targetElement,k.targetPlatform=this._targetPlatform,k.targetUserAgent=this._targetUserAgent,this}},{key:"stop",value:function(){if(!(!this._targetElement||!this._targetWindow))return this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null,this}},{key:"pressKey",value:function(p,f){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.pressKey(p),this._applyBindings(f),this}},{key:"releaseKey",value:function(p,f){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.releaseKey(p),this._clearBindings(f),this}},{key:"releaseAllKeys",value:function(p){if(this._paused)return this;if(!this._locale)throw new Error("Locale not set");return this._locale.pressedKeys.length=0,this._clearBindings(p),this}},{key:"pause",value:function(){return this._paused?this:(this._locale&&this.releaseAllKeys(),this._paused=!0,this)}},{key:"resume",value:function(){return this._paused=!1,this}},{key:"reset",value:function(){return this.releaseAllKeys(),this._listeners.length=0,this}},{key:"_bindEvent",value:function(p,f,g){return this._isModernBrowser?p.addEventListener(f,g,!1):p.attachEvent("on"+f,g)}},{key:"_unbindEvent",value:function(p,f,g){return this._isModernBrowser?p.removeEventListener(f,g,!1):p.detachEvent("on"+f,g)}},{key:"_getGroupedListeners",value:function(){var p=[],f=[],g=this._listeners;return this._currentContext!=="global"&&(g=[].concat(n(g),n(this._contexts.global.listeners))),g.sort(function(M,R){return(R.keyCombo?R.keyCombo.keyNames.length:0)-(M.keyCombo?M.keyCombo.keyNames.length:0)}).forEach(function(M){for(var R=-1,T=0;T<f.length;T+=1)(f[T]===null&&M.keyCombo===null||f[T]!==null&&f[T].isEqual(M.keyCombo))&&(R=T);R===-1&&(R=f.length,f.push(M.keyCombo)),p[R]||(p[R]=[]),p[R].push(M)}),p}},{key:"_applyBindings",value:function(p){var f=this,g=!1;p||(p={}),p.preventRepeat=function(){g=!0},p.pressedKeys=this._locale.pressedKeys.slice(0);for(var M=this._locale.activeTargetKeys,R=this._locale.pressedKeys.slice(0),T=this._getGroupedListeners(),D=function(X){var Oe=T[X],V=Oe[0].keyCombo;if(V===null||V.check(R)&&M.some(function(Z){return V.keyNames.includes(Z)})){for(var Y=0;Y<Oe.length;Y+=1){var q=Oe[Y];!q.executingHandler&&q.pressHandler&&!q.preventRepeat&&(q.executingHandler=!0,q.pressHandler.call(f,p),q.executingHandler=!1,(g||q.preventRepeatByDefault)&&(q.preventRepeat=!0,g=!1)),f._appliedListeners.indexOf(q)===-1&&f._appliedListeners.push(q)}if(V)for(var _=0;_<V.keyNames.length;_+=1){var fe=R.indexOf(V.keyNames[_]);fe!==-1&&(R.splice(fe,1),_-=1)}}},j=0;j<T.length;j+=1)D(j)}},{key:"_clearBindings",value:function(p){p||(p={}),p.pressedKeys=this._locale.pressedKeys.slice(0);for(var f=0;f<this._appliedListeners.length;f+=1){var g=this._appliedListeners[f],M=g.keyCombo;(M===null||!M.check(this._locale.pressedKeys))&&(g.preventRepeat=!1,(M!==null||p.pressedKeys.length===0)&&(this._appliedListeners.splice(f,1),f-=1),!g.executingHandler&&g.releaseHandler&&(g.executingHandler=!0,g.releaseHandler.call(this,p),g.executingHandler=!1))}}},{key:"_handleCommandBug",value:function(p,f){var g=["shift","ctrl","alt","capslock","tab","command"];f.match("Mac")&&this._locale.pressedKeys.includes("command")&&!g.includes(this._locale.getKeyNames(p.keyCode)[0])&&this._targetKeyUpBinding(p)}}]),u}();function w(u,b,p){u.bindKeyCode(3,["cancel"]),u.bindKeyCode(8,["backspace"]),u.bindKeyCode(9,["tab"]),u.bindKeyCode(12,["clear"]),u.bindKeyCode(13,["enter"]),u.bindKeyCode(16,["shift"]),u.bindKeyCode(17,["ctrl"]),u.bindKeyCode(18,["alt","menu"]),u.bindKeyCode(19,["pause","break"]),u.bindKeyCode(20,["capslock"]),u.bindKeyCode(27,["escape","esc"]),u.bindKeyCode(32,["space","spacebar"]),u.bindKeyCode(33,["pageup"]),u.bindKeyCode(34,["pagedown"]),u.bindKeyCode(35,["end"]),u.bindKeyCode(36,["home"]),u.bindKeyCode(37,["left"]),u.bindKeyCode(38,["up"]),u.bindKeyCode(39,["right"]),u.bindKeyCode(40,["down"]),u.bindKeyCode(41,["select"]),u.bindKeyCode(42,["printscreen"]),u.bindKeyCode(43,["execute"]),u.bindKeyCode(44,["snapshot"]),u.bindKeyCode(45,["insert","ins"]),u.bindKeyCode(46,["delete","del"]),u.bindKeyCode(47,["help"]),u.bindKeyCode(145,["scrolllock","scroll"]),u.bindKeyCode(188,["comma",","]),u.bindKeyCode(190,["period","."]),u.bindKeyCode(191,["slash","forwardslash","/"]),u.bindKeyCode(192,["graveaccent","`"]),u.bindKeyCode(219,["openbracket","["]),u.bindKeyCode(220,["backslash","\\"]),u.bindKeyCode(221,["closebracket","]"]),u.bindKeyCode(222,["apostrophe","'"]),u.bindKeyCode(48,["zero","0"]),u.bindKeyCode(49,["one","1"]),u.bindKeyCode(50,["two","2"]),u.bindKeyCode(51,["three","3"]),u.bindKeyCode(52,["four","4"]),u.bindKeyCode(53,["five","5"]),u.bindKeyCode(54,["six","6"]),u.bindKeyCode(55,["seven","7"]),u.bindKeyCode(56,["eight","8"]),u.bindKeyCode(57,["nine","9"]),u.bindKeyCode(96,["numzero","num0"]),u.bindKeyCode(97,["numone","num1"]),u.bindKeyCode(98,["numtwo","num2"]),u.bindKeyCode(99,["numthree","num3"]),u.bindKeyCode(100,["numfour","num4"]),u.bindKeyCode(101,["numfive","num5"]),u.bindKeyCode(102,["numsix","num6"]),u.bindKeyCode(103,["numseven","num7"]),u.bindKeyCode(104,["numeight","num8"]),u.bindKeyCode(105,["numnine","num9"]),u.bindKeyCode(106,["nummultiply","num*"]),u.bindKeyCode(107,["numadd","num+"]),u.bindKeyCode(108,["numenter"]),u.bindKeyCode(109,["numsubtract","num-"]),u.bindKeyCode(110,["numdecimal","num."]),u.bindKeyCode(111,["numdivide","num/"]),u.bindKeyCode(144,["numlock","num"]),u.bindKeyCode(112,["f1"]),u.bindKeyCode(113,["f2"]),u.bindKeyCode(114,["f3"]),u.bindKeyCode(115,["f4"]),u.bindKeyCode(116,["f5"]),u.bindKeyCode(117,["f6"]),u.bindKeyCode(118,["f7"]),u.bindKeyCode(119,["f8"]),u.bindKeyCode(120,["f9"]),u.bindKeyCode(121,["f10"]),u.bindKeyCode(122,["f11"]),u.bindKeyCode(123,["f12"]),u.bindKeyCode(124,["f13"]),u.bindKeyCode(125,["f14"]),u.bindKeyCode(126,["f15"]),u.bindKeyCode(127,["f16"]),u.bindKeyCode(128,["f17"]),u.bindKeyCode(129,["f18"]),u.bindKeyCode(130,["f19"]),u.bindKeyCode(131,["f20"]),u.bindKeyCode(132,["f21"]),u.bindKeyCode(133,["f22"]),u.bindKeyCode(134,["f23"]),u.bindKeyCode(135,["f24"]),u.bindMacro("shift + `",["tilde","~"]),u.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),u.bindMacro("shift + 2",["at","@"]),u.bindMacro("shift + 3",["number","#"]),u.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),u.bindMacro("shift + 5",["percent","%"]),u.bindMacro("shift + 6",["caret","^"]),u.bindMacro("shift + 7",["ampersand","and","&"]),u.bindMacro("shift + 8",["asterisk","*"]),u.bindMacro("shift + 9",["openparen","("]),u.bindMacro("shift + 0",["closeparen",")"]),u.bindMacro("shift + -",["underscore","_"]),u.bindMacro("shift + =",["plus","+"]),u.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),u.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),u.bindMacro("shift + \\",["verticalbar","|"]),u.bindMacro("shift + ;",["colon",":"]),u.bindMacro("shift + '",["quotationmark","'"]),u.bindMacro("shift + !,",["openanglebracket","<"]),u.bindMacro("shift + .",["closeanglebracket",">"]),u.bindMacro("shift + /",["questionmark","?"]),b.match("Mac")?u.bindMacro("command",["mod","modifier"]):u.bindMacro("ctrl",["mod","modifier"]);for(var f=65;f<=90;f+=1){var g=String.fromCharCode(f+32),M=String.fromCharCode(f);u.bindKeyCode(f,g),u.bindMacro("shift + "+g,M),u.bindMacro("capslock + "+g,M)}var R=p.match("Firefox")?59:186,T=p.match("Firefox")?173:189,D=p.match("Firefox")?61:187,j,k;b.match("Mac")&&(p.match("Safari")||p.match("Chrome"))?(j=91,k=93):b.match("Mac")&&p.match("Opera")?(j=17,k=17):b.match("Mac")&&p.match("Firefox")&&(j=224,k=224),u.bindKeyCode(R,["semicolon",";"]),u.bindKeyCode(T,["dash","-"]),u.bindKeyCode(D,["equal","equalsign","="]),u.bindKeyCode(j,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),u.bindKeyCode(k,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),u.setKillKey("command")}var C=new E;return C.setLocale("us",w),C.Keyboard=E,C.Locale=x,C.KeyCombo=S,C})})(Gi);var Ui=Gi.exports;class gl extends Se{constructor(){super();l(this,"map",new Map)}generateSymbol(e){return Array.isArray(e)?e.join(" + "):e.shortcutKey.join(" + ")}register(e){const t=this.generateSymbol(e);return this.map.has(t)?(console.warn(`KeyboardManager: shortcutKey already exist: ${t}. desp: ${this.map.get(t).desp}`),this):(Ui.bind(t,e.keydown||null,e.keyup),this.map.set(t,e),this)}update(e){const t=this.generateSymbol(e);return this.map.has(t)?(this.cancel(e.shortcutKey),this.register(e),this):(console.warn("KeyboardManager: shortcutKey unregister then exec register function"),this.register(e),this)}cancel(e){const t=this.generateSymbol(e);if(this.map.has(t)){const i=this.map.get(t);Ui.unbind(t,i.keydown||null,i.keyup),this.map.delete(t)}return this}checkRepeat(e){const t=this.generateSymbol(e);return this.map.has(t)}}const yl=function(s){if(this.keyboardManager)return console.warn("engine has installed keyboardManager plugin."),!1;const e=new gl;return this.keyboardManager=e,this.completeSet.add(()=>{if(this.transformControls)if(this.IS_ENGINESUPPORT){const t=this.dataSupportManager.controlsDataSupport.getData()[d.TRNASFORMCONTROLS];e.register({shortcutKey:["r"],desp:"tranformControls rotate mode",keyup:i=>{i==null||i.preventDefault(),t.mode="rotate"}}).register({shortcutKey:["t"],desp:"tranformControls translate mode",keyup:i=>{i==null||i.preventDefault(),t.mode="translate"}}).register({shortcutKey:["e"],desp:"tranformControls scale mode",keyup:i=>{i==null||i.preventDefault(),t.mode="scale"}}).register({shortcutKey:["x"],desp:"tranformControls switch x axis",keyup:i=>{i==null||i.preventDefault(),t.showX=!t.showX}}).register({shortcutKey:["y"],desp:"tranformControls switch y axis",keyup:i=>{i==null||i.preventDefault(),!(i==null?void 0:i.ctrlKey)&&(t.showY=!t.showY)}}).register({shortcutKey:["z"],desp:"tranformControls switch z axis",keyup:i=>{i==null||i.preventDefault(),!(i==null?void 0:i.ctrlKey)&&(t.showZ=!t.showZ)}}).register({shortcutKey:["space"],desp:"tranformControls switch coordinate space",keyup:i=>{i==null||i.preventDefault(),t.space=t.space==="local"?"world":"local"}}).register({shortcutKey:["shift"],desp:"tranformControls switch tranform numeric value",keyup:i=>{i==null||i.preventDefault(),t.snapAllow=!1},keydown:i=>{i==null||i.preventDefault(),i==null||i.preventRepeat(),t.snapAllow=!0}})}else{const t=this.transformControls;e.register({shortcutKey:["r"],desp:"tranformControls rotate mode",keyup:i=>{i==null||i.preventDefault(),t.mode="rotate"}}).register({shortcutKey:["t"],desp:"tranformControls translate mode",keyup:i=>{i==null||i.preventDefault(),t.mode="translate"}}).register({shortcutKey:["e"],desp:"tranformControls scale mode",keyup:i=>{i==null||i.preventDefault(),t.mode="scale"}}).register({shortcutKey:["x"],desp:"tranformControls switch x axis",keyup:i=>{i==null||i.preventDefault(),t.showX=!t.showX}}).register({shortcutKey:["y"],desp:"tranformControls switch y axis",keyup:i=>{i==null||i.preventDefault(),!(i==null?void 0:i.ctrlKey)&&(t.showY=!t.showY)}}).register({shortcutKey:["z"],desp:"tranformControls switch z axis",keyup:i=>{i==null||i.preventDefault(),!(i==null?void 0:i.ctrlKey)&&(t.showZ=!t.showZ)}}).register({shortcutKey:["space"],desp:"tranformControls switch coordinate space",keyup:i=>{i==null||i.preventDefault(),t.space=t.space==="local"?"world":"local"}}).register({shortcutKey:["shift"],desp:"tranformControls switch tranform numeric value",keyup:i=>{i==null||i.preventDefault(),t.translationSnap=null,t.rotationSnap=null,t.scaleSnap=null},keydown:i=>{i==null||i.preventDefault(),i==null||i.preventRepeat(),t.translationSnap=5,t.rotationSnap=Math.PI/180*10,t.scaleSnap=.1}})}}),!0},bl=function(s={}){if(!this.scene)return console.error("must install some scene plugin before BasicViewpoint plugin."),!1;const e=new Gr(s.length||500);return e.matrixAutoUpdate=!1,e.raycast=()=>{},this.scene.add(e),this.setAxesHelper=function(t){return t.show?this.scene.add(e):this.scene.remove(e),this},this.addEventListener("setScene",t=>{t.scene.add(e)}),!0},vl=function(s={}){if(!this.scene)return console.error("must install some scene before BasicViewpoint plugin."),!1;const e=new Ur(s.range||500,s.spacing||50,s.axesColor||"rgb(130, 130, 130)",s.cellColor||"rgb(70, 70, 70)");if(s.opacity!==1){const t=e.material;t.transparent=!0,t.opacity=s.opacity||.5,t.needsUpdate=!0}return e.matrixAutoUpdate=!1,e.raycast=()=>{},this.scene.add(e),this.setGridHelper=function(t){return t.show?this.scene.add(e):this.scene.remove(e),this},this.addEventListener("setScene",t=>{t.scene.add(e)}),this.completeSet.add(()=>{this.setViewpoint&&this.addEventListener("setViewpoint",t=>{const i=t.viewpoint;i===G.DEFAULT||i===G.TOP||i===G.BOTTOM?e.rotation.set(0,0,0):i===G.RIGHT||i===G.LEFT?e.rotation.set(0,0,Math.PI/2):(i===G.FRONT||i===G.BACK)&&e.rotation.set(Math.PI/2,0,0),e.updateMatrix(),e.updateMatrixWorld()})}),!0};var ae;(function(s){s.GEOMETRY="geometry",s.MATERIAL="material",s.LIGHT="light",s.ENV="env"})(ae||(ae={}));const Ml=function(s={}){if(!this.webGLRenderer)return console.error("must install some renderer before DisplayModel plugin."),!1;if(!this.scene)return console.error("must install some scene before DisplayModel plugin."),!1;!s.overrideColor&&(s.overrideColor="rgb(250, 250, 250)"),!s.defaultAmbientLightSetting&&(s.defaultAmbientLightSetting={}),!s.defaultAmbientLightSetting.color&&(s.defaultAmbientLightSetting.color="rgb(255, 255, 255)"),!s.defaultAmbientLightSetting.intensity&&(s.defaultAmbientLightSetting.intensity=.5);const e=new Wt(s.defaultAmbientLightSetting.color,s.defaultAmbientLightSetting.intensity);e.matrixAutoUpdate=!1,!s.defaultDirectionalLightSetting&&(s.defaultDirectionalLightSetting={}),!s.defaultDirectionalLightSetting.color&&(s.defaultDirectionalLightSetting.color="rgb(255, 255, 255)"),!s.defaultDirectionalLightSetting.intensity&&(s.defaultDirectionalLightSetting.intensity=.5),!s.defaultDirectionalLightSetting.position&&(s.defaultDirectionalLightSetting.position={x:-100,y:100,z:100});const t=new ni(s.defaultDirectionalLightSetting.color,s.defaultDirectionalLightSetting.intensity);t.castShadow=!1,t.position.set(s.defaultDirectionalLightSetting.position.x,s.defaultDirectionalLightSetting.position.y,s.defaultDirectionalLightSetting.position.z),t.updateMatrix(),t.updateMatrixWorld(),t.matrixAutoUpdate=!1,!s.mode&&(s.mode=ae.ENV),this.displayMode=s.mode;const i=new Fr({color:s.overrideColor}),r=new je({color:s.overrideColor}),o=new ve({color:s.overrideColor,size:5,sizeAttenuation:!1}),n=new dt({color:s.overrideColor}),a=new WeakMap,h=new Set,c=new Set,m=new Set,y=new Set,S=new Set;let x,E;const w={Object3D:!0,Group:!0};this.scene.addEventListener("afterAdd",M=>{const R=this.displayMode,T=M.objects;for(const D of T)if(!w[D.type])if(D instanceof L&&D.type==="Mesh")c.add(D),R===ae.GEOMETRY&&(a.set(D,D.material),D.material=i);else if(D instanceof ue&&D.type.includes("Line"))m.add(D),R===ae.GEOMETRY&&(a.set(D,D.material),D.material=r);else if(D instanceof oi&&D.type.includes("Light")){if(D===e||D===t)continue;h.has(D)||h.add(D),R!==ae.ENV&&R!==ae.LIGHT&&this.scene.remove(D)}else D instanceof Ie&&D.type==="Points"?(y.add(D),R===ae.GEOMETRY&&(a.set(D,D.material),D.material=o)):D instanceof ut&&D.type==="Sprite"&&(S.add(D),R===ae.GEOMETRY&&(a.set(D,D.material),D.material=n))}),this.scene.addEventListener("afterRemove",M=>{const R=M.objects;for(const T of R)if(!w[T.type])if(T instanceof L&&T.type==="Mesh")c.delete(T),a.has(T)&&a.delete(T);else if(T instanceof ue&&T.type.includes("Line"))m.delete(T),a.has(T)&&a.delete(T);else if(T instanceof oi&&T.type.includes("Light")){if(T===e||T===t)continue;h.delete(T)}else T instanceof Ie&&T.type==="Points"?(y.delete(T),a.has(T)&&a.delete(T)):T instanceof ut&&T.type==="Sprite"&&(S.delete(T),a.has(T)&&a.delete(T))});const C=()=>{for(const M of c)M.material!==i&&(a.set(M,M.material),M.material=i);for(const M of m)M.material!==r&&(a.set(M,M.material),M.material=r);for(const M of y)M.material!==o&&(a.set(M,M.material),M.material=o);for(const M of S)M.material!==n&&(a.set(M,M.material),M.material=n)},u=()=>{c.forEach(M=>{a.has(M)&&(M.material=a.get(M),a.delete(M))}),m.forEach(M=>{a.has(M)&&(M.material=a.get(M),a.delete(M))}),y.forEach(M=>{a.has(M)&&(M.material=a.get(M),a.delete(M))}),S.forEach(M=>{a.has(M)&&(M.material=a.get(M),a.delete(M))})},b=()=>{h.forEach(M=>{M.visible=!1}),this.scene.add(e),this.scene.add(t)},p=()=>{h.forEach(M=>{M.visible=!0}),this.scene.remove(e),this.scene.remove(t)},f=()=>{this.scene.background instanceof qe&&(x=this.scene.background,this.scene.background=null),this.scene.environment instanceof qe&&(E=this.scene.environment,this.scene.environment=null)},g=()=>{x&&(this.scene.background=x,x=void 0),E&&(this.scene.environment=E,E=void 0)};return this.setDisplayMode=function(M){return this.displayMode=M||ae.ENV,M===ae.GEOMETRY?(C(),f(),b()):M===ae.MATERIAL?(u(),f(),b()):M===ae.LIGHT?(u(),f(),p()):M===ae.ENV?(u(),g(),p()):console.warn(`displayMode plugin can not set this mode: ${M}`),this},this.completeSet.add(()=>{this.objectHelperManager&&this.objectHelperManager.addFilteredObject(t)}),!0},Ve=()=>new je({color:"rgb(255, 255, 255)"});class Fi extends ge{constructor(e){super();l(this,"shape"),l(this,"target"),l(this,"type","CameraHelper"),l(this,"cachaData");const t=new re,i=[0,0,0,-1,1,-1,0,0,0,-1,1,1,0,0,0,-1,-1,-1,0,0,0,-1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,-1,1,0,0,0,0,1,1,0,0,0,0,1,-1,0,0,0,0,-1,-1,0,0,0,0,-1,1,0,1,1,0,1,-1,0,1,-1,0,-1,-1,0,-1,-1,0,-1,1,0,-1,1,0,1,1,0,-1,1,2,-1,1,0,1,-1,2,1,-1,0,-1,-1,2,-1,-1,0,1,1,2,1,1,2,1,1,2,-1,1,2,-1,1,2,-1,-1,2,-1,-1,2,1,-1,2,1,-1,2,1,1];t.setAttribute("position",new J(i,3)),t.rotateY(-90*Math.PI/180),t.computeBoundingBox();const r=new Lr(e);r.matrix=new Et,r.matrixAutoUpdate=!0,r.raycast=()=>{},this.add(r),this.shape=r,this.geometry=t,this.material=Ve(),this.target=e,this.matrixAutoUpdate=!1,this.matrix=e.matrix,e instanceof se?this.cachaData={fov:e.fov,aspect:e.aspect,near:e.near,far:e.far}:e instanceof he?this.cachaData={left:e.left,right:e.right,top:e.top,bottom:e.bottom,near:e.near,far:e.far}:this.cachaData={},this.onBeforeRender=()=>{let o=!1;const n=this.cachaData;Object.keys(n).forEach(a=>{n[a]!==e[a]&&(n[a]=e[a],o=!0)}),o&&this.shape.update()}}raycast(e,t){const i=this.matrixWorld,r=this.geometry.boundingBox.clone();if(r.applyMatrix4(i),e.ray.intersectsBox(r)){const o=this.target;t.push({distance:e.ray.origin.distanceTo(o.position),object:o,point:o.position})}}}class El extends ge{constructor(e){super();l(this,"sphere"),l(this,"target"),l(this,"shape"),l(this,"type","VisDirectionalLightHelper"),l(this,"cacheColor"),l(this,"cacheVector3"),this.geometry=new re;const t=[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,0,0,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,-.707,0,-.707,.707,0,.707,.707,0,-.707,-.707,0,.707];this.geometry.setAttribute("position",new J(t,3)),this.material=Ve(),this.geometry.boundingSphere;const i=new W().copy(e.color).multiplyScalar(e.intensity),r=new Ze(20,20);r.dispose();const o=new ge(new ht(r),new je({color:i}));o.raycast=()=>{},this.shape=o,this.target=e,this.sphere=new ys(new O(0,0,0),1),this.cacheColor=e.color.getHex(),this.cacheVector3=new O,this.add(this.shape),this.matrixAutoUpdate=!1,this.matrix=e.matrix,this.matrixWorldNeedsUpdate=!1,this.matrixWorld=e.matrixWorld,this.onBeforeRender=()=>{const n=this.target,a=this.shape;n.color.getHex()!==this.cacheColor&&(a.material.color.copy(n.color).multiplyScalar(n.intensity),this.cacheColor=n.color.getHex()),a.lookAt(n.target.position)}}raycast(e,t){const i=this.target,r=i.matrixWorld,o=this.sphere;o.set(this.cacheVector3.set(0,0,0),1),o.applyMatrix4(r),e.ray.intersectsSphere(o)&&t.push({distance:e.ray.origin.distanceTo(i.position),object:i,point:i.position})}}class wl extends ge{constructor(e){super();l(this,"sphere"),l(this,"target"),l(this,"shape"),l(this,"type","VisPointLightHelper"),l(this,"cacheColor"),l(this,"cacheDistance"),l(this,"cacheVector3"),this.geometry=new re;const t=[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,0,0,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,-.707,0,-.707,.707,0,.707,.707,0,-.707,-.707,0,.707];this.geometry.setAttribute("position",new J(t,3)),this.material=Ve(),this.geometry.boundingSphere;const i=new W().copy(e.color).multiplyScalar(e.intensity),r=new L(new ct(e.distance,0),new lt({color:i,wireframe:!0}));r.raycast=()=>{},r.matrixAutoUpdate=!1,this.shape=r,this.target=e,this.sphere=new ys(new O(0,0,0),1),this.cacheColor=e.color.getHex(),this.cacheDistance=e.distance,this.cacheVector3=new O,this.add(this.shape),this.matrixAutoUpdate=!1,this.matrix=e.matrix,this.matrixWorldNeedsUpdate=!1,this.matrixWorld=e.matrixWorld,this.onBeforeRender=()=>{const o=this.target,n=this.shape;o.distance!==this.cacheDistance&&(n.geometry.dispose(),n.geometry=new ct(o.distance,0),this.cacheDistance=o.distance),o.color.getHex()!==this.cacheColor&&(n.material.color.copy(o.color).multiplyScalar(o.intensity),this.cacheColor=o.color.getHex())}}raycast(e,t){const i=this.target,r=i.matrixWorld,o=this.sphere;o.set(this.cacheVector3.set(0,0,0),1),o.applyMatrix4(r),e.ray.intersectsSphere(o)&&t.push({distance:e.ray.origin.distanceTo(i.position),object:i,point:i.position})}}class Sl extends ge{constructor(e){super();l(this,"sphere"),l(this,"target"),l(this,"shape"),l(this,"type","VisSpotLightHelper"),l(this,"cacheVector3"),l(this,"cacheColor"),l(this,"cacheAngle"),l(this,"cacheDistance"),this.geometry=new re;const t=[-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,0,0,-.707,-.707,0,.707,.707,0,.707,-.707,0,-.707,.707,-.707,0,-.707,.707,0,.707,.707,0,-.707,-.707,0,.707];this.geometry.setAttribute("position",new J(t,3)),this.material=Ve(),this.geometry.boundingSphere;const i=new re,r=[0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,m=1,y=32;c<y;c++,m++){const S=c/y*Math.PI*2,x=m/y*Math.PI*2;r.push(Math.cos(S),Math.sin(S),1,Math.cos(x),Math.sin(x),1)}i.setAttribute("position",new J(r,3));const o=Ve(),n=new ge(i,o);n.material.color.copy(e.color).multiplyScalar(e.intensity);const a=e.distance?e.distance:1e3,h=a*Math.tan(e.angle);n.scale.set(h,h,a),n.raycast=()=>{},this.add(n),this.matrixAutoUpdate=!1,this.matrix=e.matrix,this.matrixWorldNeedsUpdate=!1,this.matrixWorld=e.matrixWorld,this.target=e,this.shape=n,this.sphere=new ys(new O(0,0,0),1),this.cacheColor=e.color.getHex(),this.cacheDistance=e.distance,this.cacheAngle=e.angle,this.cacheVector3=new O,this.onBeforeRender=()=>{const c=this.target,m=this.shape;let y=!1;if(c.distance!==this.cacheDistance&&(this.cacheDistance=c.distance,m.scale.z=c.distance,y=!0),c.angle!==this.cacheAngle&&(this.cacheAngle=c.angle,y=!0),y){const S=c.distance*Math.tan(c.angle);m.scale.set(S,S,c.distance)}c.color.getHex()!==this.cacheColor&&(m.material.color.copy(c.color).multiplyScalar(c.intensity),this.cacheColor=c.color.getHex()),m.lookAt(c.target.position)}}raycast(e,t){const i=this.target,r=i.matrixWorld,o=this.sphere;o.set(this.cacheVector3.set(0,0,0),1),o.applyMatrix4(r),e.ray.intersectsSphere(o)&&t.push({distance:e.ray.origin.distanceTo(i.position),object:i,point:i.position})}}class xl extends ge{constructor(e){super();l(this,"target"),l(this,"type","VisCSS3DHelper");const i=e.element.getBoundingClientRect(),r=i.width,o=i.height;this.geometry=new ht(new Ze(r,o)),this.geometry.computeBoundingBox(),this.material=Ve(),this.matrixAutoUpdate=!1,this.matrix=e.matrix,this.matrixWorldNeedsUpdate=!1,this.matrixWorld=e.matrixWorld,this.target=e}raycast(e,t){const i=this.target,r=i.matrixWorld,o=this.geometry.boundingBox.clone();o.applyMatrix4(r),e.ray.intersectsBox(o)&&t.push({distance:e.ray.origin.distanceTo(i.position),object:i,point:i.position})}}class Cl extends ge{constructor(e){super();l(this,"target"),l(this,"type","VisCSS3DPlaneHelper");const i=e.element.getBoundingClientRect(),r=i.width,o=i.height;this.geometry=new ht(new Ze(r,o)),this.geometry.computeBoundingBox(),this.material=Ve(),this.matrixAutoUpdate=!1,this.matrix=e.matrix,this.matrixWorldNeedsUpdate=!1,this.matrixWorld=e.matrixWorld,this.target=e}}const Wi=class extends ut{constructor(s){super();l(this,"target"),l(this,"type","VisGroupHelper"),this.target=s,this.geometry.computeBoundingBox(),this.material=new dt({map:Wi.colorTexture}),this.material.depthTest=!1,this.material.depthWrite=!1,this.scale.set(5,5,5);const e=this.updateMatrixWorld.bind(this);this.updateMatrixWorld=t=>{const i=this.position,r=this.target.position;i.x=r.x,i.y=r.y,i.z=r.z,e(t)}}raycast(s,e){const t=this.matrixWorld,i=this.geometry.boundingBox.clone();if(i.applyMatrix4(t),s.ray.intersectsBox(i)){const r=this.target;e.push({distance:s.ray.origin.distanceTo(r.position),object:r,point:r.position})}}};let Ki=Wi;l(Ki,"colorTexture",new St(new kt({width:512,height:512}).draw(s=>{s.beginPath(),s.fillStyle="rgba(0, 0, 0, 0)",s.fillRect(0,0,512,512),s.closePath(),s.translate(256,200),s.beginPath(),s.fillStyle="yellow",s.fillRect(-200,0,400,200),s.closePath(),s.beginPath(),s.fillStyle="yellow",s.fillRect(-200,-70,200,70),s.closePath()}).get()));const Xi=class extends Ie{constructor(s){super();l(this,"target"),l(this,"type","VisLineHelper"),this.target=s,this.geometry.dispose(),this.geometry.copy(s.geometry),this.material=new ve({color:"rgb(255, 255, 255)",alphaMap:Xi.alphaTexture,transparent:!0,size:5,sizeAttenuation:!1}),this.matrixAutoUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.matrix=s.matrix,this.matrixWorld=s.matrixWorld,this.renderOrder=-1,this.raycast=()=>{}}};let Bs=Xi;l(Bs,"alphaTexture",new St(new kt({width:512,height:512,bgColor:"rgb(0, 0, 0)"}).draw(s=>{s.beginPath(),s.fillStyle="rgb(255, 255, 255)",s.arc(256,256,200,0,Math.PI*2),s.fill(),s.closePath()}).get()));class Al extends ge{constructor(e){super();l(this,"target"),l(this,"type","VisMeshHelper"),l(this,"cachaGeometryUUid");const t=1;this.target=e,this.geometry=new ht(e.geometry,t),this.cachaGeometryUUid=e.geometry.uuid,this.material=Ve(),this.raycast=()=>{},this.matrixAutoUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.matrix=e.matrix,this.matrixWorld=e.matrixWorld,this.onBeforeRender=()=>{const i=this.target;i.geometry.uuid!==this.cachaGeometryUUid&&(this.geometry.dispose(),this.geometry=new ht(i.geometry,t),this.cachaGeometryUUid=i.geometry.uuid)}}}const Vi=class extends Ie{constructor(s){super();l(this,"target"),l(this,"type","VisPointsHelper"),this.target=s,this.geometry.dispose(),this.geometry.copy(s.geometry),this.material.dispose(),this.material=new ve({color:"rgb(255, 255, 255)",alphaMap:Vi.alphaTexture,transparent:!0});const e=Array.isArray(s.material)?s.material[0]:s.material;e instanceof ve&&(this.material.size=e.size,this.material.sizeAttenuation=e.sizeAttenuation),this.matrixAutoUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.matrix=s.matrix,this.matrixWorld=s.matrixWorld,this.raycast=()=>{}}};let Yi=Vi;l(Yi,"alphaTexture",new St(new kt({width:512,height:512,bgColor:"rgb(0, 0, 0)"}).draw(s=>{s.beginPath(),s.strokeStyle="rgb(255, 255, 255)",s.lineWidth=4,s.strokeRect(0,0,512,512),s.closePath()}).get()));const _i=class extends ut{constructor(s){super();l(this,"target"),l(this,"type","VisSpriteHelper"),this.target=s,this.material.dispose(),this.material=new dt({color:"rgb(255, 255, 255)",alphaMap:_i.alphaTexture,transparent:!0,depthWrite:!1}),this.matrixAutoUpdate=!1,this.matrixWorldNeedsUpdate=!1,this.matrix=s.matrix,this.matrixWorld=s.matrixWorld,this.raycast=()=>{}}};let Qi=_i;l(Qi,"alphaTexture",new St(new kt({width:512,height:512,bgColor:"rgb(0, 0, 0)"}).draw(s=>{s.beginPath(),s.strokeStyle="rgb(255, 255, 255)",s.lineWidth=4,s.strokeRect(0,0,512,512),s.closePath()}).get()));class Tl extends Se{constructor(e={}){super();l(this,"helperGenerator",{[d.POINTLIGHT]:wl,[d.SPOTLIGHT]:Sl,[d.DIRECTIONALLIGHT]:El,[d.PERSPECTIVECAMERA]:Fi,[d.ORTHOGRAPHICCAMERA]:Fi,[d.MESH]:Al,[d.GROUP]:Ki,[d.SPRITE]:Qi,[d.POINTS]:Yi,[d.LINE]:Bs,[d.LINESEGMENTS]:Bs,[d.CSS3DOBJECT]:xl,[d.CSS3DPLANE]:Cl}),l(this,"helperFilter",{AmbientLight:!0,Object3D:!0,TransformControls:!0,Scene:!0}),l(this,"objectFilter",new Set),l(this,"helperMap",new Map),e.helperGenerator&&(this.helperGenerator=Object.assign(this.helperGenerator,e.helperGenerator)),e.helperFilter&&(this.helperFilter=Object.assign(this.helperFilter,e.helperFilter)),e.objectFilter&&(this.objectFilter=new Set(e.objectFilter.concat(Array.from(this.objectFilter))))}addFilteredObject(...e){for(const t of e)this.objectFilter.add(t);return this}addObjectHelper(e){if(this.objectFilter.has(e)||this.helperMap.has(e)||this.helperFilter[e.type]||e.type.toLocaleLowerCase().includes("helper"))return null;if(!this.helperGenerator[e.type])return console.warn(`object helper can not support this type object: '${e.type}'`),null;const t=new this.helperGenerator[e.type](e);return this.helperMap.set(e,t),t}disposeObjectHelper(e){if(this.objectFilter.has(e)||this.helperFilter[e.type]||e.type.toLocaleLowerCase().includes("helper"))return null;if(!this.helperMap.has(e))return console.warn("object helper manager can not found this object`s helper: ",e),null;const t=this.helperMap.get(e);return t.geometry&&t.geometry.dispose(),t.material&&(t.material instanceof Ft?t.material.dispose():t.material.forEach(i=>{i.dispose()})),this.helperMap.delete(e),t}}const Rl=function(s={}){if(!this.scene)return console.error("must install some scene plugin before ObjectHelper plugin."),!1;s.interact===void 0&&(s.interact=!0),s.interact&&(this.eventManager||(console.warn("must install eventManager plugin that can use interact function."),s.interact=!1));const e=new Tl,t=new Map,i=new Map,r=new Map,o=e.helperMap;this.objectHelperManager=e,!s.activeColor&&(s.activeColor="rgb(230, 20, 240)"),!s.hoverColor&&(s.hoverColor="rgb(255, 158, 240)"),!s.defaultColor&&(s.defaultColor="rgb(255, 255, 255)"),!s.selectedColor&&(s.selectedColor=s.activeColor);const n=new W(s.defaultColor).getHex(),a=new W(s.activeColor).getHex(),h=new W(s.hoverColor).getHex(),c=new W(s.selectedColor).getHex(),m=new WeakSet,y=w=>{const C=w.objects;for(const u of C){const b=e.addObjectHelper(u);if(!!b&&(b.material.color.setHex(n),this.scene.add(b),s.interact)){const p=()=>{var M;((M=this.transformControls)==null?void 0:M.dragging)||this.selectionBox&&this.selectionBox.has(u)||b.material.color.setHex(h)},f=()=>{var M;((M=this.transformControls)==null?void 0:M.dragging)||this.selectionBox&&this.selectionBox.has(u)||b.material.color.setHex(n)},g=()=>{var M;((M=this.transformControls)==null?void 0:M.dragging)||this.selectionBox&&this.selectionBox.has(u)||b.material.color.setHex(a)};u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",f),u.addEventListener("click",g),t.set(u,p),i.set(u,f),r.set(u,g)}}},S=w=>{const C=w.objects;for(const u of C){const b=e.disposeObjectHelper(u);!b||(this.scene.remove(b),s.interact&&(u.removeEventListener("pointerenter",t.get(u)),u.removeEventListener("pointerleave",i.get(u)),u.removeEventListener("click",r.get(u)),t.delete(u),i.delete(u),r.delete(u)))}},x=w=>{m.has(w)||(w.traverse(C=>{const u=e.addObjectHelper(C);u&&w.add(u)}),m.add(w))};this.scene.addEventListener("afterAdd",y),this.scene.addEventListener("afterRemove",S),this.setObjectHelper=function(w){return w.show?o.forEach(C=>{this.scene.add(C)}):o.forEach(C=>{this.scene.remove(C)}),this},this.addEventListener("setScene",w=>{const C=w.scene;!m.has(C)&&x(C),C.hasEventListener("afterAdd",y)||C.addEventListener("afterAdd",y),C.hasEventListener("afterRemove",S)||C.addEventListener("afterRemove",S)});const E=new Set;return this.completeSet.add(()=>{this.selectionBox&&this.addEventListener("selected",w=>{E.forEach(C=>{C.material.color.setHex(n)}),E.clear();for(const C of w.objects)if(o.has(C)){const u=o.get(C);u.material.color.setHex(c),E.add(u)}})}),!0},Ll=function(s={}){if(this.selectionBox)return console.warn("engine has installed selection plugin."),!1;if(!this.eventManager)return console.warn("must install eventManager plugin before Selection plugin."),!1;this.selectionBox=new Set;const e=()=>{const t=[];this.IS_ENGINESUPPORT&&this.selectionBox.forEach(i=>{const r=this.compilerManager.getObjectSymbol(i);r?t.push(r):console.warn("selection plugin can not font vid in compilerManager.",i)}),this.dispatchEvent({type:"selected",objects:[...this.selectionBox],objectSymbols:t})};return this.setSelectionBox=function(t){this.selectionBox.clear();for(const i of t.objects)this.selectionBox.add(i);return e(),this},this.eventManager.addEventListener("click",t=>{var i,r,o,n;if((i=this.transformControls)==null?void 0:i.dragging)return;const a=t.intersections;if(t.ctrlKey||this.selectionBox.clear(),this.eventManager.penetrate)for(const h of a){if(t.ctrlKey&&((r=this.selectionBox)==null?void 0:r.has(h.object))){this.selectionBox.delete(h.object);continue}this.selectionBox.add(h.object)}else if(a.length){const h=a[0].object;if(t.ctrlKey&&((o=this.selectionBox)==null?void 0:o.has(h))){this.selectionBox.delete(h);return}(n=this.selectionBox)==null||n.add(h)}e()}),!0},Ol=function(s={}){if(this.css3DRenderer)return console.warn("this has installed css3DRenderer plugin."),!1;this.css3DRenderer=new fn;const e=this.css3DRenderer.domElement;if(e.style.position="absolute",e.style.top="0",e.style.left="0",this.addEventListener("setDom",t=>{t.dom.appendChild(this.css3DRenderer.domElement)}),this.addEventListener("setSize",t=>{this.css3DRenderer.setSize(t.width,t.height)}),this.renderManager)this.renderManager.removeEventListener("render",this.render),this.renderManager.addEventListener("render",t=>{this.css3DRenderer.render(this.scene,this.camera)});else if(this.webGLRenderer){const t=this.render.bind(this);this.render=function(){return t(),this.webGLRenderer.render(this.scene,this.camera),this}}else this.render=function(){return this.webGLRenderer.render(this.scene,this.camera),this};return!0};var N;(function(s){s.WEBGLRENDERER="WebGLRenderer",s.CSS3DRENDERER="CSS3DRenderer",s.SCENE="Scene",s.MODELINGSCENE="ModelingScene",s.RENDERMANAGER="RenderManager",s.ORBITCONTROLS="OrbitControls",s.STATS="Stats",s.EFFECTCOMPOSER="EffectComposer",s.POINTERMANAGER="PointerManager",s.EVENTMANAGER="EventManager",s.TRANSFORMCONTROLS="TransformControls",s.LOADERMANAGER="LoaderManager",s.RESOURCEMANAGER="ResourceManager",s.DATASUPPORTMANAGER="DataSupportManager",s.COMPILERMANAGER="CompilerManager",s.KEYBOARDMANAGER="KeyboardManager",s.AXESHELPER="AxesHelper",s.GRIDHELPER="GridHelper",s.VIEWPOINT="Viewpoint",s.DISPLAYMODE="DisplayMode",s.OBJECTHELPER="ObjectHelper",s.SELECTION="Selection"})(N||(N={}));const it=class extends Se{constructor(){super();l(this,"completeSet"),l(this,"camera",new se),l(this,"scene",new Me),l(this,"IS_ENGINESUPPORT",!1),l(this,"dom"),l(this,"webGLRenderer"),l(this,"css3DRenderer"),l(this,"orbitControls"),l(this,"transformControls"),l(this,"effectComposer"),l(this,"renderManager"),l(this,"pointerManager"),l(this,"eventManager"),l(this,"loaderManager"),l(this,"resourceManager"),l(this,"dataSupportManager"),l(this,"compilerManager"),l(this,"keyboardManager"),l(this,"objectHelperManager"),l(this,"stats"),l(this,"displayMode"),l(this,"selectionBox"),l(this,"getScreenshot"),l(this,"setStats"),l(this,"setTransformControls"),l(this,"setViewpoint"),l(this,"setDisplayMode"),l(this,"setAxesHelper"),l(this,"setGridHelper"),l(this,"setObjectHelper"),l(this,"setSelectionBox"),l(this,"loadResources"),l(this,"loadResourcesAsync"),l(this,"registerResources"),l(this,"toJSON"),l(this,"exportConfig"),l(this,"applyConfig"),l(this,"reactiveConfig"),l(this,"getConfigBySymbol"),l(this,"removeConfigBySymbol"),l(this,"getObjectSymbol"),l(this,"getObjectBySymbol"),l(this,"play"),l(this,"stop"),l(this,"render"),this.completeSet=new Set,this.render=function(){return console.warn("can not install some plugin"),this},this.camera.position.set(50,50,50),this.addEventListener("setSize",s=>{this.camera.aspect=s.width/s.height,this.camera.updateProjectionMatrix()})}optimizeMemory(){Object.keys(this).forEach(s=>{this[s]===void 0&&delete this[s]})}install(s,e){return it.pluginHandler.has(s)?it.pluginHandler.get(s).call(this,e):console.error(`engine can not support ${s} plugin.`),this}complete(){return this.completeSet.forEach(s=>{s(this)}),this.completeSet.clear(),this}dispose(){return this.dispatchEvent({type:"dispose"}),this}setDom(s){return this.dom=s,this.dispatchEvent({type:"setDom",dom:s}),this}setSize(s,e){var t,i;return s&&s<=0||e&&e<=0?(console.warn(`you must be input width and height bigger then zero, width: ${s}, height: ${e}`),this):(!s&&(s=((t=this.dom)==null?void 0:t.offsetWidth)||window.innerWidth),!e&&(e=((i=this.dom)==null?void 0:i.offsetHeight)||window.innerHeight),this.dispatchEvent({type:"setSize",width:s,height:e}),this)}setCamera(s){if(typeof s=="object"&&s instanceof Wr)this.camera=s,this.dispatchEvent({type:"setCamera",camera:s});else if(this.IS_ENGINESUPPORT){const e=this.compilerManager.getObjectBySymbol(s);e?(this.camera=e,this.dispatchEvent({type:"setCamera",camera:e})):console.warn(`can not found camera in compilerManager: ${s}`)}else console.warn("engine is not a Engine support but use symbol to found camera.");return this}setScene(s){if(typeof s=="object"&&s instanceof Me)this.scene=s,this.dispatchEvent({type:"setScene",scene:s});else if(this.IS_ENGINESUPPORT){const e=this.compilerManager.getObjectBySymbol(s);e?(this.scene=e,this.dispatchEvent({type:"setScene",scene:e})):console.warn(`can not found camera in compilerManager: ${s}`)}else console.warn("engine is not a Engine support but use symbol to found camera.");return this}};let U=it;l(U,"pluginHandler",new Map);l(U,"register",function(s,e){return it.pluginHandler&&it.pluginHandler.set(s,e),it});l(U,"dispose",function(){it.pluginHandler=void 0});U.register(N.WEBGLRENDERER,In);U.register(N.CSS3DRENDERER,Ol);U.register(N.EFFECTCOMPOSER,Tn);U.register(N.RENDERMANAGER,En);U.register(N.POINTERMANAGER,Ln);U.register(N.EVENTMANAGER,Dn);U.register(N.LOADERMANAGER,Kn);U.register(N.RESOURCEMANAGER,Vo);U.register(N.DATASUPPORTMANAGER,Aa);U.register(N.COMPILERMANAGER,ml);U.register(N.KEYBOARDMANAGER,yl);U.register(N.ORBITCONTROLS,xn);U.register(N.TRANSFORMCONTROLS,jn);U.register(N.AXESHELPER,bl);U.register(N.GRIDHELPER,vl);U.register(N.OBJECTHELPER,Rl);U.register(N.DISPLAYMODE,Ml);U.register(N.VIEWPOINT,Sn);U.register(N.STATS,An);U.register(N.SELECTION,Ll);const Zi=class{constructor(){l(this,"supportData"),l(this,"supportDataType")}create(s){return s?(this.supportData={},this.supportDataType=s,this):(console.warn("you must give a module type in create params"),this)}add(s){return!this.supportData||!this.supportDataType?(console.warn("you must call 'create' method before the 'add' method"),this):s.type?Zi.configModelMap[s.type]!==this.supportDataType?(console.warn(`current generator create config which module is in: ${this.supportDataType}, but you provide type is '${s.type}'`),this):(this.supportData[s.vid]=I(s.type,s),this):(console.warn("config can not found attribute 'type'"),this)}get(){return this.supportDataType=void 0,this.supportData?this.supportData:{}}};let Dl=Zi;l(Dl,"configModelMap",ss);const Hs=new $s("rgb(255, 255, 255)",.5,200,1);Hs.position.set(-30,5,20);Hs.castShadow=!0;const hs=new L(new K(80,2,80),new ei({color:"rgb(255, 255, 255)"}));hs.position.set(0,-11,0);hs.receiveShadow=!0;hs.castShadow=!0;const ze=class{constructor(s){l(this,"material"),l(this,"dom"),l(this,"renderer"),l(this,"scene"),l(this,"camera"),l(this,"object");const e=new bs({antialias:!0,preserveDrawingBuffer:!0});e.setPixelRatio(window.devicePixelRatio),e.setClearColor("rgb(150, 150, 150)"),e.shadowMap.enabled=!0,e.shadowMap.type=ai;const t=new Me,i=new se(45,window.innerWidth/window.innerHeight,1,500);i.position.set(0,0,35),i.up.x=0,i.up.y=1,i.up.z=0,i.lookAt(new O(0,0,0)),t.add(ze.ambientLight),t.add(ze.pointLight),t.add(ze.plane),this.scene=t,this.renderer=e,this.camera=i,this.object=new Qe,(s==null?void 0:s.material)&&this.setMaterial(s.material),(s==null?void 0:s.dom)&&this.setDom(s.dom)}setMaterial(s){if(this.scene.remove(this.object),this.material=s,s.type.includes("Mesh"))this.object=new L(ze.geometry,s);else if(s.type.includes("Line"))this.object=new ue(ze.geometry,s);else if(s.type.includes("Ponits"))this.object=new Ie(ze.geometry,s);else if(s.type.includes("Sprite"))this.object=new ut(s);else return console.warn(`material displayer can not support this type material: '${s.type}'`),this;return this.object.castShadow=!0,this.object.receiveShadow=!0,this.scene.add(this.object),this}setDom(s){return this.dom=s,this.setSize(),s.appendChild(this.renderer.domElement),this}setSize(s,e){if(s&&e)this.camera.aspect=s/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(s,e,!0);else{if(!this.dom)return console.warn("material displayer must set dom before setSize with empty parameters"),this;const t=this.dom;this.camera.aspect=t.offsetWidth/t.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(t.offsetWidth,t.offsetHeight,!0)}return this}render(){this.renderer.render(this.scene,this.camera)}dispose(){this.renderer.dispose()}};let Gt=ze;l(Gt,"ambientLight",new Wt("rgb(255, 255, 255)",.7));l(Gt,"pointLight",Hs);l(Gt,"geometry",new ps(10,12,12));l(Gt,"plane",hs);l(Gt,"dispose",()=>{ze.geometry.dispose(),ze.plane.geometry.dispose()});const qi=class{constructor(s){l(this,"dom"),l(this,"texture"),l(this,"renderer"),l(this,"scene"),l(this,"camera");const e=new bs({antialias:!0,preserveDrawingBuffer:!0});e.setPixelRatio(window.devicePixelRatio),e.setClearColor("rgb(150, 150, 150)"),e.shadowMap.enabled=!0,e.shadowMap.type=ai;const t=new Me,i=new se(45,window.innerWidth/window.innerHeight,1,500);i.position.set(0,0,35),i.up.x=0,i.up.y=1,i.up.z=0,i.lookAt(new O(0,0,0)),t.add(qi.ambientLight),this.scene=t,this.renderer=e,this.camera=i,(s==null?void 0:s.texture)&&this.setTexture(s.texture),(s==null?void 0:s.dom)&&this.setDom(s.dom)}setTexture(s){return this.scene.background=s,this}setDom(s){return this.dom=s,this.setSize(),s.appendChild(this.renderer.domElement),this}setSize(s,e){if(s&&e)this.camera.aspect=s/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(s,e,!0);else{if(!this.dom)return console.warn("texture displayer must set dom before setSize with empty parameters"),this;const t=this.dom;this.camera.aspect=t.offsetWidth/t.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(t.offsetWidth,t.offsetHeight,!0)}return this}render(){this.renderer.render(this.scene,this.camera)}dispose(){this.renderer.dispose()}};let Pl=qi;l(Pl,"ambientLight",new Wt("rgb(255, 255, 255)",1));class jl extends U{constructor(e={},t={}){super();l(this,"IS_ENGINESUPPORT",!0),this.install(N.LOADERMANAGER).install(N.RESOURCEMANAGER,{resources:t}).install(N.POINTERMANAGER).install(N.EVENTMANAGER).install(N.RENDERMANAGER).install(N.DATASUPPORTMANAGER,e).install(N.COMPILERMANAGER)}loadLifeCycle(e){const t=this.dataSupportManager;e.texture&&t.load({texture:e.texture}),e.material&&t.load({material:e.material}),delete e.texture,delete e.material,t.load(e)}removeLifeCycle(e){const t=this.dataSupportManager,i=e[A.TEXTURE]||{},r=e[A.MATERIAL]||{},o=e.assets||[];delete e.texture,delete e.material,delete e.assets,t.remove(e),t.remove({[A.MATERIAL]:r}),t.remove({[A.TEXTURE]:i});const n=this.resourceManager,a=this.loaderManager;o.forEach(h=>{n.remove(h),a.remove(h)})}loadConfig(e,t){const i=this.renderManager.hasRendering();if(i&&this.renderManager.stop(),e.assets&&e.assets.length){const r=o=>{delete e.assets,this.loadLifeCycle(e),this.resourceManager.removeEventListener("mapped",r),t&&t(o),i?this.renderManager.play():this.renderManager.render()};this.resourceManager.addEventListener("mapped",r),this.loaderManager.reset().load(e.assets)}else this.loadLifeCycle(e),t&&t(),i?this.renderManager.play():this.renderManager.render();return this}loadConfigAsync(e){return new Promise((t,i)=>{const r=this.renderManager.hasRendering();if(r&&this.renderManager.stop(),e.assets&&e.assets.length){const o=n=>{delete e.assets,this.loadLifeCycle(e),this.resourceManager.removeEventListener("mapped",o),r?this.renderManager.play():this.renderManager.render(),t(n)};this.resourceManager.addEventListener("mapped",o),this.loaderManager.reset().load(e.assets)}else this.loadLifeCycle(e),r?this.renderManager.play():this.renderManager.render(),t(void 0)})}removeConfig(e){this.removeLifeCycle(e)}getObjectConfig(e){const t=this.getObjectSymbol(e);return t?this.getConfigBySymbol(t):null}}class Il extends jl{constructor(e){super(e);this.install(N.WEBGLRENDERER,{antialias:!0,alpha:!0}).install(N.EFFECTCOMPOSER,{WebGLMultisampleRenderTarget:!0}).install(N.ORBITCONTROLS).complete()}}const Nl="0.1.3-2";window.__THREE__||console.error("vis-three dependent on three.js module, pleace run 'npm i three' first.");window.__VIS__?console.warn("Duplicate vis-three frames are introduced"):window.__VIS__=Nl;Me.prototype.add=function(...s){if(!arguments.length)return this;if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}const e=s[0];if(e===this)return console.error("THREE.Object3D.add: object can't be added as a child of itself.",s),this;if(e&&e.isObject3D){if(e.parent!==null){const t=this.children.indexOf(e);t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent({type:"removed"}))}e.parent=this,this.children.push(e),e.dispatchEvent({type:"added"})}else console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",s);return this};const Bl=Me.prototype.add,Hl=Me.prototype.remove;Me.prototype.add=function(...s){return Bl.call(this,...s),this.dispatchEvent({type:"afterAdd",objects:s}),this};Me.prototype.remove=function(...s){return Hl.call(this,...s),this.dispatchEvent({type:"afterRemove",objects:s}),this};let ke;ke=new Il;ke.loaderManager.setPath("/vis-three/");(async()=>{const s=await ke.loadResourcesAsync(["/model/three.obj","/model/vis.obj","/texture/vis/colorMap.png","/skyBox/lightblue/px.png","/skyBox/lightblue/py.png","/skyBox/lightblue/pz.png","/skyBox/lightblue/nx.png","/skyBox/lightblue/ny.png","/skyBox/lightblue/nz.png"]);console.log(s),I.injectEngine=ke,I(d.WEBGLRENDERER,{clearColor:"rgba(10, 2, 10, 1)",physicallyCorrectLights:!0,toneMapping:en,toneMappingExposure:3}),I(d.ORBITCONTROLS,{autoRotate:!0,rotateSpeed:.01,enablePan:!1,enableZoom:!1,enableRotate:!1});const e=I(d.CUBETEXTURE,{cube:{px:"/skyBox/lightblue/px.png",py:"/skyBox/lightblue/py.png",pz:"/skyBox/lightblue/pz.png",nx:"/skyBox/lightblue/nx.png",ny:"/skyBox/lightblue/ny.png",nz:"/skyBox/lightblue/nz.png"}}),t=I(d.SCENE,{environment:e.vid,background:e.vid});I.injectScene=t.vid;const i=I(d.PERSPECTIVECAMERA,{far:500,near:.01,position:{x:90,y:-90,z:100}});I(d.AMBIENTLIGHT,{intensity:1}),I(d.DIRECTIONALLIGHT,{color:"rgb(255, 255, 255)",position:{x:-10,y:40,z:20},intensity:800*4*Math.PI}),I(d.DIRECTIONALLIGHT,{color:"rgb(255, 255, 255)",position:{x:10,y:40,z:-20},intensity:800*4*Math.PI});const r=s.resourceConfig,o=I(d.LOADGEOMETRY,Object.assign(Object.values(r["/model/three.obj"].geometry)[0],{rotation:{x:Math.PI/2,y:-(Math.PI/180)*30},position:{x:.13,y:-.14},scale:{x:80,y:80,z:80}})),n=I(d.MESHSTANDARDMATERIAL,{color:"white",metalness:1,roughness:0,envMapIntensity:.8}),a=I(d.MESH,{geometry:o.vid,material:n.vid}),h=I(d.LOADGEOMETRY,Object.assign(Object.values(r["/model/vis.obj"].geometry)[0],{scale:{x:6,y:6,z:6}})),c=I(d.IMAGETEXTURE,{url:"/texture/vis/colorMap.png"}),m=I(d.MESHSTANDARDMATERIAL,{map:c.vid,metalness:1,roughness:0,transparent:!0,opacity:.8}),y=I(d.MESH,{geometry:h.vid,material:m.vid});I(d.SCRIPTANIMATION,{target:a.vid,attribute:".rotation.z",script:tt.generateConfig("linearTime",{multiply:.2})}),I(d.SCRIPTANIMATION,{target:y.vid,attribute:".rotation.y",script:tt.generateConfig("linearTime",{multiply:.7})}),ke.setScene(t.vid),ke.setCamera(i.vid),console.log(ke)})();var zl=(s,e)=>{const t=s.__vccOpts||s;for(const[i,r]of e)t[i]=r;return t};const kl=hr({setup(){const s=ur(),e=t=>{window.open(t)};return dr(()=>{ke.setDom(s.value).setSize().play(),window.addEventListener("resize",()=>{ke.setSize()})}),{jump:e,docs:"/vis-three/docs/index.html",renderWindow:s}}}),Ji=s=>(yr("data-v-dee2f426"),s=s(),br(),s),Gl={class:"App-container"},Ul={class:"ui"},Fl=Ji(()=>Mt("div",{class:"title"},"VIS-THREE",-1)),Wl=Ji(()=>Mt("div",{class:"split-line"},null,-1)),Kl={class:"operation"},Xl=Mr("\u6587\u6863\uFF08docs\uFF09"),Vl={ref:"renderWindow",class:"three"};function Yl(s,e,t,i,r,o){const n=pr("a-button");return vr(),fr("div",Gl,[Mt("div",Ul,[Fl,Wl,Mt("div",Kl,[mr(n,{type:"link",onClick:e[0]||(e[0]=a=>s.jump(s.docs)),size:"large"},{default:gr(()=>[Xl]),_:1})])]),Mt("div",Vl,null,512)])}var _l=zl(kl,[["render",Yl],["__scopeId","data-v-dee2f426"]]);Er(_l).use(wr).mount("#app");
