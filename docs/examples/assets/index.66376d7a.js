var h=Object.defineProperty;var l=(s,e,t)=>e in s?h(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var o=(s,e,t)=>(l(s,typeof e!="symbol"?e+"":e,t),t);import{t as c,a as r}from"./index.8b9e7665.js";import{a as E,b as m}from"./index.6ff295ff.js";const w="@vis-three/keyboard-move-render-strategy";class y{constructor(e,t){o(this,"object");o(this,"domElement");o(this,"enabled",!0);o(this,"movementSpeed",1);o(this,"moveForward",!1);o(this,"moveBackward",!1);o(this,"moveLeft",!1);o(this,"moveRight",!1);o(this,"moveUp",!1);o(this,"moveDown",!1);o(this,"_onKeyDown",this.onKeyDown.bind(this));o(this,"_onKeyUp",this.onKeyUp.bind(this));t===void 0&&(console.warn('THREE.KeyboardMoveControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.object=e,this.domElement=t,window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp)}setCamera(e){this.object=e}setDom(e){this.domElement=e}onKeyDown(e){switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}onKeyUp(e){switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}update(e){if(this.enabled===!1)return;const t=e*this.movementSpeed;this.moveForward&&this.object.translateZ(-t),this.moveBackward&&this.object.translateZ(t),this.moveLeft&&this.object.translateX(-t),this.moveRight&&this.object.translateX(t),this.moveUp&&this.object.translateY(t),this.moveDown&&this.object.translateY(-t)}dispose(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp)}}const b="@vis-three/keyboard-move-controls-plugin",v=c(b),R=function(s={}){let e,t,d;return{name:v,install(a){const n=new y(a.camera,a.dom);n.movementSpeed=s.movementSpeed||1,a.keyboardMoveControls=n,e=i=>{n.setDom(i.dom)},a.addEventListener(r.SETDOM,e),t=i=>{n.setCamera(i.camera)},a.addEventListener(r.SETCAMERA,t),d=i=>{n.update(i.delta)},a.addEventListener(r.RENDER,d)},dispose(a){a.removeEventListener(r.SETDOM,e),a.removeEventListener(r.SETCAMERA,t),a.removeEventListener(r.RENDER,d)}}},f=c(w),k=function(){let s;return{name:f,condition:[v,E],exec(e){s=t=>{e.keyboardMoveControls.update(t.delta)},e.renderManager.addEventListener(m.RENDER,s)},rollback(e){e.renderManager.removeEventListener(m.RENDER,s)}}};export{R as K,k as a};
