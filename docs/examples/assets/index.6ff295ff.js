var s=Object.defineProperty;var h=(e,a,t)=>a in e?s(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var i=(e,a,t)=>(h(e,typeof a!="symbol"?a+"":a,t),t);import{e as o,t as l,f as m}from"./index.8b9e7665.js";import{C as p}from"./three.a7f96461.js";var r;(function(e){e.RENDER="render",e.PLAY="play",e.STOP="stop"})(r||(r={}));class u extends o{constructor(t=0){super();i(this,"clock",new p);i(this,"animationFrame",-1);i(this,"fps",0);i(this,"timer",null);i(this,"playFun",()=>{});i(this,"render",()=>{this.dispatchEvent({type:r.RENDER,delta:this.clock.getDelta(),total:this.clock.getElapsedTime()})});i(this,"play",()=>{if(this.hasRendering()){console.warn("render manager is rendering.");return}this.dispatchEvent({type:r.PLAY}),this.playFun()});i(this,"stop",()=>{this.animationFrame!==-1&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=-1),this.timer&&(clearTimeout(this.timer),this.timer=null),this.dispatchEvent({type:r.STOP})});i(this,"hasRendering",()=>Boolean(this.animationFrame!==-1||this.timer));i(this,"hasVaildRender",()=>this.useful());this.setFPS(t)}setFPS(t){let n=!1;return this.animationFrame!==-1&&(cancelAnimationFrame(this.animationFrame),n=!0),this.timer&&(clearTimeout(this.timer),n=!0),this.fps=t,t<=0?(this.fps=0,this.playFun=()=>{this.render(),this.animationFrame=requestAnimationFrame(this.playFun)}):this.playFun=()=>{this.timer=setTimeout(()=>{this.playFun()},t),this.render()},n&&this.playFun(),this}dispose(){this.hasRendering()&&this.stop(),this.clear()}}const d="@vis-three/render-manager-plugin",c=l(d),y=m({name:c,install(e){e.renderManager=new u,e.render=function(){return this.renderManager.render(),this},e.play=function(){return this.renderManager.play(),this},e.stop=function(){return this.renderManager.stop(),this}},dispose(e){e.renderManager.stop(),e.renderManager.dispose()}});export{y as R,c as a,r as b};
