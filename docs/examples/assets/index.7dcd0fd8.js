import{t as L,a as O}from"./index.5dcba3b7.js";import{a as H}from"./index.930d272a.js";import{a as A,b as c,S as R}from"./index.6e2828da.js";import{a as G}from"./index.34bd9c4c.js";import{a as F}from"./index.1b4ee7e6.js";import{a as P}from"./index.90980216.js";import{a as k}from"./index.c5a99b15.js";import{b as v,c as D,d as x}from"./index.ec8d28aa.js";import{I as h,y as K}from"./three.057c7ef5.js";import{b as j}from"./index.688a05f5.js";import{a as B,A as m,b as S}from"./index.96224b3a.js";const U="@vis-three/orbit-viewpoint-strategy",V=L(U),de=function(){let r;return{name:V,condition:[H,A],exec(t){const e=()=>{t.orbitControls.enableRotate=!1},n={[c.DEFAULT]:()=>{t.orbitControls.enableRotate=!0},[c.TOP]:e,[c.BOTTOM]:e,[c.RIGHT]:e,[c.LEFT]:e,[c.FRONT]:e,[c.BACK]:e};r=d=>{const l=d.viewpoint;t.orbitControls.target.set(0,0,0),n[l]&&n[l]()},t.addEventListener(R,r)},rollback(t){t.removeEventListener(R,r)}}},Y="@vis-three/stats-render-strategy",W=L(Y),pe=function(){let r,t;return{name:W,condition:[F,G],exec(e){r=()=>{e.stats.update()},t=e.setStats,e.setStats=function(n){return t(n),n?this.renderManager.addEventListener("render",r):this.renderManager.removeEventListener("render",r),this}},rollback(e){e.setStats=t}}},$="@vis-three/grid-viewpoint-strategy",Z=L($),Ee=function(){let r;return{name:Z,condition:[A,P],exec(t){const e=t.gridHelper,n=()=>{e.rotation.set(0,0,0)},d=()=>{e.rotation.set(0,0,Math.PI/2)},l=()=>{e.rotation.set(Math.PI/2,0,0)},p={[c.DEFAULT]:n,[c.TOP]:n,[c.BOTTOM]:n,[c.RIGHT]:d,[c.LEFT]:d,[c.FRONT]:l,[c.BACK]:l};r=T=>{const E=T.viewpoint;p[E]&&p[E](),e.updateMatrix(),e.updateMatrixWorld()},t.addEventListener(R,r)},rollback(t){t.removeEventListener(R,r)}}},z="@vis-three/transform-keyboard-strategy",X=L(z),ue=function(){return{name:X,condition:[k,v],exec(r){const t=r.transformControls;r.keyboardManager.register({shortcutKey:["shift"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u9501\u5B9A\u6B65\u5E45",keyup:e=>{e==null||e.preventDefault(),t.translationSnap=null,t.rotationSnap=null,t.scaleSnap=null},keydown:e=>{e==null||e.preventDefault(),e==null||e.preventRepeat(),t.translationSnap=5,t.rotationSnap=Math.PI/180*10,t.scaleSnap=.1}}).register({shortcutKey:["r"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u6A21\u5F0F\uFF1A\u65CB\u8F6C",keyup:e=>{e==null||e.preventDefault(),t&&(t.mode="rotate")}}).register({shortcutKey:["t"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u6A21\u5F0F\uFF1A\u79FB\u52A8",keyup:e=>{e==null||e.preventDefault(),t&&(t.mode="translate")}}).register({shortcutKey:["e"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u6A21\u5F0F\uFF1A\u7F29\u653E",keyup:e=>{e==null||e.preventDefault(),t.mode="scale"}}).register({shortcutKey:["x"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u5207\u6362\u8F74\uFF1Ax",keyup:e=>{e==null||e.preventDefault(),t.showX=!t.showX}}).register({shortcutKey:["y"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u5207\u6362\u8F74\uFF1Ay",keyup:e=>{e==null||e.preventDefault(),!(e!=null&&e.ctrlKey)&&(t.showY=!t.showY)}}).register({shortcutKey:["z"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u5207\u6362\u8F74\uFF1Az",keyup:e=>{e==null||e.preventDefault(),!(e!=null&&e.ctrlKey)&&(t.showZ=!t.showZ)}}).register({shortcutKey:["space"],desp:"\u53D8\u6362\u63A7\u5236\u5668\u5207\u6362\u53D8\u6362\u7A7A\u95F4",keyup:e=>{e==null||e.preventDefault(),t.space=t.space==="local"?"world":"local"}})},rollback(r){r.keyboardManager.cancel(["shift"]).cancel(["r"]).cancel(["t"]).cancel(["e"]).cancel(["x"]).cancel(["y"]).cancel(["z"]).cancel(["space"])}}},J="@vis-three/helper-select-interact-strategy",q=L(J),fe=function(r={}){const t=new Map,e=new Map,n=new Map,d=new Set;let l,p,T,E;return{name:q,condition:[j,B,D],exec(s){r.interact===void 0&&(r.interact=!0);const y=s.objectHelperManager,C=s.objectHelperManager.objectHelperMap;!r.activeColor&&(r.activeColor="rgb(230, 20, 240)"),!r.hoverColor&&(r.hoverColor="rgb(255, 158, 240)"),!r.defaultColor&&(r.defaultColor="rgb(255, 255, 255)"),!r.selectedColor&&(r.selectedColor=r.activeColor);const b=new h(r.defaultColor).getHex(),_=new h(r.activeColor).getHex(),g=new h(r.hoverColor).getHex(),w=new h(r.selectedColor).getHex(),u=(i,a)=>{i.material.color?i.material.color.setHex(a):i.material instanceof K&&i.material.uniforms.color.value.setHex(a)};l=i=>{const a=i.objects;for(const o of a){const f=y.addObjectHelper(o);if(!!f&&(u(f,b),r.interact)){const N=()=>{s.transformControls.dragging||s.selectionBox&&s.selectionBox.has(o)||u(f,g)},I=()=>{s.transformControls.dragging||s.selectionBox&&s.selectionBox.has(o)||u(f,b)},M=()=>{s.transformControls.dragging||s.selectionBox&&s.selectionBox.has(o)||u(f,_)};o.addEventListener("pointerenter",N),o.addEventListener("pointerleave",I),o.addEventListener("click",M),t.set(o,N),e.set(o,I),n.set(o,M)}}},p=i=>{const a=i.objects;for(const o of a)!y.disposeObjectHelper(o)||r.interact&&(o.removeEventListener("pointerenter",t.get(o)),o.removeEventListener("pointerleave",e.get(o)),o.removeEventListener("click",n.get(o)),t.delete(o),e.delete(o),n.delete(o))},s.scene.addEventListener(m,l),s.scene.addEventListener(S,p),T=i=>{const a=i.scene;a.hasEventListener(m,l)||a.addEventListener(m,l),a.hasEventListener(S,p)||a.addEventListener(S,p)},s.addEventListener(O.SETSCENE,T),E=i=>{d.forEach(a=>{u(a,b)}),d.clear();for(const a of i.objects)if(C.has(a)){const o=C.get(a);u(o,w),d.add(o)}},s.addEventListener(x,E)},rollback(s){s.scene.removeEventListener(m,l),s.scene.removeEventListener(S,p),s.removeEventListener(x,E),s.removeEventListener(O.SETSCENE,T),t.clear(),e.clear(),n.clear(),d.clear()}}};export{Ee as G,fe as H,de as O,pe as S,ue as T};
