var k=Object.defineProperty;var v=(r,o,e)=>o in r?k(r,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[o]=e;var n=(r,o,e)=>(v(r,typeof o!="symbol"?o+"":o,e),e);import{t as L,a as c,v as g}from"../index.4a26448f.js";import{aa as P,V as p,bx as C,M as w,B as M,a as _,P as f,L as x,b as y}from"../three.073ebd5b.js";import{W as D,C as b}from"../index.523a52b5.js";import{R as S}from"../index.4d1bf992.js";import{E as R,a as T}from"../index.bda3cae9.js";import{G as A}from"../index.cfd9758f.js";const I="@vis-three/pointer-lock-controls-plugin",s=new P(0,0,0,"YXZ"),i=new p,F={type:"change"},G={type:"lock"},N={type:"unlock"},h=Math.PI/2;class O extends C{constructor(e,t){super();n(this,"domElement");n(this,"camera");n(this,"isLocked",!1);n(this,"minPolarAngle",0);n(this,"maxPolarAngle",Math.PI);n(this,"pointerSpeed",1);n(this,"direction",new p(0,0,-1));n(this,"_mouseMove",this.onMouseMove.bind(this));n(this,"_pointerlockChange",this.onPointerlockChange.bind(this));n(this,"_pointerlockError",this.onPointerlockError.bind(this));t===void 0&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.camera=e,this.connect()}setDom(e){this.dispose(),this.domElement=e,this.connect()}setCamera(e){this.camera=e}getDirection(e){return e.copy(this.direction).applyQuaternion(this.camera.quaternion)}onMouseMove(e){if(this.isLocked===!1)return;const t=e.movementX||0,a=e.movementY||0;s.setFromQuaternion(this.camera.quaternion),s.y-=t*.002*this.pointerSpeed,s.x-=a*.002*this.pointerSpeed,s.x=Math.max(h-this.maxPolarAngle,Math.min(h-this.minPolarAngle,s.x)),this.camera.quaternion.setFromEuler(s),this.dispatchEvent(F)}onPointerlockChange(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(G),this.isLocked=!0):(this.dispatchEvent(N),this.isLocked=!1)}onPointerlockError(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._mouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._pointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._pointerlockError)}dispose(){this.domElement.ownerDocument.removeEventListener("mousemove",this._mouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._pointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._pointerlockError)}getObject(){return this.camera}moveForward(e){const t=this.camera;i.setFromMatrixColumn(t.matrix,0),i.crossVectors(t.up,i),t.position.addScaledVector(i,e)}moveRight(e){i.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(i,e)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}const V=L(I),q=function(){let r,o;return{name:V,install(e){const t=new O(e.camera,e.dom);e.pointerLockControls=t,r=a=>{t.setDom(a.dom)},e.addEventListener(c.SETDOM,r),o=a=>{t.setCamera(a.camera)},e.addEventListener(c.SETCAMERA,o)},dispose(e){e.removeEventListener(c.SETDOM,r),e.removeEventListener(c.SETCAMERA,o),e.pointerLockControls.dispose(),delete e.pointerLockControls}}},d=g({plugins:[S(),D({antialias:!0,alpha:!0}),R({WebGLMultisampleRenderTarget:!0}),b(),A(),q()],strategy:[T()]}).setDom(document.getElementById("app")).setSize().play(),m=d.scene,l=new w(new M(10,10,10),new _({color:"rgb(255, 105, 100)"}));l.position.x=10;m.add(l);const E=new f("rgb(255, 255, 255)",1,300,0);E.position.y=30;m.add(E);const B=new x(l.geometry);m.add(B);const u=new y(l.geometry);u.position.x=-10;m.add(u);window.engine=d;document.getElementById("lock").onclick=()=>{d.pointerLockControls.lock()};
