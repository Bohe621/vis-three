(function(t,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("@vis-three/utils"),require("@vis-three/core"),require("three")):typeof define=="function"&&define.amd?define(["exports","@vis-three/utils","@vis-three/core","three"],s):(t=typeof globalThis!="undefined"?globalThis:t||self,s((t["vis-three"]=t["vis-three"]||{},t["vis-three"]["library-constraintor"]={}),t.utils,t.core,t.three))})(this,function(t,s,n,h){"use strict";var l=Object.defineProperty;var y=(t,s,n)=>s in t?l(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var o=(t,s,n)=>(y(t,typeof s!="symbol"?s+"":s,n),n);class f extends n.EventDispatcher{}class p extends f{constructor(e,i,r="world",c,a){super();o(this,"target",{object:{},key:""});o(this,"reference",new h.Object3D);o(this,"offset",{position:{direction:"+",axes:"y"},operate:"+",value:0});o(this,"cacheBox",new h.Box3);o(this,"_space","world");this._space=r,this.setTarget(e,i),c&&this.setReference(c),a&&(this.offset=a)}get space(){return this._space}set space(e){this._space=e,this.updateBox()}setTarget(e,i){const r=s.getFinalReference(e,i);this.target={object:r.reference,key:r.key}}updateBox(){const e=this.reference;this.cacheBox.setFromObject(e),this.space==="local"&&this.cacheBox.applyMatrix4(e.matrixWorld.invert())}setReference(e){this.reference=e,this.updateBox()}constrain(){this.updateBox();const e=this.offset,i=this.cacheBox;this.target.object[this.target.key]=s.MATH.calc(e.operate,i[e.position.direction==="+"?"max":"min"][e.position.axes],e.value)}}class d extends f{constructor(e,i,r,c,a){super();o(this,"target",{object:{},key:""});o(this,"reference",{object:{},key:""});o(this,"offset",null);e&&i&&this.setTarget(e,i),r&&c&&this.setReference(r,c),this.offset=a}setTarget(e,i){const r=s.getFinalReference(e,i);this.target={object:r.reference,key:r.key}}setReference(e,i){const r=s.getFinalReference(e,i);this.reference={object:r.reference,key:r.key}}constrain(){this.offset?this.target.object[this.target.key]=s.MATH.calc(this.offset.operate,this.reference.object[this.reference.key],this.offset.value):this.target.object[this.target.key]=this.reference.object[this.reference.key]}}t.BoundingBoxConstraintor=p,t.NumberConstraintor=d,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
