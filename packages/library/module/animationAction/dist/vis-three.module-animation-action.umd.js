(function(i,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("@vis-three/tdcm"),require("three"),require("@vis-three/utils")):typeof define=="function"&&define.amd?define(["exports","@vis-three/tdcm","three","@vis-three/utils"],n):(i=typeof globalThis<"u"?globalThis:i||self,n((i["vis-three"]=i["vis-three"]||{},i["vis-three"]["module-animation-action"]={}),i.tdcm,i.three,i.utils))})(this,function(i,n,l,u){"use strict";const a=function(){return Object.assign(n.getBasicConfig(),{mixer:"",clip:"",clampWhenFinished:!0,enabled:!0,loop:l.LoopRepeat,paused:!1,repetitions:1/0,timeScale:1,weight:1,zeroSlopeAtEnd:!0,zeroSlopeAtStart:!0})},d=n.defineModel({type:"AnimationAction",config:a,commands:{set:{clip({target:e,config:t,value:c,engine:r}){e.action&&e.action.getMixer().uncacheAction(e.action.getClip());const o=r.getObjectBySymbol(t.mixer);if(!o){console.warn(`animation action model can not found animation mixer in engine: ${t.mixer}`);return}const s=r.getObjectBySymbol(c);s||console.warn(`animation action model can not found animation clip in engine: ${c}`);const m=o.clipAction(s);m.play(),e.action=m}}},create({config:e,engine:t}){if(!e.mixer)return console.warn("animation action model must have mixer"),{};if(!e.clip)return{};const c=t.getObjectBySymbol(e.mixer);if(!c)return console.warn(`animation action model can not found animation mixer in engine: ${e.mixer}`),{};const r=t.getObjectBySymbol(e.clip);if(!r)return console.warn(`animation action model can not found animation clip in engine: ${e.clip}`),{};const o=c.clipAction(r);return u.syncObject(e,o,{clip:!0,mixer:!0}),o.play(),{action:o}},dispose({target:e}){if(e.action){const t=e.action.getMixer();t.uncacheAction(e.action.getClip()),t.uncacheClip(e.action.getClip())}}}),p=n.defineModule({type:"animationAction",models:[d],lifeOrder:n.SUPPORT_LIFE_CYCLE.NINE+1});i.default=p,i.getAnimationActionConfig=a,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
