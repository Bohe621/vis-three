(function(e,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r(require("@vis-three/middleware"),require("@vis-three/module-object"),require("uuid"),require("three")):typeof define=="function"&&define.amd?define(["@vis-three/middleware","@vis-three/module-object","uuid","three"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,e["vis-three"]=e["vis-three"]||{},e["vis-three"]["module-particle"]=r(e.middleware,e.moduleObject,e.uuid,e.three))})(this,function(e,r,n,u){"use strict";var P=Object.defineProperty;var g=(e,r,n)=>r in e?P(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var d=(e,r,n)=>(g(e,typeof r!="symbol"?r+"":r,n),n);class f extends r.ObjectCompiler{constructor(){super()}}const m=function(i,a,t=n.validate){r.ObjectRule(i,a,t)},y=function(){return Object.assign(r.getObjectConfig(),{range:{top:100,bottom:-100,left:-100,right:100,front:100,back:-100},amount:200,size:1,colorMap:"",alphaMap:"",sizeAttenuation:!0,opacity:1})};class M extends u.Points{constructor(t){super();d(this,"range",{top:100,bottom:-100,left:-100,right:100,front:100,back:-100});d(this,"amount",200);this.raycast=()=>{},Object.assign(this.range,t.range),this.amount=t.amount,this.updateGeometry(),this.material=new u.PointsMaterial({sizeAttenuation:t.sizeAttenuation,size:t.size||1,map:t.colorMap||void 0,alphaMap:t.alphaMap||void 0,transparent:!0,opacity:t.opacity||1,alphaTest:.01})}updateGeometry(){const t=this.range,h=this.geometry,c=this.amount,s=(o,A)=>Math.floor(Math.random()*(A-o+1))+o,p=new Array(c*3);for(let o=0;o<c*3;o+=3)p[o]=s(t.left,t.right),p[o+1]=s(t.bottom,t.top),p[o+2]=s(t.back,t.front);h.setAttribute("position",new u.BufferAttribute(new Float32Array(p),3));const l=new Array(c*2);for(let o=0;o<c*2;o+=2)l[o]=s(0,1),l[o+1]=s(0,1);h.setAttribute("uv",new u.BufferAttribute(new Float32Array(l),2))}}var b=e.defineProcessor({type:"RangeParticle",config:y,commands:{set:{}},create(i,a){const t=new M({range:{...i.range},amount:i.amount,size:i.size,sizeAttenuation:i.sizeAttenuation,opacity:i.opacity,colorMap:a.getObjectfromModule(e.MODULETYPE.TEXTURE,i.colorMap),alphaMap:a.getObjectfromModule(e.MODULETYPE.TEXTURE,i.colorMap)});return r.objectCreate(t,i,{range:!0,amount:!0,size:!0,colorMap:!0,alphaMap:!0,sizeAttenuation:!0,opacity:!0},a)},dispose(){}}),v={type:"particle",object:!0,compiler:f,rule:m,processors:[b],lifeOrder:e.SUPPORT_LIFE_CYCLE.THREE};return v});
