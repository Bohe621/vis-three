(function(s,u){typeof exports=="object"&&typeof module!="undefined"?module.exports=u(require("@vis-three/middleware"),require("uuid"),require("three")):typeof define=="function"&&define.amd?define(["@vis-three/middleware","uuid","three"],u):(s=typeof globalThis!="undefined"?globalThis:s||self,s["vis-three"]=s["vis-three"]||{},s["vis-three"]["module-path"]=u(s.middleware,s.uuid,s.three))})(this,function(s,u,i){"use strict";class p extends s.Compiler{constructor(){super()}compile(r,t){return super.compile(r,t),this}}const v=function(e,r,t=u.validate){s.Rule(e,r,t)},a=function(){return Object.assign(s.getSymbolConfig(),{curves:[],autoClose:!1})},c={arc:"arc",ellipse:"ellipse",line:"lineTo",bezier:"bezierCurveTo",quadratic:"quadraticCurveTo"},n=function(e,r){return e.curves.length?c[r.curve]?(e[c[r.curve]](...r.params),!0):(console.warn(`path processor can not support this curve: ${r.curve}`),!1):(e.moveTo(r.params[0],r.params[1]),!0)};var h=s.defineProcessor({type:"Path",config:a,commands:{add:{curves({target:e,value:r}){n(e,r)||console.warn(`path processor can not support this curve: ${r.curve}`)}},set:{curves({target:e,config:r,path:t}){const o=Number(t[1]);if(!Number.isInteger(o)){console.warn("path processor: set curves path error:",t);return}const l=e.curves[o-1];e.currentPoint.copy(l.getPoint(1));const d=r.curves.slice(o);e.curves.splice(o,e.curves.length);for(const m of d)n(e,m)}},delete:{curves({target:e,value:r}){e.curves.length-1<r||e.curves.splice(r,e.curves.length)}}},create(e,r){const t=new i.Path;if(t.curves.length){for(const o of e.curves)if(!n(t,o)){console.warn(`path processor can not support this curve: ${o.curve}`);continue}}return t.autoClose=e.autoClose,t},dispose(e){e.curves=[]}}),f={type:"path",compiler:p,rule:v,processors:[h],lifeOrder:s.SUPPORT_LIFE_CYCLE.ZERO};return f});
