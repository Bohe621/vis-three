(function(t,u){typeof exports=="object"&&typeof module!="undefined"?module.exports=u(require("@vis-three/middleware"),require("uuid"),require("three")):typeof define=="function"&&define.amd?define(["@vis-three/middleware","uuid","three"],u):(t=typeof globalThis!="undefined"?globalThis:t||self,t["vis-three"]=t["vis-three"]||{},t["vis-three"]["module-path"]=u(t.middleware,t.uuid,t.three))})(this,function(t,u,p){"use strict";class v extends t.Compiler{constructor(){super()}compile(r,s){return super.compile(r,s),this}}const a=function(e,r,s=u.validate){t.Rule(e,r,s)},h=function(){return Object.assign(t.getSymbolConfig(),{curves:[],autoClose:!1})},i={arc:"arc",ellipse:"ellipse",line:"lineTo",bezier:"bezierCurveTo",quadratic:"quadraticCurveTo"},c=function(e,r){return i[r.curve]?(e[i[r.curve]](...r.params),!0):(console.warn(`path processor can not support this curve: ${r.curve}`),!1)};var f=t.defineProcessor({type:"Path",config:h,commands:{add:{curves({target:e,config:r,value:s}){if(r.curves.length===1){e.moveTo(s.params[0],s.params[1]);return}c(e,s)||console.warn(`path processor can not support this curve: ${s.curve}`)}},set:{curves({target:e,config:r,path:s}){const n=Number(s[1]);if(!Number.isInteger(n)){console.warn("path processor: set curves path error:",s);return}const o=e.curves[n-1];e.currentPoint.copy(o.getPoint(1));const d=r.curves.slice(n);e.curves.splice(n,e.curves.length);for(const m of d)c(e,m)}},delete:{curves({target:e,value:r}){e.curves.length-1<r||e.curves.splice(r,e.curves.length)}}},create(e,r){const s=new p.Path;if(e.curves.length)for(let n=0;n<e.curves.length;n+=1){const o=e.curves[n];if(n===0){s.moveTo(o.params[0],o.params[1]);continue}if(!c(s,o)){console.warn(`path processor can not support this curve: ${o.curve}`);continue}}return s.autoClose=e.autoClose,s},dispose(e){e.curves=[]}}),l={type:"path",compiler:v,rule:a,processors:[f],lifeOrder:t.SUPPORT_LIFE_CYCLE.ZERO};return l});
