(function(r,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i(require("@vis-three/middleware"),require("@vis-three/module-object"),require("uuid"),require("three/examples/jsm/objects/Reflector")):typeof define=="function"&&define.amd?define(["@vis-three/middleware","@vis-three/module-object","uuid","three/examples/jsm/objects/Reflector"],i):(r=typeof globalThis!="undefined"?globalThis:r||self,r["vis-three"]=r["vis-three"]||{},r["vis-three"]["module-reflector"]=i(r.middleware,r.moduleObject,r.uuid,r.Reflector))})(this,function(r,i,d,c){"use strict";class u extends i.ObjectCompiler{constructor(){super()}}const l=function(e,t,o=d.validate){i.ObjectRule(e,t,o)},f=function(){return Object.assign(i.getObjectConfig(),{geometry:"",color:"rgb(127, 127, 127)",textureWidth:0,textureHeight:0,clipBias:0,multisample:4})},s=function(e,t,o){e.getRenderTarget().setSize(t.textureHeight||o.dom.offsetWidth*window.devicePixelRatio,t.textureWidth||o.dom.offsetHeight*window.devicePixelRatio)};var m=r.defineProcessor({type:"Reflector",config:f,commands:{add:i.objectCommands.add,set:{...i.objectCommands.set,textureHeight({target:e,config:t,engine:o}){s(e,t,o)},textureWidth({target:e,config:t,engine:o}){s(e,t,o)}},delete:i.objectCommands.delete},create(e,t){const o=new c.Reflector(t.getObjectBySymbol(e.geometry),{color:e.color,clipBias:e.clipBias,textureHeight:e.textureHeight||t.dom.offsetWidth*window.devicePixelRatio,textureWidth:e.textureWidth||t.dom.offsetHeight*window.devicePixelRatio,multisample:e.multisample});return i.objectCreate(o,e,{geometry:!0,clipBias:!0,color:!0},t)},dispose(e){e.geometry=void 0,e.dispose(),i.objectDispose(e)}}),n={type:"reflector",object:!0,compiler:u,rule:l,processors:[m],lifeOrder:r.SUPPORT_LIFE_CYCLE.THREE};return n});
