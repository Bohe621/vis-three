(function(e,n){typeof exports=="object"&&typeof module!="undefined"?module.exports=n(require("@vis-three/middleware"),require("uuid"),require("three")):typeof define=="function"&&define.amd?define(["@vis-three/middleware","uuid","three"],n):(e=typeof globalThis!="undefined"?globalThis:e||self,e["vis-three"]=e["vis-three"]||{},e["vis-three"]["module-shape"]=n(e.middleware,e.uuid,e.three))})(this,function(e,n,h){"use strict";class u extends e.Compiler{constructor(){super()}}const i=function(s,t,o=n.validate){e.Rule(s,t,o)},a=function(){return Object.assign(e.getSymbolConfig(),{shape:"",holes:[]})};var f=e.defineProcessor({type:"Shape",config:a,commands:{add:{holes({target:s,engine:t,value:o}){const r=t.compilerManager.getObjectfromModule(e.MODULETYPE.PATH,o);if(!r){console.warn(`shape processor can not found path: ${o}`);return}s.holes.push(r)}},set:{shape({target:s,engine:t,value:o}){const r=t.compilerManager.getObjectfromModule(e.MODULETYPE.PATH,o);r?s.curves=r.curves:console.warn(`shape processor can not found path: ${o}`)},holes({target:s,engine:t,path:o,value:r}){const c=Number(o[1]);if(!Number.isInteger(c)){console.warn("shape processor: delete holes error:",o);return}const p=t.compilerManager.getObjectfromModule(e.MODULETYPE.PATH,r);if(!p){console.warn(`shape processor can not found path: ${r}`);return}s.holes[c]=p}},delete:{holes({target:s,path:t}){const o=Number(t[1]);if(!Number.isInteger(o)){console.warn("shape processor: delete holes error:",t);return}s.holes.splice(o,1)}}},create(s,t){const o=new h.Shape;if(s.shape){const r=t.compilerManager.getObjectfromModule(e.MODULETYPE.PATH,s.shape);r?o.curves=r.curves:console.warn(`shape processor can not found path: ${s.shape}`)}if(s.holes.length)for(const r of s.holes){const c=t.compilerManager.getObjectfromModule(e.MODULETYPE.PATH,r);c?o.holes.push(c):console.warn(`shape processor can not found path: ${r}`)}return o},dispose(s){s.curves=[],s.holes=[]}}),l={type:"shape",object:!0,compiler:u,rule:i,processors:[f],lifeOrder:e.SUPPORT_LIFE_CYCLE.ONE};return l});
