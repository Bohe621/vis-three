(function(e,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("@vis-three/module-object"),require("@vis-three/tdcm"),require("@vis-three/module-solid-object"),require("three")):typeof define=="function"&&define.amd?define(["exports","@vis-three/module-object","@vis-three/tdcm","@vis-three/module-solid-object","three"],n):(e=typeof globalThis<"u"?globalThis:e||self,n((e["vis-three"]=e["vis-three"]||{},e["vis-three"]["module-skinned-mesh"]={}),e.moduleObject,e.tdcm,e.moduleSolidObject,e.three))})(this,function(e,n,d,o,r){"use strict";const u=function(){return Object.assign(o.getSolidObjectConfig(),{skeleton:"",bindMode:"attached",bindMatrix:[]})},f=o.defineSolidObjectModel(M=>({type:"SkinnedMesh",config:u,commands:{add:{},set:{},delete:{}},create({model:c,config:t,engine:l}){const i=new r.SkinnedMesh;if(M.create({model:c,target:i,config:t,engine:l,filter:{skeleton:!0}}),t.skeleton){const s=l.getObjectBySymbol(t.skeleton);s||console.warn(`skinnedMesh processor can not found skeleton in engine: ${t.skeleton}`),c.toTrigger("object",()=>{if(t.bindMatrix.length){const h=new r.Matrix4;h.elements=[].concat(t.bindMatrix),i.bind(s,h)}else i.bind(s,i.matrixWorld);return!1})}return i},dispose(){}})),m=d.defineModule({type:"skinnedMesh",object:!0,rule:n.ObjectRule,models:[f],lifeOrder:d.SUPPORT_LIFE_CYCLE.THREE});e.default=m,e.getSkinnedMeshConfig=u,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
