(function(e,n){typeof exports=="object"&&typeof module!="undefined"?n(exports,require("@vis-three/middleware"),require("@vis-three/module-solid-object"),require("@vis-three/module-object"),require("three")):typeof define=="function"&&define.amd?define(["exports","@vis-three/middleware","@vis-three/module-solid-object","@vis-three/module-object","three"],n):(e=typeof globalThis!="undefined"?globalThis:e||self,n((e["vis-three"]=e["vis-three"]||{},e["vis-three"]["module-skinned-mesh"]={}),e.middleware,e.moduleSolidObject,e.moduleObject,e.three))})(this,function(e,n,r,h,d){"use strict";class u extends r.SolidObjectCompiler{constructor(){super()}}const f=function(t,i){h.ObjectRule(t,i)},c=function(){return Object.assign(r.getSolidObjectConfig(),{skeleton:"",bindMode:"attached",bindMatrix:[]})};var m=n.defineProcessor({type:"SkinnedMesh",config:c,commands:{add:{},set:{},delete:{}},create(t,i){const s=r.solidObjectCreate(new d.SkinnedMesh,t,{skeleton:!0},i);if(t.skeleton){const o=i.getObjectBySymbol(t.skeleton);o||console.warn(`skinnedMesh processor can not found skeleton in engine: ${t.skeleton}`),n.globalObjectModuleTrigger.registerExec(()=>{if(t.bindMatrix.length){const l=new d.Matrix4;l.elements=[].concat(t.bindMatrix),s.bind(o,l)}else s.bind(o,s.matrixWorld);return!1})}return s},dispose(){}}),a={type:"skinnedMesh",object:!0,compiler:u,rule:f,processors:[m],lifeOrder:n.SUPPORT_LIFE_CYCLE.THREE};e.SkinnedMeshCompiler=u,e.default=a,e.getSkinnedMeshConfig=c,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
