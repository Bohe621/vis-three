(function(e,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("@vis-three/module-object"),require("three"),require("@vis-three/tdcm")):typeof define=="function"&&define.amd?define(["exports","@vis-three/module-object","three","@vis-three/tdcm"],o):(e=typeof globalThis<"u"?globalThis:e||self,o((e["vis-three"]=e["vis-three"]||{},e["vis-three"]["module-solid-object"]={}),e.moduleObject,e.three,e.tdcm))})(this,function(e,o,m,s){"use strict";const u=function(){return Object.assign(o.getObjectConfig(),{material:"",geometry:""})},d=function({model:i,target:r,value:a,engine:n}){i.toAsync(l=>{const t=n.compilerManager.getObjectFromModule(s.MODULE_TYPE.GEOMETRY,a);return t?(r.geometry=t,!0):(l&&console.warn(`can not found geometry by vid in engine: ${a}`),r.geometry=i.replaceGeometry,!1)})},c=function({model:i,target:r,config:a,engine:n}){i.toAsync(l=>{let t;return typeof a.material=="string"?t=n.compilerManager.getObjectFromModule(s.MODULE_TYPE.MATERIAL,a.material)||i.replaceMaterial:t=a.material.map(y=>n.compilerManager.getObjectFromModule(s.MODULE_TYPE.MATERIAL,y)||i.replaceMaterial),r.material=t,!(Array.isArray(t)&&t.length&&t[0]===i.replaceMaterial||t===i.replaceMaterial)})},f=o.defineObjectModel.extend(i=>({shared:{replaceMaterial:new m.ShaderMaterial({fragmentShader:`
      void main () {
        gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
      }
      `}),replaceGeometry:new m.BoxGeometry(10,10,10)},commands:{add:{material:c},set:{geometry:d,material:c},delete:{material:c}},create({model:r,target:a,config:n,filter:l,engine:t}){l.geometry||(a.geometry.dispose(),d.call(r,{model:r,target:a,value:n.geometry,engine:t})),l.material||c.call(r,{model:r,target:a,config:n,engine:t}),i.create({model:r,target:a,config:n,filter:{material:!0,geometry:!0,...l},engine:t})},dispose({target:r}){i.dispose({target:r})}}));e.defineSolidObjectModel=f,e.geometryHandler=d,e.getSolidObjectConfig=u,e.materialHandler=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
