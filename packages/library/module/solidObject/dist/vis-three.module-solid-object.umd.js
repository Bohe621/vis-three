(function(r,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("@vis-three/module-object"),require("three"),require("@vis-three/tdcm")):typeof define=="function"&&define.amd?define(["exports","@vis-three/module-object","three","@vis-three/tdcm"],l):(r=typeof globalThis<"u"?globalThis:r||self,l((r["vis-three"]=r["vis-three"]||{},r["vis-three"]["module-solid-object"]={}),r.moduleObject,r.three,r.tdcm))})(this,function(r,l,m,c){"use strict";const s=function({model:t,target:a,value:i,engine:o}){t.toAsync(n=>{const e=o.compilerManager.getObjectFromModule(c.MODULE_TYPE.GEOMETRY,i);return e?(a.geometry=e,!0):(n&&console.warn(`can not found geometry by vid in engine: ${i}`),a.geometry=t.replaceGeometry,!1)})},d=function({model:t,target:a,config:i,engine:o}){t.toAsync(n=>{let e;return typeof i.material=="string"?e=o.compilerManager.getObjectFromModule(c.MODULE_TYPE.MATERIAL,i.material)||t.replaceMaterial:e=i.material.map(f=>o.compilerManager.getObjectFromModule(c.MODULE_TYPE.MATERIAL,f)||t.replaceMaterial),a.material=e,!(Array.isArray(e)&&e.length&&e[0]===t.replaceMaterial||e===t.replaceMaterial)})},u=l.defineObjectModel.extend(t=>({shared:{replaceMaterial:new m.ShaderMaterial({fragmentShader:`
      void main () {
        gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
      }
      `}),replaceGeometry:new m.BoxGeometry(10,10,10)},commands:{add:{material:d},set:{geometry:s,material:d},delete:{material:d}},create({model:a,target:i,config:o,filter:n,engine:e}){n.geometry||(i.geometry.dispose(),s.call(a,{model:a,target:i,value:o.geometry,engine:e})),n.material||d.call(a,{target:i,config:o,engine:e}),t.create({model:a,target:i,config:o,filter:n,engine:e})},dispose({target:a}){t.dispose({target:a})}}));r.defineSolidObjectModel=u,r.geometryHandler=s,r.materialHandler=d,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})});
