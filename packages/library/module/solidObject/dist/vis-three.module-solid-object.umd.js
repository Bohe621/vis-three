(function(e,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("@vis-three/module-object"),require("three"),require("@vis-three/tdcm")):typeof define=="function"&&define.amd?define(["exports","@vis-three/module-object","three","@vis-three/tdcm"],o):(e=typeof globalThis<"u"?globalThis:e||self,o((e["vis-three"]=e["vis-three"]||{},e["vis-three"]["module-solid-object"]={}),e.moduleObject,e.three,e.tdcm))})(this,function(e,o,m,d){"use strict";const u=function(){return Object.assign(o.getObjectConfig(),{material:"",geometry:""})},s=function({model:r,target:i,value:a,engine:n}){r.toAsync(l=>{const t=n.compilerManager.getObjectFromModule(d.MODULE_TYPE.GEOMETRY,a);return t?(i.geometry=t,!0):(l&&console.warn(`can not found geometry by vid in engine: ${a}`),i.geometry=r.replaceGeometry,!1)})},c=function({model:r,target:i,config:a,engine:n}){r.toAsync(l=>{let t;return typeof a.material=="string"?t=n.compilerManager.getObjectFromModule(d.MODULE_TYPE.MATERIAL,a.material)||r.replaceMaterial:t=a.material.map(y=>n.compilerManager.getObjectFromModule(d.MODULE_TYPE.MATERIAL,y)||r.replaceMaterial),i.material=t,!(Array.isArray(t)&&t.length&&t[0]===r.replaceMaterial||t===r.replaceMaterial)})},f=o.defineObjectModel.extend(r=>({shared:{replaceMaterial:new m.ShaderMaterial({fragmentShader:`
      void main () {
        gl_FragColor = vec4(0.5, 0.5, 0.5, 1.0);
      }
      `}),replaceGeometry:new m.BoxGeometry(10,10,10)},commands:{add:{material:c},set:{geometry:s,material:c},delete:{material:c}},create({model:i,target:a,config:n,filter:l,engine:t}){l.geometry||(a.geometry.dispose(),s.call(i,{model:i,target:a,value:n.geometry,engine:t})),l.material||c.call(i,{target:a,config:n,engine:t}),r.create({model:i,target:a,config:n,filter:l,engine:t})},dispose({target:i}){r.dispose({target:i})}}));e.defineSolidObjectModel=f,e.geometryHandler=s,e.getSolidObjectConfig=u,e.materialHandler=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});
