(function(r,u){typeof exports=="object"&&typeof module<"u"?module.exports=u(require("@vis-three/tdcm"),require("@vis-three/module-object"),require("three/examples/jsm/objects/Water.js"),require("three")):typeof define=="function"&&define.amd?define(["@vis-three/tdcm","@vis-three/module-object","three/examples/jsm/objects/Water.js","three"],u):(r=typeof globalThis<"u"?globalThis:r||self,r["vis-three"]=r["vis-three"]||{},r["vis-three"]["module-water"]=u(r.tdcm,r.moduleObject,r.Water_js,r.three))})(this,function(r,u,l,s){"use strict";const n=function(){return Object.assign(u.getObjectConfig(),{geometry:"",textureWidth:512,textureHeight:512,waterNormals:"",waterColor:"rgb(127, 127, 127)",sunColor:"rgb(255, 255, 255)",sunDirection:{x:.70707,y:.70707,z:0},size:1,alpha:1,time:0,distortionScale:20,eye:{x:0,y:0,z:0},fog:!1})},m=u.defineObjectModel(a=>({type:"DeepWater",config:n,commands:{set:{geometry({value:e,target:t,engine:i}){const o=i.getObjectFromModule(r.MODULE_TYPE.GEOMETRY,e);if(!o){console.warn(`DeepWater processor: can not found geometry with:${e}`);return}t.geometry=o},waterNormals({value:e,target:t,engine:i}){const o=i.getObjectFromModule(r.MODULE_TYPE.TEXTURE,e);if(!o){console.warn(`DeepWater processor: can not found texture with:${e}`);return}t.material.uniforms.normalSampler.value=o},time(e){e.target.material.uniforms.time.value=e.value},size(e){e.target.material.uniforms.size.value=e.value},alpha(e){e.target.material.uniforms.alpha.value=e.value},distortionScale(e){e.target.material.uniforms.distortionScale.value=e.value},waterColor(e){e.target.material.uniforms.waterColor.value.setStyle(e.value)},sunColor(e){e.target.material.uniforms.waterColor.value.setStyle(e.value)},sunDirection(e){e.target.material.uniforms.sunDirection.value[e.key]=e.value},eye(e){e.target.material.uniforms.eye.value[e.key]=e.value}}},create({model:e,config:t,engine:i}){const o=new l.Water(i.getObjectFromModule(r.MODULE_TYPE.GEOMETRY,t.geometry),{textureWidth:t.textureWidth||512,textureHeight:t.textureHeight||512,waterNormals:i.getObjectFromModule(r.MODULE_TYPE.TEXTURE,t.waterNormals),waterColor:t.waterColor,sunColor:t.sunColor,sunDirection:new s.Vector3(t.sunDirection.x,t.sunDirection.y,t.sunDirection.z),alpha:t.alpha,time:t.time,distortionScale:t.distortionScale,eye:new s.Vector3(t.eye.x,t.eye.y,t.eye.z),fog:t.fog});return a.create({model:e,target:o,config:t,filter:{geometry:!0,textureWidth:!0,textureHeight:!0,waterNormals:!0,waterColor:!0,sunColor:!0,sunDirection:!0,alpha:!0,time:!0,distortionScale:!0,eye:!0,fog:!0},engine:i}),o},dispose({target:e}){e.onBeforeRender=()=>{},e.material.dispose(),e.geometry=null,a.dispose({target:e})}}));return r.defineModule({type:"water",object:!0,rule:u.ObjectRule,models:[m],lifeOrder:r.SUPPORT_LIFE_CYCLE.THREE})});
