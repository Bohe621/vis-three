(function(t,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("@vis-three/utils"),require("@vis-three/core"),require("keyboardjs")):typeof define=="function"&&define.amd?define(["exports","@vis-three/utils","@vis-three/core","keyboardjs"],s):(t=typeof globalThis<"u"?globalThis:t||self,s((t["vis-three"]=t["vis-three"]||{},t["vis-three"]["plugin-keyboard-manager"]={}),t.utils,t.core,t.keyboardjs))})(this,function(t,s,u,n){"use strict";const c="@vis-three/plugin-keyboard-manager";class i extends u.EventDispatcher{constructor(){super(),this.map=new Map}generateSymbol(e){return Array.isArray(e)?e.join(" + "):e.shortcutKey.join(" + ")}watch(e){return e?n.watch(void 0,e):n.watch(),this}register(e){const r=this.generateSymbol(e);return this.map.has(r)?(console.warn(`KeyboardManager: shortcutKey already exist: ${r}. desp: ${this.map.get(r).desp}`),this):(n.bind(r,e.keydown||null,e.keyup),this.map.set(r,e),this)}update(e){const r=this.generateSymbol(e);return this.map.has(r)?(this.cancel(e.shortcutKey),this.register(e),this):(console.warn("KeyboardManager: shortcutKey unregister then exec register function"),this.register(e),this)}cancel(e){const r=this.generateSymbol(e);if(this.map.has(r)){const h=this.map.get(r);n.unbind(r,h.keydown||null,h.keyup),this.map.delete(r)}return this}checkRepeat(e){const r=this.generateSymbol(e);return this.map.has(r)}getDocs(){const e=[];return this.map.forEach(r=>{e.push({shortcutKey:[].concat(r.shortcutKey),desp:r.desp})}),e}}const o=s.transPkgName(c),d=function(a){return{name:o,install(e){e.keyboardManager=new i,a&&a.keyboards&&a.keyboards.forEach(r=>{e.keyboardManager.register(r)})},dispose(e){e.keyboardManager.clear(),delete e.keyboardManager}}};t.KEYBOARD_MANAGER_PLUGIN=o,t.KeyboardManager=i,t.KeyboardManagerPlugin=d,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
