var S=Object.defineProperty;var P=(d,e,t)=>e in d?S(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var s=(d,e,t)=>(P(d,typeof e!="symbol"?e+"":e,t),t);import{P as L,M as w,B as C,a as j,A as g,ac as R,W as f,bp as b,v,u as x,V as y,O as z,L as m,b as p,at as M}from"./three.c9232d79.js";class E{constructor(e){s(this,"canvas");this.canvas=document.createElement("canvas");const t=window.devicePixelRatio;this.canvas.width=((e==null?void 0:e.width)||512)*t,this.canvas.height=((e==null?void 0:e.height)||512)*t,this.canvas.style.backgroundColor=(e==null?void 0:e.bgColor)||"rgb(255, 255, 255)";const i=this.canvas.getContext("2d");i&&i.scale(window.devicePixelRatio,window.devicePixelRatio)}get(){return this.canvas}getDom(){return this.canvas}clear(e=0,t=0,i,n){!i&&(i=this.canvas.width),!n&&(n=this.canvas.height);const l=this.canvas.getContext("2d");return l?(l.clearRect(e,t,i,n),this):(console.warn("you browser can not support canvas 2d"),this)}draw(e){const t=this.canvas.getContext("2d");return t?(e(t),this):(console.warn("you browser can not support canvas 2d"),this)}preview(e){const t=this.canvas;return t.style.position="fixed",t.style.top=(e==null?void 0:e.top)||"5%",t.style.left=(e==null?void 0:e.left)||"5%",t.style.right=(e==null?void 0:e.right)||"unset",t.style.bottom=(e==null?void 0:e.bottom)||"unset",e!=null&&e.scale&&(t.style.transform=`scale(${e.scale})`),document.body.appendChild(this.canvas),this}}const u=new L("rgb(255, 255, 255)",.5,200,1);u.position.set(-30,5,20);u.castShadow=!0;const h=new w(new C(80,2,80),new j({color:"rgb(255, 255, 255)"}));h.position.set(0,-11,0);h.receiveShadow=!0;h.castShadow=!0;const o=class{constructor(e){s(this,"material");s(this,"dom");s(this,"renderer");s(this,"scene");s(this,"camera");s(this,"object");const t=new f({antialias:!0,preserveDrawingBuffer:!0});t.setPixelRatio(window.devicePixelRatio),t.setClearColor("rgb(150, 150, 150)"),t.shadowMap.enabled=!0,t.shadowMap.type=b;const i=new v,n=new x(45,window.innerWidth/window.innerHeight,1,500);n.position.set(0,0,35),n.up.x=0,n.up.y=1,n.up.z=0,n.lookAt(new y(0,0,0)),i.add(o.ambientLight),i.add(o.pointLight),i.add(o.plane),this.scene=i,this.renderer=t,this.camera=n,this.object=new z,e!=null&&e.material&&this.setMaterial(e.material),e!=null&&e.dom&&this.setDom(e.dom)}setMaterial(e){if(this.scene.remove(this.object),this.material=e,e.type.includes("Mesh"))this.object=new w(o.geometry,e);else if(e.type.includes("Line"))this.object=new m(o.geometry,e);else if(e.type.includes("Ponits"))this.object=new p(o.geometry,e);else if(e.type.includes("Sprite"))this.object=new M(e);else return console.warn(`material displayer can not support this type material: '${e.type}'`),this;return this.object.castShadow=!0,this.object.receiveShadow=!0,this.scene.add(this.object),this}setDom(e){return this.dom=e,this.setSize(),e.appendChild(this.renderer.domElement),this}setSize(e,t){if(e&&t)this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0);else{if(!this.dom)return console.warn("material displayer must set dom before setSize with empty parameters"),this;const i=this.dom;this.camera.aspect=i.offsetWidth/i.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(i.offsetWidth,i.offsetHeight,!0)}return this}render(){this.renderer.render(this.scene,this.camera)}getDataURL(e){return this.renderer.domElement.toDataURL(e||"image/png")}dispose(){this.renderer.dispose()}};let c=o;s(c,"ambientLight",new g("rgb(255, 255, 255)",.7)),s(c,"pointLight",u),s(c,"geometry",new R(10,12,12)),s(c,"plane",h),s(c,"dispose",()=>{o.geometry.dispose(),o.plane.geometry.dispose()});const a=class{constructor(e){s(this,"dom");s(this,"texture");s(this,"renderer");s(this,"scene");s(this,"camera");const t=new f({antialias:!0,preserveDrawingBuffer:!0});t.setPixelRatio(window.devicePixelRatio),t.setClearColor("rgb(150, 150, 150)"),t.shadowMap.enabled=!0,t.shadowMap.type=b;const i=new v,n=new x(45,window.innerWidth/window.innerHeight,1,500);n.position.set(0,0,35),n.up.x=0,n.up.y=1,n.up.z=0,n.lookAt(new y(0,0,0)),i.add(a.ambientLight),this.scene=i,this.renderer=t,this.camera=n,e!=null&&e.texture&&this.setTexture(e.texture),e!=null&&e.dom&&this.setDom(e.dom)}setTexture(e){return this.scene.background=e,this}setDom(e){return this.dom=e,this.setSize(),e.appendChild(this.renderer.domElement),this}setSize(e,t){if(e&&t)this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t,!0);else{if(!this.dom)return console.warn("texture displayer must set dom before setSize with empty parameters"),this;const i=this.dom;this.camera.aspect=i.offsetWidth/i.offsetHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(i.offsetWidth,i.offsetHeight,!0)}return this}render(){this.renderer.render(this.scene,this.camera)}getDataURL(e){return this.renderer.domElement.toDataURL(e||"image/png")}dispose(){this.renderer.dispose()}};let r=a;s(r,"ambientLight",new g("rgb(255, 255, 255)",1));export{E as C};
