import{t as g,a as S}from"./index.8b9e7665.js";import{f as v,S as A}from"./three.a7f96461.js";import{b as R}from"./index.9a3e1c8e.js";import{a as _,A as u,b as C}from"./index.44166243.js";import{c as w,d as T}from"./index.e4f0d89e.js";const B="@vis-three/helper-select-interact-strategy",I=g(B),U=function(o={}){const a=new Map,E=new Map,d=new Map,f=new Set;let l,i,L,H;return{name:I,condition:[R,_,w],exec(t){o.interact===void 0&&(o.interact=!0);const p=t.objectHelperManager,h=t.objectHelperManager.objectHelperMap;!o.activeColor&&(o.activeColor="rgb(230, 20, 240)"),!o.hoverColor&&(o.hoverColor="rgb(255, 158, 240)"),!o.defaultColor&&(o.defaultColor="rgb(255, 255, 255)"),!o.selectedColor&&(o.selectedColor=o.activeColor);const b=new v(o.defaultColor).getHex(),m=new v(o.activeColor).getHex(),N=new v(o.hoverColor).getHex(),F=new v(o.selectedColor).getHex(),c=(n,r)=>{n.material.color?n.material.color.setHex(r):n.material instanceof A&&n.material.uniforms.color.value.setHex(r)};l=n=>{const r=n.objects;for(const e of r){const s=p.addObjectHelper(e);if(!!s&&(c(s,b),o.interact)){const x=()=>{t.transformControls.dragging||t.selectionBox&&t.selectionBox.has(e)||c(s,N)},M=()=>{t.transformControls.dragging||t.selectionBox&&t.selectionBox.has(e)||c(s,b)},j=()=>{t.transformControls.dragging||t.selectionBox&&t.selectionBox.has(e)||c(s,m)};e.addEventListener("pointerenter",x),e.addEventListener("pointerleave",M),e.addEventListener("click",j),a.set(e,x),E.set(e,M),d.set(e,j)}}},i=n=>{const r=n.objects;for(const e of r)!p.disposeObjectHelper(e)||o.interact&&(e.removeEventListener("pointerenter",a.get(e)),e.removeEventListener("pointerleave",E.get(e)),e.removeEventListener("click",d.get(e)),a.delete(e),E.delete(e),d.delete(e))},t.scene.addEventListener(u,l),t.scene.addEventListener(C,i),L=n=>{const r=n.scene;r.hasEventListener(u,l)||r.addEventListener(u,l),r.hasEventListener(C,i)||r.addEventListener(C,i)},t.addEventListener(S.SETSCENE,L),H=n=>{f.forEach(r=>{c(r,b)}),f.clear();for(const r of n.objects)if(h.has(r)){const e=h.get(r);c(e,F),f.add(e)}},t.addEventListener(T,H)},rollback(t){t.scene.removeEventListener(u,l),t.scene.removeEventListener(C,i),t.removeEventListener(T,H),t.removeEventListener(S.SETSCENE,L),a.clear(),E.clear(),d.clear(),f.clear()}}};export{U as H};
