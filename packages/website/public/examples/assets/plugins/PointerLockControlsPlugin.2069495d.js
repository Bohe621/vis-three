var k=Object.defineProperty;var v=(r,t,e)=>t in r?k(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var n=(r,t,e)=>(v(r,typeof t!="symbol"?t+"":t,e),e);import"../modulepreload-polyfill.b7f2da20.js";import{ab as L,h as p,by as g,M as P,B as C,a as w,P as M,L as f,b as _}from"../three.a7f96461.js";import{W as y,C as x}from"../index.905449da.js";import{R as D}from"../index.90c2f86e.js";import{E as b}from"../index.ac438749.js";import{G as S}from"../index.2afa8225.js";import{E as R}from"../index.725c43cc.js";import{t as T,a as c,u as A}from"../index.a2f5d06c.js";const I="@vis-three/pointer-lock-controls-plugin",s=new L(0,0,0,"YXZ"),i=new p,F={type:"change"},G={type:"lock"},N={type:"unlock"},h=Math.PI/2;class O extends g{constructor(e,o){super();n(this,"domElement");n(this,"camera");n(this,"isLocked",!1);n(this,"minPolarAngle",0);n(this,"maxPolarAngle",Math.PI);n(this,"pointerSpeed",1);n(this,"direction",new p(0,0,-1));n(this,"_mouseMove",this.onMouseMove.bind(this));n(this,"_pointerlockChange",this.onPointerlockChange.bind(this));n(this,"_pointerlockError",this.onPointerlockError.bind(this));o===void 0&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),o=document.body),this.domElement=o,this.camera=e,this.connect()}setDom(e){this.dispose(),this.domElement=e,this.connect()}setCamera(e){this.camera=e}getDirection(e){return e.copy(this.direction).applyQuaternion(this.camera.quaternion)}onMouseMove(e){if(this.isLocked===!1)return;const o=e.movementX||0,a=e.movementY||0;s.setFromQuaternion(this.camera.quaternion),s.y-=o*.002*this.pointerSpeed,s.x-=a*.002*this.pointerSpeed,s.x=Math.max(h-this.maxPolarAngle,Math.min(h-this.minPolarAngle,s.x)),this.camera.quaternion.setFromEuler(s),this.dispatchEvent(F)}onPointerlockChange(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(G),this.isLocked=!0):(this.dispatchEvent(N),this.isLocked=!1)}onPointerlockError(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._mouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._pointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._pointerlockError)}dispose(){this.domElement.ownerDocument.removeEventListener("mousemove",this._mouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._pointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._pointerlockError)}getObject(){return this.camera}moveForward(e){const o=this.camera;i.setFromMatrixColumn(o.matrix,0),i.crossVectors(o.up,i),o.position.addScaledVector(i,e)}moveRight(e){i.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(i,e)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}const V=T(I),q=function(){let r,t;return{name:V,install(e){const o=new O(e.camera,e.dom);e.pointerLockControls=o,r=a=>{o.setDom(a.dom)},e.addEventListener(c.SETDOM,r),t=a=>{o.setCamera(a.camera)},e.addEventListener(c.SETCAMERA,t)},dispose(e){e.removeEventListener(c.SETDOM,r),e.removeEventListener(c.SETCAMERA,t),e.pointerLockControls.dispose(),delete e.pointerLockControls}}},d=A({plugins:[D(),y({antialias:!0,alpha:!0}),b({WebGLMultisampleRenderTarget:!0}),x(),S(),q()],strategy:[R()]}).setDom(document.getElementById("app")).setSize().play(),m=d.scene,l=new P(new C(10,10,10),new w({color:"rgb(255, 105, 100)"}));l.position.x=10;m.add(l);const E=new M("rgb(255, 255, 255)",1,300,0);E.position.y=30;m.add(E);const B=new f(l.geometry);m.add(B);const u=new _(l.geometry);u.position.x=-10;m.add(u);window.engine=d;document.getElementById("lock").onclick=()=>{d.pointerLockControls.lock()};
